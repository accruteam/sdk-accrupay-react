(function(Ie,V){typeof exports=="object"&&typeof module<"u"?V(exports,require("react"),require("@stripe/stripe-js"),require("@stripe/react-stripe-js")):typeof define=="function"&&define.amd?define(["exports","react","@stripe/stripe-js","@stripe/react-stripe-js"],V):(Ie=typeof globalThis<"u"?globalThis:Ie||self,V(Ie.Accru={},Ie.React,Ie.StripeJs,Ie.ReactStripeJs))})(this,function(Ie,V,ti,Jt){"use strict";var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ri(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var Qt={exports:{}},gt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo;function ni(){if(oo)return gt;oo=1;var t=V,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(f,y,_){var l,h={},T=null,m=null;_!==void 0&&(T=""+_),y.key!==void 0&&(T=""+y.key),y.ref!==void 0&&(m=y.ref);for(l in y)n.call(y,l)&&!s.hasOwnProperty(l)&&(h[l]=y[l]);if(f&&f.defaultProps)for(l in y=f.defaultProps,y)h[l]===void 0&&(h[l]=y[l]);return{$$typeof:e,type:f,key:T,ref:m,props:h,_owner:a.current}}return gt.Fragment=r,gt.jsx=c,gt.jsxs=c,gt}var Tt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ao;function oi(){return ao||(ao=1,process.env.NODE_ENV!=="production"&&function(){var t=V,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),g=Symbol.iterator,O="@@iterator";function u(i){if(i===null||typeof i!="object")return null;var E=g&&i[g]||i[O];return typeof E=="function"?E:null}var p=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function P(i){{for(var E=arguments.length,x=new Array(E>1?E-1:0),M=1;M<E;M++)x[M-1]=arguments[M];b("error",i,x)}}function b(i,E,x){{var M=p.ReactDebugCurrentFrame,L=M.getStackAddendum();L!==""&&(E+="%s",x=x.concat([L]));var B=x.map(function(k){return String(k)});B.unshift("Warning: "+E),Function.prototype.apply.call(console[i],console,B)}}var S=!1,A=!1,w=!1,G=!1,R=!1,D;D=Symbol.for("react.module.reference");function C(i){return!!(typeof i=="string"||typeof i=="function"||i===n||i===s||R||i===a||i===_||i===l||G||i===m||S||A||w||typeof i=="object"&&i!==null&&(i.$$typeof===T||i.$$typeof===h||i.$$typeof===c||i.$$typeof===f||i.$$typeof===y||i.$$typeof===D||i.getModuleId!==void 0))}function U(i,E,x){var M=i.displayName;if(M)return M;var L=E.displayName||E.name||"";return L!==""?x+"("+L+")":x}function I(i){return i.displayName||"Context"}function X(i){if(i==null)return null;if(typeof i.tag=="number"&&P("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case a:return"StrictMode";case _:return"Suspense";case l:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case f:var E=i;return I(E)+".Consumer";case c:var x=i;return I(x._context)+".Provider";case y:return U(i,i.render,"ForwardRef");case h:var M=i.displayName||null;return M!==null?M:X(i.type)||"Memo";case T:{var L=i,B=L._payload,k=L._init;try{return X(k(B))}catch{return null}}}return null}var te=Object.assign,q=0,pe,xe,N,Pe,me,ke,Fe;function We(){}We.__reactDisabledLog=!0;function Ne(){{if(q===0){pe=console.log,xe=console.info,N=console.warn,Pe=console.error,me=console.group,ke=console.groupCollapsed,Fe=console.groupEnd;var i={configurable:!0,enumerable:!0,value:We,writable:!0};Object.defineProperties(console,{info:i,log:i,warn:i,error:i,group:i,groupCollapsed:i,groupEnd:i})}q++}}function Ae(){{if(q--,q===0){var i={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:te({},i,{value:pe}),info:te({},i,{value:xe}),warn:te({},i,{value:N}),error:te({},i,{value:Pe}),group:te({},i,{value:me}),groupCollapsed:te({},i,{value:ke}),groupEnd:te({},i,{value:Fe})})}q<0&&P("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ne=p.ReactCurrentDispatcher,H;function K(i,E,x){{if(H===void 0)try{throw Error()}catch(L){var M=L.stack.trim().match(/\n( *(at )?)/);H=M&&M[1]||""}return`
`+H+i}}var W=!1,z;{var ue=typeof WeakMap=="function"?WeakMap:Map;z=new ue}function ve(i,E){if(!i||W)return"";{var x=z.get(i);if(x!==void 0)return x}var M;W=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var B;B=ne.current,ne.current=null,Ne();try{if(E){var k=function(){throw Error()};if(Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(_e){M=_e}Reflect.construct(i,[],k)}else{try{k.call()}catch(_e){M=_e}i.call(k.prototype)}}else{try{throw Error()}catch(_e){M=_e}i()}}catch(_e){if(_e&&M&&typeof _e.stack=="string"){for(var F=_e.stack.split(`
`),he=M.stack.split(`
`),Z=F.length-1,se=he.length-1;Z>=1&&se>=0&&F[Z]!==he[se];)se--;for(;Z>=1&&se>=0;Z--,se--)if(F[Z]!==he[se]){if(Z!==1||se!==1)do if(Z--,se--,se<0||F[Z]!==he[se]){var Oe=`
`+F[Z].replace(" at new "," at ");return i.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",i.displayName)),typeof i=="function"&&z.set(i,Oe),Oe}while(Z>=1&&se>=0);break}}}finally{W=!1,ne.current=B,Ae(),Error.prepareStackTrace=L}var Pt=i?i.displayName||i.name:"",nt=Pt?K(Pt):"";return typeof i=="function"&&z.set(i,nt),nt}function oe(i,E,x){return ve(i,!1)}function Ce(i){var E=i.prototype;return!!(E&&E.isReactComponent)}function ge(i,E,x){if(i==null)return"";if(typeof i=="function")return ve(i,Ce(i));if(typeof i=="string")return K(i);switch(i){case _:return K("Suspense");case l:return K("SuspenseList")}if(typeof i=="object")switch(i.$$typeof){case y:return oe(i.render);case h:return ge(i.type,E,x);case T:{var M=i,L=M._payload,B=M._init;try{return ge(B(L),E,x)}catch{}}}return""}var ie=Object.prototype.hasOwnProperty,ce={},Te=p.ReactDebugCurrentFrame;function be(i){if(i){var E=i._owner,x=ge(i.type,i._source,E?E.type:null);Te.setExtraStackFrame(x)}else Te.setExtraStackFrame(null)}function ze(i,E,x,M,L){{var B=Function.call.bind(ie);for(var k in i)if(B(i,k)){var F=void 0;try{if(typeof i[k]!="function"){var he=Error((M||"React class")+": "+x+" type `"+k+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[k]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw he.name="Invariant Violation",he}F=i[k](E,k,M,x,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Z){F=Z}F&&!(F instanceof Error)&&(be(L),P("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",M||"React class",x,k,typeof F),be(null)),F instanceof Error&&!(F.message in ce)&&(ce[F.message]=!0,be(L),P("Failed %s type: %s",x,F.message),be(null))}}}var Ve=Array.isArray;function jt(i){return Ve(i)}function Zn(i){{var E=typeof Symbol=="function"&&Symbol.toStringTag,x=E&&i[Symbol.toStringTag]||i.constructor.name||"Object";return x}}function eo(i){try{return Ar(i),!1}catch{return!0}}function Ar(i){return""+i}function Ut(i){if(eo(i))return P("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Zn(i)),Ar(i)}var Ze=p.ReactCurrentOwner,et={key:!0,ref:!0,__self:!0,__source:!0},mt,Lt,Ht;Ht={};function to(i){if(ie.call(i,"ref")){var E=Object.getOwnPropertyDescriptor(i,"ref").get;if(E&&E.isReactWarning)return!1}return i.ref!==void 0}function Bt(i){if(ie.call(i,"key")){var E=Object.getOwnPropertyDescriptor(i,"key").get;if(E&&E.isReactWarning)return!1}return i.key!==void 0}function vt(i,E){if(typeof i.ref=="string"&&Ze.current&&E&&Ze.current.stateNode!==E){var x=X(Ze.current.type);Ht[x]||(P('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',X(Ze.current.type),i.ref),Ht[x]=!0)}}function d(i,E){{var x=function(){mt||(mt=!0,P("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",E))};x.isReactWarning=!0,Object.defineProperty(i,"key",{get:x,configurable:!0})}}function v(i,E){{var x=function(){Lt||(Lt=!0,P("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",E))};x.isReactWarning=!0,Object.defineProperty(i,"ref",{get:x,configurable:!0})}}var j=function(i,E,x,M,L,B,k){var F={$$typeof:e,type:i,key:E,ref:x,props:k,_owner:B};return F._store={},Object.defineProperty(F._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(F,"_self",{configurable:!1,enumerable:!1,writable:!1,value:M}),Object.defineProperty(F,"_source",{configurable:!1,enumerable:!1,writable:!1,value:L}),Object.freeze&&(Object.freeze(F.props),Object.freeze(F)),F};function Q(i,E,x,M,L){{var B,k={},F=null,he=null;x!==void 0&&(Ut(x),F=""+x),Bt(E)&&(Ut(E.key),F=""+E.key),to(E)&&(he=E.ref,vt(E,L));for(B in E)ie.call(E,B)&&!et.hasOwnProperty(B)&&(k[B]=E[B]);if(i&&i.defaultProps){var Z=i.defaultProps;for(B in Z)k[B]===void 0&&(k[B]=Z[B])}if(F||he){var se=typeof i=="function"?i.displayName||i.name||"Unknown":i;F&&d(k,se),he&&v(k,se)}return j(i,F,he,L,M,Ze.current,k)}}var Y=p.ReactCurrentOwner,$=p.ReactDebugCurrentFrame;function ye(i){if(i){var E=i._owner,x=ge(i.type,i._source,E?E.type:null);$.setExtraStackFrame(x)}else $.setExtraStackFrame(null)}var Re;Re=!1;function de(i){return typeof i=="object"&&i!==null&&i.$$typeof===e}function Me(){{if(Y.current){var i=X(Y.current.type);if(i)return`

Check the render method of \``+i+"`."}return""}}function Wt(i){return""}var qe={};function Ee(i){{var E=Me();if(!E){var x=typeof i=="string"?i:i.displayName||i.name;x&&(E=`

Check the top-level render call using <`+x+">.")}return E}}function zt(i,E){{if(!i._store||i._store.validated||i.key!=null)return;i._store.validated=!0;var x=Ee(E);if(qe[x])return;qe[x]=!0;var M="";i&&i._owner&&i._owner!==Y.current&&(M=" It was passed a child from "+X(i._owner.type)+"."),ye(i),P('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',x,M),ye(null)}}function Vt(i,E){{if(typeof i!="object")return;if(jt(i))for(var x=0;x<i.length;x++){var M=i[x];de(M)&&zt(M,E)}else if(de(i))i._store&&(i._store.validated=!0);else if(i){var L=u(i);if(typeof L=="function"&&L!==i.entries)for(var B=L.call(i),k;!(k=B.next()).done;)de(k.value)&&zt(k.value,E)}}}function Cr(i){{var E=i.type;if(E==null||typeof E=="string")return;var x;if(typeof E=="function")x=E.propTypes;else if(typeof E=="object"&&(E.$$typeof===y||E.$$typeof===h))x=E.propTypes;else return;if(x){var M=X(E);ze(x,i.props,"prop",M,i)}else if(E.PropTypes!==void 0&&!Re){Re=!0;var L=X(E);P("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",L||"Unknown")}typeof E.getDefaultProps=="function"&&!E.getDefaultProps.isReactClassApproved&&P("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function tt(i){{for(var E=Object.keys(i.props),x=0;x<E.length;x++){var M=E[x];if(M!=="children"&&M!=="key"){ye(i),P("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",M),ye(null);break}}i.ref!==null&&(ye(i),P("Invalid attribute `ref` supplied to `React.Fragment`."),ye(null))}}var yt={};function rt(i,E,x,M,L,B){{var k=C(i);if(!k){var F="";(i===void 0||typeof i=="object"&&i!==null&&Object.keys(i).length===0)&&(F+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var he=Wt();he?F+=he:F+=Me();var Z;i===null?Z="null":jt(i)?Z="array":i!==void 0&&i.$$typeof===e?(Z="<"+(X(i.type)||"Unknown")+" />",F=" Did you accidentally export a JSX literal instead of a component?"):Z=typeof i,P("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Z,F)}var se=Q(i,E,x,L,B);if(se==null)return se;if(k){var Oe=E.children;if(Oe!==void 0)if(M)if(jt(Oe)){for(var Pt=0;Pt<Oe.length;Pt++)Vt(Oe[Pt],i);Object.freeze&&Object.freeze(Oe)}else P("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Vt(Oe,i)}if(ie.call(E,"key")){var nt=X(i),_e=Object.keys(E).filter(function(Kc){return Kc!=="key"}),ro=_e.length>0?"{key: someKey, "+_e.join(": ..., ")+": ...}":"{key: someKey}";if(!yt[nt+ro]){var Vc=_e.length>0?"{"+_e.join(": ..., ")+": ...}":"{}";P(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ro,nt,Vc,nt),yt[nt+ro]=!0}}return i===n?tt(se):Cr(se),se}}function Kt(i,E,x){return rt(i,E,x,!0)}function Yt(i,E,x){return rt(i,E,x,!1)}var Rr=Yt,Mr=Kt;Tt.Fragment=n,Tt.jsx=Rr,Tt.jsxs=Mr}()),Tt}var io;function ai(){return io||(io=1,process.env.NODE_ENV==="production"?Qt.exports=ni():Qt.exports=oi()),Qt.exports}var ae=ai();function ii(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${n}${a}${s}${c}`}async function si(t,e){const r=`${t.merchantId}${t.merchantSiteId}${t.clientRequestId}${t.amount}${t.currency}${t.timeStamp}${e}`,a=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(s)).map(c=>c.toString(16).padStart(2,"0")).join("")}async function li(t,e){const r={merchantId:e.merchantId,merchantSiteId:e.merchantSiteId,amount:t,currency:"USD",timeStamp:ii(new Date),clientRequestId:"nicola@fyclabs.com",billingAddress:{country:"US",email:"nicola@fyclabs.com",firstName:"nicola",lastName:"luongo"},checksum:""};r.checksum=await si(r,e.merchantSecretKey);try{const n=await fetch("https://ppp-test.nuvei.com/ppp/api/v1/openOrder.do",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),{sessionToken:a}=await n.json();return a}catch(n){throw console.error(n),new Error("Error initializing session")}}class Se{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,n,a,s,c,f,y){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const e=new TypeError(Se.TIMEOUT_ERROR_CODE);return e.code=Se.TIMEOUT_ERROR_CODE,e}}Se.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"],Se.TIMEOUT_ERROR_CODE="ETIMEDOUT";class so{constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class Xt extends Se{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=Xt.makeFetchWithAbortTimeout(e):this._fetchFn=Xt.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,n,a)=>{let s;const c=new Promise((y,_)=>{s=setTimeout(()=>{s=null,_(Se.makeTimeoutError())},a)}),f=e(r,n);return Promise.race([f,c]).finally(()=>{s&&clearTimeout(s)})}}static makeFetchWithAbortTimeout(e){return async(r,n,a)=>{const s=new AbortController;let c=setTimeout(()=>{c=null,s.abort(Se.makeTimeoutError())},a);try{return await e(r,Object.assign(Object.assign({},n),{signal:s.signal}))}catch(f){throw f.name==="AbortError"?Se.makeTimeoutError():f}finally{c&&clearTimeout(c)}}}getClientName(){return"fetch"}async makeRequest(e,r,n,a,s,c,f,y){const _=f==="http",l=new URL(n,`${_?"http":"https"}://${e}`);l.port=r;const h=a=="POST"||a=="PUT"||a=="PATCH",T=c||(h?"":void 0),m=await this._fetchFn(l.toString(),{method:a,headers:s,body:T},y);return new Ir(m)}}class Ir extends so{constructor(e){super(e.status,Ir._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){const r={};for(const n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}}class lo{computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}}class uo extends Error{}class ui extends lo{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new uo("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){const n=new TextEncoder,a=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),s=await this.subtleCrypto.sign("hmac",a,n.encode(e)),c=new Uint8Array(s),f=new Array(c.length);for(let y=0;y<c.length;y++)f[y]=Gr[c[y]];return f.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}}const Gr=new Array(256);for(let t=0;t<Gr.length;t++)Gr[t]=t.toString(16).padStart(2,"0");class ci{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;const n=e.length;let a=0;for(let s=0;s<n;++s)a|=e.charCodeAt(s)^r.charCodeAt(s);return a===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new Xt(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new ui(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class di extends Event{constructor(e,r){super(e),this.data=r}}class hi{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(e,r){const n=a=>{r(a.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(e,n)}removeListener(e,r){const n=this.listenerMapping.get(r);return this.listenerMapping.delete(r),this.eventTarget.removeEventListener(e,n)}once(e,r){const n=a=>{r(a.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(e,n,{once:!0})}emit(e,r){return this.eventTarget.dispatchEvent(new di(e,r))}}class fi extends ci{getUname(){return Promise.resolve(null)}createEmitter(){return new hi}tryBufferData(e){if(e.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(e)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const Zt=t=>{switch(t.type){case"card_error":return new ho(t);case"invalid_request_error":return new Dr(t);case"api_error":return new $r(t);case"authentication_error":return new kr(t);case"rate_limit_error":return new Fr(t);case"idempotency_error":return new mo(t);case"invalid_grant":return new vo(t);default:return new yo(t)}},co=t=>{switch(t.type){case"temporary_session_expired":return new Po(t)}switch(t.code){case"invalid_fields":return new Dr(t)}return Zt(t)};class fe extends Error{constructor(e={},r=null){super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}fe.generate=Zt;class ho extends fe{constructor(e={}){super(e,"StripeCardError")}}class Dr extends fe{constructor(e={}){super(e,"StripeInvalidRequestError")}}class $r extends fe{constructor(e={}){super(e,"StripeAPIError")}}class kr extends fe{constructor(e={}){super(e,"StripeAuthenticationError")}}class fo extends fe{constructor(e={}){super(e,"StripePermissionError")}}class Fr extends fe{constructor(e={}){super(e,"StripeRateLimitError")}}class po extends fe{constructor(e={}){super(e,"StripeConnectionError")}}class je extends fe{constructor(e,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=r}}class mo extends fe{constructor(e={}){super(e,"StripeIdempotencyError")}}class vo extends fe{constructor(e={}){super(e,"StripeInvalidGrantError")}}class yo extends fe{constructor(e={}){super(e,"StripeUnknownError")}}class Po extends fe{constructor(e={}){super(e,"TemporarySessionExpiredError")}}const go=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:$r,StripeAuthenticationError:kr,StripeCardError:ho,StripeConnectionError:po,StripeError:fe,StripeIdempotencyError:mo,StripeInvalidGrantError:vo,StripeInvalidRequestError:Dr,StripePermissionError:fo,StripeRateLimitError:Fr,StripeSignatureVerificationError:je,StripeUnknownError:yo,TemporarySessionExpiredError:Po,generateV1Error:Zt,generateV2Error:co},Symbol.toStringTag,{value:"Module"}));var Nr,To;function ot(){return To||(To=1,Nr=TypeError),Nr}const pi=ri(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var qr,_o;function er(){if(_o)return qr;_o=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&typeof e.get=="function"?e.get:null,n=t&&Map.prototype.forEach,a=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&s&&typeof s.get=="function"?s.get:null,f=a&&Set.prototype.forEach,y=typeof WeakMap=="function"&&WeakMap.prototype,_=y?WeakMap.prototype.has:null,l=typeof WeakSet=="function"&&WeakSet.prototype,h=l?WeakSet.prototype.has:null,T=typeof WeakRef=="function"&&WeakRef.prototype,m=T?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,O=Object.prototype.toString,u=Function.prototype.toString,p=String.prototype.match,P=String.prototype.slice,b=String.prototype.replace,S=String.prototype.toUpperCase,A=String.prototype.toLowerCase,w=RegExp.prototype.test,G=Array.prototype.concat,R=Array.prototype.join,D=Array.prototype.slice,C=Math.floor,U=typeof BigInt=="function"?BigInt.prototype.valueOf:null,I=Object.getOwnPropertySymbols,X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,te=typeof Symbol=="function"&&typeof Symbol.iterator=="object",q=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===te||!0)?Symbol.toStringTag:null,pe=Object.prototype.propertyIsEnumerable,xe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(d){return d.__proto__}:null);function N(d,v){if(d===1/0||d===-1/0||d!==d||d&&d>-1e3&&d<1e3||w.call(/e/,v))return v;var j=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof d=="number"){var Q=d<0?-C(-d):C(d);if(Q!==d){var Y=String(Q),$=P.call(v,Y.length+1);return b.call(Y,j,"$&_")+"."+b.call(b.call($,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(v,j,"$&_")}var Pe=pi,me=Pe.custom,ke=oe(me)?me:null,Fe={__proto__:null,double:'"',single:"'"},We={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};qr=function d(v,j,Q,Y){var $=j||{};if(ie($,"quoteStyle")&&!ie(Fe,$.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ie($,"maxStringLength")&&(typeof $.maxStringLength=="number"?$.maxStringLength<0&&$.maxStringLength!==1/0:$.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ye=ie($,"customInspect")?$.customInspect:!0;if(typeof ye!="boolean"&&ye!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ie($,"indent")&&$.indent!==null&&$.indent!=="	"&&!(parseInt($.indent,10)===$.indent&&$.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ie($,"numericSeparator")&&typeof $.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Re=$.numericSeparator;if(typeof v>"u")return"undefined";if(v===null)return"null";if(typeof v=="boolean")return v?"true":"false";if(typeof v=="string")return Ut(v,$);if(typeof v=="number"){if(v===0)return 1/0/v>0?"0":"-0";var de=String(v);return Re?N(v,de):de}if(typeof v=="bigint"){var Me=String(v)+"n";return Re?N(v,Me):Me}var Wt=typeof $.depth>"u"?5:$.depth;if(typeof Q>"u"&&(Q=0),Q>=Wt&&Wt>0&&typeof v=="object")return ne(v)?"[Array]":"[Object]";var qe=to($,Q);if(typeof Y>"u")Y=[];else if(be(Y,v)>=0)return"[Circular]";function Ee(k,F,he){if(F&&(Y=D.call(Y),Y.push(F)),he){var Z={depth:$.depth};return ie($,"quoteStyle")&&(Z.quoteStyle=$.quoteStyle),d(k,Z,Q+1,Y)}return d(k,$,Q+1,Y)}if(typeof v=="function"&&!K(v)){var zt=Te(v),Vt=vt(v,Ee);return"[Function"+(zt?": "+zt:" (anonymous)")+"]"+(Vt.length>0?" { "+R.call(Vt,", ")+" }":"")}if(oe(v)){var Cr=te?b.call(String(v),/^(Symbol\(.*\))_[^)]*$/,"$1"):X.call(v);return typeof v=="object"&&!te?et(Cr):Cr}if(Ar(v)){for(var tt="<"+A.call(String(v.nodeName)),yt=v.attributes||[],rt=0;rt<yt.length;rt++)tt+=" "+yt[rt].name+"="+Ne(Ae(yt[rt].value),"double",$);return tt+=">",v.childNodes&&v.childNodes.length&&(tt+="..."),tt+="</"+A.call(String(v.nodeName))+">",tt}if(ne(v)){if(v.length===0)return"[]";var Kt=vt(v,Ee);return qe&&!Ht(Kt)?"["+Bt(Kt,qe)+"]":"[ "+R.call(Kt,", ")+" ]"}if(W(v)){var Yt=vt(v,Ee);return!("cause"in Error.prototype)&&"cause"in v&&!pe.call(v,"cause")?"{ ["+String(v)+"] "+R.call(G.call("[cause]: "+Ee(v.cause),Yt),", ")+" }":Yt.length===0?"["+String(v)+"]":"{ ["+String(v)+"] "+R.call(Yt,", ")+" }"}if(typeof v=="object"&&ye){if(ke&&typeof v[ke]=="function"&&Pe)return Pe(v,{depth:Wt-Q});if(ye!=="symbol"&&typeof v.inspect=="function")return v.inspect()}if(ze(v)){var Rr=[];return n&&n.call(v,function(k,F){Rr.push(Ee(F,v,!0)+" => "+Ee(k,v))}),Lt("Map",r.call(v),Rr,qe)}if(Zn(v)){var Mr=[];return f&&f.call(v,function(k){Mr.push(Ee(k,v))}),Lt("Set",c.call(v),Mr,qe)}if(Ve(v))return mt("WeakMap");if(eo(v))return mt("WeakSet");if(jt(v))return mt("WeakRef");if(ue(v))return et(Ee(Number(v)));if(Ce(v))return et(Ee(U.call(v)));if(ve(v))return et(g.call(v));if(z(v))return et(Ee(String(v)));if(typeof window<"u"&&v===window)return"{ [object Window] }";if(typeof globalThis<"u"&&v===globalThis||typeof no<"u"&&v===no)return"{ [object globalThis] }";if(!H(v)&&!K(v)){var i=vt(v,Ee),E=xe?xe(v)===Object.prototype:v instanceof Object||v.constructor===Object,x=v instanceof Object?"":"null prototype",M=!E&&q&&Object(v)===v&&q in v?P.call(ce(v),8,-1):x?"Object":"",L=E||typeof v.constructor!="function"?"":v.constructor.name?v.constructor.name+" ":"",B=L+(M||x?"["+R.call(G.call([],M||[],x||[]),": ")+"] ":"");return i.length===0?B+"{}":qe?B+"{"+Bt(i,qe)+"}":B+"{ "+R.call(i,", ")+" }"}return String(v)};function Ne(d,v,j){var Q=j.quoteStyle||v,Y=Fe[Q];return Y+d+Y}function Ae(d){return b.call(String(d),/"/g,"&quot;")}function ne(d){return ce(d)==="[object Array]"&&(!q||!(typeof d=="object"&&q in d))}function H(d){return ce(d)==="[object Date]"&&(!q||!(typeof d=="object"&&q in d))}function K(d){return ce(d)==="[object RegExp]"&&(!q||!(typeof d=="object"&&q in d))}function W(d){return ce(d)==="[object Error]"&&(!q||!(typeof d=="object"&&q in d))}function z(d){return ce(d)==="[object String]"&&(!q||!(typeof d=="object"&&q in d))}function ue(d){return ce(d)==="[object Number]"&&(!q||!(typeof d=="object"&&q in d))}function ve(d){return ce(d)==="[object Boolean]"&&(!q||!(typeof d=="object"&&q in d))}function oe(d){if(te)return d&&typeof d=="object"&&d instanceof Symbol;if(typeof d=="symbol")return!0;if(!d||typeof d!="object"||!X)return!1;try{return X.call(d),!0}catch{}return!1}function Ce(d){if(!d||typeof d!="object"||!U)return!1;try{return U.call(d),!0}catch{}return!1}var ge=Object.prototype.hasOwnProperty||function(d){return d in this};function ie(d,v){return ge.call(d,v)}function ce(d){return O.call(d)}function Te(d){if(d.name)return d.name;var v=p.call(u.call(d),/^function\s*([\w$]+)/);return v?v[1]:null}function be(d,v){if(d.indexOf)return d.indexOf(v);for(var j=0,Q=d.length;j<Q;j++)if(d[j]===v)return j;return-1}function ze(d){if(!r||!d||typeof d!="object")return!1;try{r.call(d);try{c.call(d)}catch{return!0}return d instanceof Map}catch{}return!1}function Ve(d){if(!_||!d||typeof d!="object")return!1;try{_.call(d,_);try{h.call(d,h)}catch{return!0}return d instanceof WeakMap}catch{}return!1}function jt(d){if(!m||!d||typeof d!="object")return!1;try{return m.call(d),!0}catch{}return!1}function Zn(d){if(!c||!d||typeof d!="object")return!1;try{c.call(d);try{r.call(d)}catch{return!0}return d instanceof Set}catch{}return!1}function eo(d){if(!h||!d||typeof d!="object")return!1;try{h.call(d,h);try{_.call(d,_)}catch{return!0}return d instanceof WeakSet}catch{}return!1}function Ar(d){return!d||typeof d!="object"?!1:typeof HTMLElement<"u"&&d instanceof HTMLElement?!0:typeof d.nodeName=="string"&&typeof d.getAttribute=="function"}function Ut(d,v){if(d.length>v.maxStringLength){var j=d.length-v.maxStringLength,Q="... "+j+" more character"+(j>1?"s":"");return Ut(P.call(d,0,v.maxStringLength),v)+Q}var Y=We[v.quoteStyle||"single"];Y.lastIndex=0;var $=b.call(b.call(d,Y,"\\$1"),/[\x00-\x1f]/g,Ze);return Ne($,"single",v)}function Ze(d){var v=d.charCodeAt(0),j={8:"b",9:"t",10:"n",12:"f",13:"r"}[v];return j?"\\"+j:"\\x"+(v<16?"0":"")+S.call(v.toString(16))}function et(d){return"Object("+d+")"}function mt(d){return d+" { ? }"}function Lt(d,v,j,Q){var Y=Q?Bt(j,Q):R.call(j,", ");return d+" ("+v+") {"+Y+"}"}function Ht(d){for(var v=0;v<d.length;v++)if(be(d[v],`
`)>=0)return!1;return!0}function to(d,v){var j;if(d.indent==="	")j="	";else if(typeof d.indent=="number"&&d.indent>0)j=R.call(Array(d.indent+1)," ");else return null;return{base:j,prev:R.call(Array(v+1),j)}}function Bt(d,v){if(d.length===0)return"";var j=`
`+v.prev+v.base;return j+R.call(d,","+j)+`
`+v.prev}function vt(d,v){var j=ne(d),Q=[];if(j){Q.length=d.length;for(var Y=0;Y<d.length;Y++)Q[Y]=ie(d,Y)?v(d[Y],d):""}var $=typeof I=="function"?I(d):[],ye;if(te){ye={};for(var Re=0;Re<$.length;Re++)ye["$"+$[Re]]=$[Re]}for(var de in d)ie(d,de)&&(j&&String(Number(de))===de&&de<d.length||te&&ye["$"+de]instanceof Symbol||(w.call(/[^\w$]/,de)?Q.push(v(de,d)+": "+v(d[de],d)):Q.push(de+": "+v(d[de],d))));if(typeof I=="function")for(var Me=0;Me<$.length;Me++)pe.call(d,$[Me])&&Q.push("["+v($[Me])+"]: "+v(d[$[Me]],d));return Q}return qr}var jr,Eo;function mi(){if(Eo)return jr;Eo=1;var t=er(),e=ot(),r=function(f,y,_){for(var l=f,h;(h=l.next)!=null;l=h)if(h.key===y)return l.next=h.next,_||(h.next=f.next,f.next=h),h},n=function(f,y){if(f){var _=r(f,y);return _&&_.value}},a=function(f,y,_){var l=r(f,y);l?l.value=_:f.next={key:y,next:f.next,value:_}},s=function(f,y){return f?!!r(f,y):!1},c=function(f,y){if(f)return r(f,y,!0)};return jr=function(){var y,_={assert:function(l){if(!_.has(l))throw new e("Side channel does not contain "+t(l))},delete:function(l){var h=y&&y.next,T=c(y,l);return T&&h&&h===T&&(y=void 0),!!T},get:function(l){return n(y,l)},has:function(l){return s(y,l)},set:function(l,h){y||(y={next:void 0}),a(y,l,h)}};return _},jr}var Ur,So;function vi(){return So||(So=1,Ur=Object),Ur}var Lr,bo;function yi(){return bo||(bo=1,Lr=Error),Lr}var Hr,Oo;function Pi(){return Oo||(Oo=1,Hr=EvalError),Hr}var Br,wo;function gi(){return wo||(wo=1,Br=RangeError),Br}var Wr,xo;function Ti(){return xo||(xo=1,Wr=ReferenceError),Wr}var zr,Ao;function _i(){return Ao||(Ao=1,zr=SyntaxError),zr}var Vr,Co;function Ei(){return Co||(Co=1,Vr=URIError),Vr}var Kr,Ro;function Si(){return Ro||(Ro=1,Kr=Math.abs),Kr}var Yr,Mo;function bi(){return Mo||(Mo=1,Yr=Math.floor),Yr}var Jr,Io;function Oi(){return Io||(Io=1,Jr=Math.max),Jr}var Qr,Go;function wi(){return Go||(Go=1,Qr=Math.min),Qr}var Xr,Do;function xi(){return Do||(Do=1,Xr=Math.pow),Xr}var Zr,$o;function Ai(){return $o||($o=1,Zr=Object.getOwnPropertyDescriptor),Zr}var en,ko;function Fo(){if(ko)return en;ko=1;var t=Ai();if(t)try{t([],"length")}catch{t=null}return en=t,en}var tn,No;function Ci(){if(No)return tn;No=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return tn=t,tn}var rn,qo;function Ri(){return qo||(qo=1,rn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;e[r]=a;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(e,r);if(f.value!==a||f.enumerable!==!0)return!1}return!0}),rn}var nn,jo;function Mi(){if(jo)return nn;jo=1;var t=typeof Symbol<"u"&&Symbol,e=Ri();return nn=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},nn}var on,Uo;function Ii(){if(Uo)return on;Uo=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",a=function(y,_){for(var l=[],h=0;h<y.length;h+=1)l[h]=y[h];for(var T=0;T<_.length;T+=1)l[T+y.length]=_[T];return l},s=function(y,_){for(var l=[],h=_,T=0;h<y.length;h+=1,T+=1)l[T]=y[h];return l},c=function(f,y){for(var _="",l=0;l<f.length;l+=1)_+=f[l],l+1<f.length&&(_+=y);return _};return on=function(y){var _=this;if(typeof _!="function"||e.apply(_)!==n)throw new TypeError(t+_);for(var l=s(arguments,1),h,T=function(){if(this instanceof h){var p=_.apply(this,a(l,arguments));return Object(p)===p?p:this}return _.apply(y,a(l,arguments))},m=r(0,_.length-l.length),g=[],O=0;O<m;O++)g[O]="$"+O;if(h=Function("binder","return function ("+c(g,",")+"){ return binder.apply(this,arguments); }")(T),_.prototype){var u=function(){};u.prototype=_.prototype,h.prototype=new u,u.prototype=null}return h},on}var an,Lo;function tr(){if(Lo)return an;Lo=1;var t=Ii();return an=Function.prototype.bind||t,an}var sn,Ho;function ln(){return Ho||(Ho=1,sn=Function.prototype.call),sn}var un,Bo;function Wo(){return Bo||(Bo=1,un=Function.prototype.apply),un}var cn,zo;function Gi(){return zo||(zo=1,cn=typeof Reflect<"u"&&Reflect&&Reflect.apply),cn}var dn,Vo;function Di(){if(Vo)return dn;Vo=1;var t=tr(),e=Wo(),r=ln(),n=Gi();return dn=n||t.call(r,e),dn}var hn,Ko;function Yo(){if(Ko)return hn;Ko=1;var t=tr(),e=ot(),r=ln(),n=Di();return hn=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(t,r,s)},hn}var fn,Jo;function $i(){if(Jo)return fn;Jo=1;var t=Yo(),e=Fo(),r;try{r=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var n=!!r&&e&&e(Object.prototype,"__proto__"),a=Object,s=a.getPrototypeOf;return fn=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(f){return s(f==null?f:a(f))}:!1,fn}var pn,Qo;function ki(){if(Qo)return pn;Qo=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=tr();return pn=r.call(t,e),pn}var mn,Xo;function vn(){if(Xo)return mn;Xo=1;var t,e=vi(),r=yi(),n=Pi(),a=gi(),s=Ti(),c=_i(),f=ot(),y=Ei(),_=Si(),l=bi(),h=Oi(),T=wi(),m=xi(),g=Function,O=function(ne){try{return g('"use strict"; return ('+ne+").constructor;")()}catch{}},u=Fo(),p=Ci(),P=function(){throw new f},b=u?function(){try{return arguments.callee,P}catch{try{return u(arguments,"callee").get}catch{return P}}}():P,S=Mi()(),A=$i(),w=typeof Reflect=="function"&&Reflect.getPrototypeOf||e.getPrototypeOf||A,G=Wo(),R=ln(),D={},C=typeof Uint8Array>"u"||!w?t:w(Uint8Array),U={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":S&&w?w([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":D,"%AsyncGenerator%":D,"%AsyncGeneratorFunction%":D,"%AsyncIteratorPrototype%":D,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":D,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&w?w(w([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!S||!w?t:w(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":u,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!S||!w?t:w(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&w?w(""[Symbol.iterator]()):t,"%Symbol%":S?Symbol:t,"%SyntaxError%":c,"%ThrowTypeError%":b,"%TypedArray%":C,"%TypeError%":f,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":y,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":R,"%Function.prototype.apply%":G,"%Object.defineProperty%":p,"%Math.abs%":_,"%Math.floor%":l,"%Math.max%":h,"%Math.min%":T,"%Math.pow%":m};if(w)try{null.error}catch(ne){var I=w(w(ne));U["%Error.prototype%"]=I}var X=function ne(H){var K;if(H==="%AsyncFunction%")K=O("async function () {}");else if(H==="%GeneratorFunction%")K=O("function* () {}");else if(H==="%AsyncGeneratorFunction%")K=O("async function* () {}");else if(H==="%AsyncGenerator%"){var W=ne("%AsyncGeneratorFunction%");W&&(K=W.prototype)}else if(H==="%AsyncIteratorPrototype%"){var z=ne("%AsyncGenerator%");z&&w&&(K=w(z.prototype))}return U[H]=K,K},te={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},q=tr(),pe=ki(),xe=q.call(R,Array.prototype.concat),N=q.call(G,Array.prototype.splice),Pe=q.call(R,String.prototype.replace),me=q.call(R,String.prototype.slice),ke=q.call(R,RegExp.prototype.exec),Fe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,We=/\\(\\)?/g,Ne=function(H){var K=me(H,0,1),W=me(H,-1);if(K==="%"&&W!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(W==="%"&&K!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var z=[];return Pe(H,Fe,function(ue,ve,oe,Ce){z[z.length]=oe?Pe(Ce,We,"$1"):ve||ue}),z},Ae=function(H,K){var W=H,z;if(pe(te,W)&&(z=te[W],W="%"+z[0]+"%"),pe(U,W)){var ue=U[W];if(ue===D&&(ue=X(W)),typeof ue>"u"&&!K)throw new f("intrinsic "+H+" exists, but is not available. Please file an issue!");return{alias:z,name:W,value:ue}}throw new c("intrinsic "+H+" does not exist!")};return mn=function(H,K){if(typeof H!="string"||H.length===0)throw new f("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof K!="boolean")throw new f('"allowMissing" argument must be a boolean');if(ke(/^%?[^%]*%?$/,H)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var W=Ne(H),z=W.length>0?W[0]:"",ue=Ae("%"+z+"%",K),ve=ue.name,oe=ue.value,Ce=!1,ge=ue.alias;ge&&(z=ge[0],N(W,xe([0,1],ge)));for(var ie=1,ce=!0;ie<W.length;ie+=1){var Te=W[ie],be=me(Te,0,1),ze=me(Te,-1);if((be==='"'||be==="'"||be==="`"||ze==='"'||ze==="'"||ze==="`")&&be!==ze)throw new c("property names with quotes must have matching quotes");if((Te==="constructor"||!ce)&&(Ce=!0),z+="."+Te,ve="%"+z+"%",pe(U,ve))oe=U[ve];else if(oe!=null){if(!(Te in oe)){if(!K)throw new f("base intrinsic for "+H+" exists, but the property is not available.");return}if(u&&ie+1>=W.length){var Ve=u(oe,Te);ce=!!Ve,ce&&"get"in Ve&&!("originalValue"in Ve.get)?oe=Ve.get:oe=oe[Te]}else ce=pe(oe,Te),oe=oe[Te];ce&&!Ce&&(U[ve]=oe)}}return oe},mn}var yn,Zo;function ea(){if(Zo)return yn;Zo=1;var t=vn(),e=Yo(),r=e([t("%String.prototype.indexOf%")]);return yn=function(a,s){var c=t(a,!!s);return typeof c=="function"&&r(a,".prototype.")>-1?e([c]):c},yn}var Pn,ta;function ra(){if(ta)return Pn;ta=1;var t=vn(),e=ea(),r=er(),n=ot(),a=t("%Map%",!0),s=e("Map.prototype.get",!0),c=e("Map.prototype.set",!0),f=e("Map.prototype.has",!0),y=e("Map.prototype.delete",!0),_=e("Map.prototype.size",!0);return Pn=!!a&&function(){var h,T={assert:function(m){if(!T.has(m))throw new n("Side channel does not contain "+r(m))},delete:function(m){if(h){var g=y(h,m);return _(h)===0&&(h=void 0),g}return!1},get:function(m){if(h)return s(h,m)},has:function(m){return h?f(h,m):!1},set:function(m,g){h||(h=new a),c(h,m,g)}};return T},Pn}var gn,na;function Fi(){if(na)return gn;na=1;var t=vn(),e=ea(),r=er(),n=ra(),a=ot(),s=t("%WeakMap%",!0),c=e("WeakMap.prototype.get",!0),f=e("WeakMap.prototype.set",!0),y=e("WeakMap.prototype.has",!0),_=e("WeakMap.prototype.delete",!0);return gn=s?function(){var h,T,m={assert:function(g){if(!m.has(g))throw new a("Side channel does not contain "+r(g))},delete:function(g){if(s&&g&&(typeof g=="object"||typeof g=="function")){if(h)return _(h,g)}else if(n&&T)return T.delete(g);return!1},get:function(g){return s&&g&&(typeof g=="object"||typeof g=="function")&&h?c(h,g):T&&T.get(g)},has:function(g){return s&&g&&(typeof g=="object"||typeof g=="function")&&h?y(h,g):!!T&&T.has(g)},set:function(g,O){s&&g&&(typeof g=="object"||typeof g=="function")?(h||(h=new s),f(h,g,O)):n&&(T||(T=n()),T.set(g,O))}};return m}:n,gn}var Tn,oa;function Ni(){if(oa)return Tn;oa=1;var t=ot(),e=er(),r=mi(),n=ra(),a=Fi(),s=a||n||r;return Tn=function(){var f,y={assert:function(_){if(!y.has(_))throw new t("Side channel does not contain "+e(_))},delete:function(_){return!!f&&f.delete(_)},get:function(_){return f&&f.get(_)},has:function(_){return!!f&&f.has(_)},set:function(_,l){f||(f=s()),f.set(_,l)}};return y},Tn}var _n,aa;function En(){if(aa)return _n;aa=1;var t=String.prototype.replace,e=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return _n={default:r.RFC3986,formatters:{RFC1738:function(n){return t.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},_n}var Sn,ia;function sa(){if(ia)return Sn;ia=1;var t=En(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var u=[],p=0;p<256;++p)u.push("%"+((p<16?"0":"")+p.toString(16)).toUpperCase());return u}(),a=function(p){for(;p.length>1;){var P=p.pop(),b=P.obj[P.prop];if(r(b)){for(var S=[],A=0;A<b.length;++A)typeof b[A]<"u"&&S.push(b[A]);P.obj[P.prop]=S}}},s=function(p,P){for(var b=P&&P.plainObjects?{__proto__:null}:{},S=0;S<p.length;++S)typeof p[S]<"u"&&(b[S]=p[S]);return b},c=function u(p,P,b){if(!P)return p;if(typeof P!="object"&&typeof P!="function"){if(r(p))p.push(P);else if(p&&typeof p=="object")(b&&(b.plainObjects||b.allowPrototypes)||!e.call(Object.prototype,P))&&(p[P]=!0);else return[p,P];return p}if(!p||typeof p!="object")return[p].concat(P);var S=p;return r(p)&&!r(P)&&(S=s(p,b)),r(p)&&r(P)?(P.forEach(function(A,w){if(e.call(p,w)){var G=p[w];G&&typeof G=="object"&&A&&typeof A=="object"?p[w]=u(G,A,b):p.push(A)}else p[w]=A}),p):Object.keys(P).reduce(function(A,w){var G=P[w];return e.call(A,w)?A[w]=u(A[w],G,b):A[w]=G,A},S)},f=function(p,P){return Object.keys(P).reduce(function(b,S){return b[S]=P[S],b},p)},y=function(u,p,P){var b=u.replace(/\+/g," ");if(P==="iso-8859-1")return b.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(b)}catch{return b}},_=1024,l=function(p,P,b,S,A){if(p.length===0)return p;var w=p;if(typeof p=="symbol"?w=Symbol.prototype.toString.call(p):typeof p!="string"&&(w=String(p)),b==="iso-8859-1")return escape(w).replace(/%u[0-9a-f]{4}/gi,function(X){return"%26%23"+parseInt(X.slice(2),16)+"%3B"});for(var G="",R=0;R<w.length;R+=_){for(var D=w.length>=_?w.slice(R,R+_):w,C=[],U=0;U<D.length;++U){var I=D.charCodeAt(U);if(I===45||I===46||I===95||I===126||I>=48&&I<=57||I>=65&&I<=90||I>=97&&I<=122||A===t.RFC1738&&(I===40||I===41)){C[C.length]=D.charAt(U);continue}if(I<128){C[C.length]=n[I];continue}if(I<2048){C[C.length]=n[192|I>>6]+n[128|I&63];continue}if(I<55296||I>=57344){C[C.length]=n[224|I>>12]+n[128|I>>6&63]+n[128|I&63];continue}U+=1,I=65536+((I&1023)<<10|D.charCodeAt(U)&1023),C[C.length]=n[240|I>>18]+n[128|I>>12&63]+n[128|I>>6&63]+n[128|I&63]}G+=C.join("")}return G},h=function(p){for(var P=[{obj:{o:p},prop:"o"}],b=[],S=0;S<P.length;++S)for(var A=P[S],w=A.obj[A.prop],G=Object.keys(w),R=0;R<G.length;++R){var D=G[R],C=w[D];typeof C=="object"&&C!==null&&b.indexOf(C)===-1&&(P.push({obj:w,prop:D}),b.push(C))}return a(P),p},T=function(p){return Object.prototype.toString.call(p)==="[object RegExp]"},m=function(p){return!p||typeof p!="object"?!1:!!(p.constructor&&p.constructor.isBuffer&&p.constructor.isBuffer(p))},g=function(p,P){return[].concat(p,P)},O=function(p,P){if(r(p)){for(var b=[],S=0;S<p.length;S+=1)b.push(P(p[S]));return b}return P(p)};return Sn={arrayToObject:s,assign:f,combine:g,compact:h,decode:y,encode:l,isBuffer:m,isRegExp:T,maybeMap:O,merge:c},Sn}var bn,la;function qi(){if(la)return bn;la=1;var t=Ni(),e=sa(),r=En(),n=Object.prototype.hasOwnProperty,a={brackets:function(u){return u+"[]"},comma:"comma",indices:function(u,p){return u+"["+p+"]"},repeat:function(u){return u}},s=Array.isArray,c=Array.prototype.push,f=function(O,u){c.apply(O,s(u)?u:[u])},y=Date.prototype.toISOString,_=r.default,l={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:_,formatter:r.formatters[_],indices:!1,serializeDate:function(u){return y.call(u)},skipNulls:!1,strictNullHandling:!1},h=function(u){return typeof u=="string"||typeof u=="number"||typeof u=="boolean"||typeof u=="symbol"||typeof u=="bigint"},T={},m=function O(u,p,P,b,S,A,w,G,R,D,C,U,I,X,te,q,pe,xe){for(var N=u,Pe=xe,me=0,ke=!1;(Pe=Pe.get(T))!==void 0&&!ke;){var Fe=Pe.get(u);if(me+=1,typeof Fe<"u"){if(Fe===me)throw new RangeError("Cyclic object value");ke=!0}typeof Pe.get(T)>"u"&&(me=0)}if(typeof D=="function"?N=D(p,N):N instanceof Date?N=I(N):P==="comma"&&s(N)&&(N=e.maybeMap(N,function(ge){return ge instanceof Date?I(ge):ge})),N===null){if(A)return R&&!q?R(p,l.encoder,pe,"key",X):p;N=""}if(h(N)||e.isBuffer(N)){if(R){var We=q?p:R(p,l.encoder,pe,"key",X);return[te(We)+"="+te(R(N,l.encoder,pe,"value",X))]}return[te(p)+"="+te(String(N))]}var Ne=[];if(typeof N>"u")return Ne;var Ae;if(P==="comma"&&s(N))q&&R&&(N=e.maybeMap(N,R)),Ae=[{value:N.length>0?N.join(",")||null:void 0}];else if(s(D))Ae=D;else{var ne=Object.keys(N);Ae=C?ne.sort(C):ne}var H=G?String(p).replace(/\./g,"%2E"):String(p),K=b&&s(N)&&N.length===1?H+"[]":H;if(S&&s(N)&&N.length===0)return K+"[]";for(var W=0;W<Ae.length;++W){var z=Ae[W],ue=typeof z=="object"&&z&&typeof z.value<"u"?z.value:N[z];if(!(w&&ue===null)){var ve=U&&G?String(z).replace(/\./g,"%2E"):String(z),oe=s(N)?typeof P=="function"?P(K,ve):K:K+(U?"."+ve:"["+ve+"]");xe.set(u,me);var Ce=t();Ce.set(T,xe),f(Ne,O(ue,oe,P,b,S,A,w,G,P==="comma"&&q&&s(N)?null:R,D,C,U,I,X,te,q,pe,Ce))}}return Ne},g=function(u){if(!u)return l;if(typeof u.allowEmptyArrays<"u"&&typeof u.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof u.encodeDotInKeys<"u"&&typeof u.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(u.encoder!==null&&typeof u.encoder<"u"&&typeof u.encoder!="function")throw new TypeError("Encoder has to be a function.");var p=u.charset||l.charset;if(typeof u.charset<"u"&&u.charset!=="utf-8"&&u.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var P=r.default;if(typeof u.format<"u"){if(!n.call(r.formatters,u.format))throw new TypeError("Unknown format option provided.");P=u.format}var b=r.formatters[P],S=l.filter;(typeof u.filter=="function"||s(u.filter))&&(S=u.filter);var A;if(u.arrayFormat in a?A=u.arrayFormat:"indices"in u?A=u.indices?"indices":"repeat":A=l.arrayFormat,"commaRoundTrip"in u&&typeof u.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var w=typeof u.allowDots>"u"?u.encodeDotInKeys===!0?!0:l.allowDots:!!u.allowDots;return{addQueryPrefix:typeof u.addQueryPrefix=="boolean"?u.addQueryPrefix:l.addQueryPrefix,allowDots:w,allowEmptyArrays:typeof u.allowEmptyArrays=="boolean"?!!u.allowEmptyArrays:l.allowEmptyArrays,arrayFormat:A,charset:p,charsetSentinel:typeof u.charsetSentinel=="boolean"?u.charsetSentinel:l.charsetSentinel,commaRoundTrip:!!u.commaRoundTrip,delimiter:typeof u.delimiter>"u"?l.delimiter:u.delimiter,encode:typeof u.encode=="boolean"?u.encode:l.encode,encodeDotInKeys:typeof u.encodeDotInKeys=="boolean"?u.encodeDotInKeys:l.encodeDotInKeys,encoder:typeof u.encoder=="function"?u.encoder:l.encoder,encodeValuesOnly:typeof u.encodeValuesOnly=="boolean"?u.encodeValuesOnly:l.encodeValuesOnly,filter:S,format:P,formatter:b,serializeDate:typeof u.serializeDate=="function"?u.serializeDate:l.serializeDate,skipNulls:typeof u.skipNulls=="boolean"?u.skipNulls:l.skipNulls,sort:typeof u.sort=="function"?u.sort:null,strictNullHandling:typeof u.strictNullHandling=="boolean"?u.strictNullHandling:l.strictNullHandling}};return bn=function(O,u){var p=O,P=g(u),b,S;typeof P.filter=="function"?(S=P.filter,p=S("",p)):s(P.filter)&&(S=P.filter,b=S);var A=[];if(typeof p!="object"||p===null)return"";var w=a[P.arrayFormat],G=w==="comma"&&P.commaRoundTrip;b||(b=Object.keys(p)),P.sort&&b.sort(P.sort);for(var R=t(),D=0;D<b.length;++D){var C=b[D],U=p[C];P.skipNulls&&U===null||f(A,m(U,C,w,G,P.allowEmptyArrays,P.strictNullHandling,P.skipNulls,P.encodeDotInKeys,P.encode?P.encoder:null,P.filter,P.sort,P.allowDots,P.serializeDate,P.format,P.formatter,P.encodeValuesOnly,P.charset,R))}var I=A.join(P.delimiter),X=P.addQueryPrefix===!0?"?":"";return P.charsetSentinel&&(P.charset==="iso-8859-1"?X+="utf8=%26%2310003%3B&":X+="utf8=%E2%9C%93&"),I.length>0?X+I:""},bn}var On,ua;function ji(){if(ua)return On;ua=1;var t=sa(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},a=function(T){return T.replace(/&#(\d+);/g,function(m,g){return String.fromCharCode(parseInt(g,10))})},s=function(T,m){return T&&typeof T=="string"&&m.comma&&T.indexOf(",")>-1?T.split(","):T},c="utf8=%26%2310003%3B",f="utf8=%E2%9C%93",y=function(m,g){var O={__proto__:null},u=g.ignoreQueryPrefix?m.replace(/^\?/,""):m;u=u.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var p=g.parameterLimit===1/0?void 0:g.parameterLimit,P=u.split(g.delimiter,p),b=-1,S,A=g.charset;if(g.charsetSentinel)for(S=0;S<P.length;++S)P[S].indexOf("utf8=")===0&&(P[S]===f?A="utf-8":P[S]===c&&(A="iso-8859-1"),b=S,S=P.length);for(S=0;S<P.length;++S)if(S!==b){var w=P[S],G=w.indexOf("]="),R=G===-1?w.indexOf("="):G+1,D,C;R===-1?(D=g.decoder(w,n.decoder,A,"key"),C=g.strictNullHandling?null:""):(D=g.decoder(w.slice(0,R),n.decoder,A,"key"),C=t.maybeMap(s(w.slice(R+1),g),function(I){return g.decoder(I,n.decoder,A,"value")})),C&&g.interpretNumericEntities&&A==="iso-8859-1"&&(C=a(String(C))),w.indexOf("[]=")>-1&&(C=r(C)?[C]:C);var U=e.call(O,D);U&&g.duplicates==="combine"?O[D]=t.combine(O[D],C):(!U||g.duplicates==="last")&&(O[D]=C)}return O},_=function(T,m,g,O){for(var u=O?m:s(m,g),p=T.length-1;p>=0;--p){var P,b=T[p];if(b==="[]"&&g.parseArrays)P=g.allowEmptyArrays&&(u===""||g.strictNullHandling&&u===null)?[]:[].concat(u);else{P=g.plainObjects?{__proto__:null}:{};var S=b.charAt(0)==="["&&b.charAt(b.length-1)==="]"?b.slice(1,-1):b,A=g.decodeDotInKeys?S.replace(/%2E/g,"."):S,w=parseInt(A,10);!g.parseArrays&&A===""?P={0:u}:!isNaN(w)&&b!==A&&String(w)===A&&w>=0&&g.parseArrays&&w<=g.arrayLimit?(P=[],P[w]=u):A!=="__proto__"&&(P[A]=u)}u=P}return u},l=function(m,g,O,u){if(m){var p=O.allowDots?m.replace(/\.([^.[]+)/g,"[$1]"):m,P=/(\[[^[\]]*])/,b=/(\[[^[\]]*])/g,S=O.depth>0&&P.exec(p),A=S?p.slice(0,S.index):p,w=[];if(A){if(!O.plainObjects&&e.call(Object.prototype,A)&&!O.allowPrototypes)return;w.push(A)}for(var G=0;O.depth>0&&(S=b.exec(p))!==null&&G<O.depth;){if(G+=1,!O.plainObjects&&e.call(Object.prototype,S[1].slice(1,-1))&&!O.allowPrototypes)return;w.push(S[1])}if(S){if(O.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+O.depth+" and strictDepth is true");w.push("["+p.slice(S.index)+"]")}return _(w,g,O,u)}},h=function(m){if(!m)return n;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.decodeDotInKeys<"u"&&typeof m.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(m.decoder!==null&&typeof m.decoder<"u"&&typeof m.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var g=typeof m.charset>"u"?n.charset:m.charset,O=typeof m.duplicates>"u"?n.duplicates:m.duplicates;if(O!=="combine"&&O!=="first"&&O!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var u=typeof m.allowDots>"u"?m.decodeDotInKeys===!0?!0:n.allowDots:!!m.allowDots;return{allowDots:u,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof m.allowPrototypes=="boolean"?m.allowPrototypes:n.allowPrototypes,allowSparse:typeof m.allowSparse=="boolean"?m.allowSparse:n.allowSparse,arrayLimit:typeof m.arrayLimit=="number"?m.arrayLimit:n.arrayLimit,charset:g,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:n.charsetSentinel,comma:typeof m.comma=="boolean"?m.comma:n.comma,decodeDotInKeys:typeof m.decodeDotInKeys=="boolean"?m.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof m.decoder=="function"?m.decoder:n.decoder,delimiter:typeof m.delimiter=="string"||t.isRegExp(m.delimiter)?m.delimiter:n.delimiter,depth:typeof m.depth=="number"||m.depth===!1?+m.depth:n.depth,duplicates:O,ignoreQueryPrefix:m.ignoreQueryPrefix===!0,interpretNumericEntities:typeof m.interpretNumericEntities=="boolean"?m.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof m.parameterLimit=="number"?m.parameterLimit:n.parameterLimit,parseArrays:m.parseArrays!==!1,plainObjects:typeof m.plainObjects=="boolean"?m.plainObjects:n.plainObjects,strictDepth:typeof m.strictDepth=="boolean"?!!m.strictDepth:n.strictDepth,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:n.strictNullHandling}};return On=function(T,m){var g=h(m);if(T===""||T===null||typeof T>"u")return g.plainObjects?{__proto__:null}:{};for(var O=typeof T=="string"?y(T,g):T,u=g.plainObjects?{__proto__:null}:{},p=Object.keys(O),P=0;P<p.length;++P){var b=p[P],S=l(b,O[b],g,typeof T=="string");u=t.merge(u,S,g)}return g.allowSparse===!0?u:t.compact(u)},On}var wn,ca;function Ui(){if(ca)return wn;ca=1;var t=qi(),e=ji(),r=En();return wn={formats:r,parse:e,stringify:t},wn}var Li=Ui();const xn=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders"];function da(t){return t&&typeof t=="object"&&xn.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function rr(t,e){return Li.stringify(t,{serializeDate:r=>Math.floor(r.getTime()/1e3).toString(),arrayFormat:e=="v2"?"repeat":"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}const An=(()=>{const t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{const r=e.replace(/["\n\r\u2028\u2029]/g,n=>t[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(a,s)=>encodeURIComponent(n[s]||""))}})();function Hi(t){const e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}function Cn(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!da(t[0]))return t.shift();const e=Object.keys(t[0]),r=e.filter(n=>xn.includes(n));return r.length>0&&r.length!==e.length&&nr(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function ha(t){const e={host:null,headers:{},settings:{}};if(t.length>0){const r=t[t.length-1];if(typeof r=="string")e.authenticator=Gn(t.pop());else if(da(r)){const n=Object.assign({},t.pop()),a=Object.keys(n).filter(s=>!xn.includes(s));if(a.length&&nr(`Invalid options found (${a.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=Gn(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders)}}return e}function Bi(t){const e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...n){e.apply(this,n)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}function Rn(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}function Wi(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[zi(r)]=t[r],e),{}):t}function zi(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function Mn(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}function Vi(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function nr(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function Ki(t){const e=typeof t;return(e==="function"||e==="object")&&!!t}function Yi(t){const e={},r=(n,a)=>{Object.entries(n).forEach(([s,c])=>{const f=a?`${a}[${s}]`:s;if(Ki(c)){if(!(c instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(c,"data"))return r(c,f);e[f]=c}else e[f]=String(c)})};return r(t,null),e}function In(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}function Ji(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function Gn(t){const e=r=>(r.headers.Authorization="Bearer "+t,Promise.resolve());return e._apiKey=t,e}function Qi(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}function Xi(t){return JSON.stringify(t,Qi)}function Dn(t){return t&&t.startsWith("/v2")?"v2":"v1"}const Zi=60;class _t{constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,n){const a=Date.now(),s=a-e.request_start_time;return Rn({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(n),elapsed:s,request_start_time:e.request_start_time,request_end_time:a})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,n){return a=>{const s=a.getHeaders(),c=()=>{const y=this._makeResponseEvent(e,a.getStatusCode(),s);this._stripe._emitter.emit("response",y),this._recordRequestMetrics(this._getRequestId(s),y.elapsed,r)},f=a.toStream(c);return this._addHeadersDirectlyToObject(f,s),n(null,f)}}_jsonResponseHandler(e,r,n,a){return s=>{const c=s.getHeaders(),f=this._getRequestId(c),y=s.getStatusCode(),_=this._makeResponseEvent(e,y,c);this._stripe._emitter.emit("response",_),s.toJSON().then(l=>{if(l.error){let h;throw typeof l.error=="string"&&(l.error={type:l.error,message:l.error_description}),l.error.headers=c,l.error.statusCode=y,l.error.requestId=f,y===401?h=new kr(l.error):y===403?h=new fo(l.error):y===429?h=new Fr(l.error):r==="v2"?h=co(l.error):h=Zt(l.error),h}return l},l=>{throw new $r({message:"Invalid JSON received from the Stripe API",exception:l,requestId:c["request-id"]})}).then(l=>{this._recordRequestMetrics(f,_.elapsed,n);const h=s.getRawResponse();this._addHeadersDirectlyToObject(h,c),Object.defineProperty(l,"lastResponse",{enumerable:!1,writable:!1,value:h}),a(null,l)},l=>a(l,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,n,a){return a&&r===0&&Se.CONNECTION_CLOSED_ERROR_CODES.includes(a.code)?!0:r>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){const n=this._stripe.getInitialNetworkRetryDelay(),a=this._stripe.getMaxNetworkRetryDelay();let s=Math.min(n*Math.pow(2,e-1),a);return s*=.5*(1+Math.random()),s=Math.max(n,s),Number.isInteger(r)&&r<=Zi&&(s=Math.max(s,r)),s*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r,n){const a=this._getMaxNetworkRetries(r),s=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(n==="v2"){if(e==="POST"||e==="DELETE")return s()}else if(n==="v1"&&e==="POST"&&a>0)return s();return null}_makeHeaders({contentType:e,contentLength:r,apiVersion:n,clientUserAgent:a,method:s,userSuppliedHeaders:c,userSuppliedSettings:f,stripeAccount:y,stripeContext:_,apiMode:l}){const h={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(l),"X-Stripe-Client-User-Agent":a,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":y,"Stripe-Context":_,"Idempotency-Key":this._defaultIdempotencyKey(s,f,l)},T=s=="POST"||s=="PUT"||s=="PATCH";return(T||r)&&(T||nr(`${s} method had non-zero contentLength but no payload is expected for this verb`),h["Content-Length"]=r),Object.assign(Rn(h),Wi(c))}_getUserAgentString(e){const r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)nr("Request metrics buffer is full, dropping telemetry message.");else{const a={request_id:e,request_duration_ms:r};n&&n.length>0&&(a.usage=n),this._stripe._prevRequestMetrics.push(a)}}_rawRequest(e,r,n,a){return new Promise((c,f)=>{let y;try{const m=e.toUpperCase();if(m!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const g=[].slice.call([n,a]),O=Cn(g),u=Object.assign({},O),p=ha(g),P=p.headers,b=p.authenticator;y={requestMethod:m,requestPath:r,bodyData:u,queryData:{},authenticator:b,headers:P,host:null,streaming:!1,settings:{},usage:["raw_request"]}}catch(m){f(m);return}function _(m,g){m?f(m):c(g)}const{headers:l,settings:h}=y,T=y.authenticator;this._request(y.requestMethod,y.host,r,y.bodyData,T,{headers:l,settings:h,streaming:y.streaming},y.usage,_)})}_request(e,r,n,a,s,c,f=[],y,_=null){var l;let h;s=(l=s??this._stripe._authenticator)!==null&&l!==void 0?l:null;const T=Dn(n),m=(u,p,P,b,S)=>setTimeout(u,this._getSleepTimeInMS(b,S),p,P,b+1),g=(u,p,P)=>{const b=c.settings&&c.settings.timeout&&Number.isInteger(c.settings.timeout)&&c.settings.timeout>=0?c.settings.timeout:this._stripe.getApiField("timeout"),S={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},p),body:h,protocol:this._stripe.getApiField("protocol")};s(S).then(()=>{const A=this._stripe.getApiField("httpClient").makeRequest(S.host,S.port,S.path,S.method,S.headers,S.body,S.protocol,b),w=Date.now(),G=Rn({api_version:u,account:p["Stripe-Account"],idempotency_key:p["Idempotency-Key"],method:e,path:n,request_start_time:w}),R=P||0,D=this._getMaxNetworkRetries(c.settings||{});this._stripe._emitter.emit("request",G),A.then(C=>_t._shouldRetry(C,R,D)?m(g,u,p,R,C.getHeaders()["retry-after"]):c.streaming&&C.getStatusCode()<400?this._streamingResponseHandler(G,f,y)(C):this._jsonResponseHandler(G,T,f,y)(C)).catch(C=>{if(_t._shouldRetry(null,R,D,C))return m(g,u,p,R,null);{const U=C.code&&C.code===Se.TIMEOUT_ERROR_CODE;return y(new po({message:U?`Request aborted due to timeout being reached (${b}ms)`:_t._generateConnectionErrorMessage(R),detail:C}))}})}).catch(A=>{throw new fe({message:"Unable to authenticate the request",exception:A})})},O=(u,p)=>{if(u)return y(u);h=p,this._stripe.getClientUserAgent(P=>{const b=this._stripe.getApiField("version"),S=this._makeHeaders({contentType:T=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:h.length,apiVersion:b,clientUserAgent:P,method:e,userSuppliedHeaders:c.headers,userSuppliedSettings:c.settings,stripeAccount:T=="v2"?null:this._stripe.getApiField("stripeAccount"),stripeContext:T=="v2"?this._stripe.getApiField("stripeContext"):null,apiMode:T});g(b,S,0)})};if(_)_(e,a,c.headers,O);else{let u;T=="v2"?u=a?Xi(a):"":u=rr(a||{},T),O(null,u)}}}class fa{constructor(e,r,n,a){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=a}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const r=pa(this.requestArgs);if(this.index<e.data.length){const n=r?e.data.length-1-this.index:this.index,a=e.data[n];return this.index+=1,{value:a,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);const n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const e=(async()=>{const r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}}class es extends fa{getNextPage(e){const r=pa(this.requestArgs),n=ss(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}}class ts extends fa{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}class rs{constructor(e,r,n,a){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=r,this.spec=n,this.stripeResource=a}async turnPage(){const e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;const r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{const n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}const e=await this.turnPage();if(!e)return{done:!0,value:void 0};const r=e.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}}const ns=(t,e,r,n)=>{const a=Dn(r.fullPath||r.path);return a!=="v2"&&r.methodType==="search"?$n(new ts(n,e,r,t)):a!=="v2"&&r.methodType==="list"?$n(new es(n,e,r,t)):a==="v2"&&r.methodType==="list"?$n(new rs(n,e,r,t)):null},$n=t=>{const e=ls((...a)=>t.next(...a)),r=us(e),n={autoPagingEach:e,autoPagingToArray:r,next:()=>t.next(),return:()=>({}),[os()]:()=>n};return n};function os(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function as(t){if(t.length<2)return null;const e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function is(t){if(t.length===0)return;const e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(n,a){const s=e(n);a(s)}}function ss(t,e){const r=e?0:t.data.length-1,n=t.data[r],a=n&&n.id;if(!a)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return a}function ls(t){return function(){const r=[].slice.call(arguments),n=is(r),a=as(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);const s=cs(t,n);return Mn(s,a)}}function us(t){return function(r,n){const a=r&&r.limit;if(!a)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(a>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const s=new Promise((c,f)=>{const y=[];t(_=>{if(y.push(_),y.length>=a)return!1}).then(()=>{c(y)}).catch(f)});return Mn(s,n)}}function cs(t,e){return new Promise((r,n)=>{function a(s){if(s.done){r();return}const c=s.value;return new Promise(f=>{e(c,f)}).then(f=>f===!1?a({done:!0,value:void 0}):t().then(a))}t().then(a).catch(n)})}function pa(t){const e=[].slice.call(t);return!!Cn(e).ending_before}function ds(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){const r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=Hi(t.fullPath||this.createResourcePathWithSymbols(t.path||""));const n=Mn(this._makeRequest(e,t,{}),r);return Object.assign(n,ns(this,e,t,n)),n}}o.extend=Bi,o.method=ds,o.MAX_BUFFERED_REQUEST_METRICS=100;function o(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=An(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=An(this.path),this.initialize(...arguments)}o.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){const r=[this.basePath(e),this.path(e)];if(typeof t=="function"){const n=t(e);n&&r.push(n)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){var n;const a=(e.method||"GET").toUpperCase(),s=e.usage||[],c=e.urlParams||[],f=e.encode||(G=>G),y=!!e.fullPath,_=An(y?e.fullPath:e.path||""),l=y?e.fullPath:this.createResourcePathWithSymbols(e.path),h=[].slice.call(t),T=c.reduce((G,R)=>{const D=h.shift();if(typeof D!="string")throw new Error(`Stripe: Argument "${R}" must be a string, but got: ${D} (on API request to \`${a} ${l}\`)`);return G[R]=D,G},{}),m=Cn(h),g=f(Object.assign({},m,r)),O=ha(h),u=O.host||e.host,p=!!e.streaming;if(h.filter(G=>G!=null).length)throw new Error(`Stripe: Unknown arguments (${h}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${a} \`${l}\`)`);const P=y?_(T):this.createFullPath(_,T),b=Object.assign(O.headers,e.headers);e.validator&&e.validator(g,{headers:b});const S=e.method==="GET"||e.method==="DELETE";return{requestMethod:a,requestPath:P,bodyData:S?null:g,queryData:S?g:{},authenticator:(n=O.authenticator)!==null&&n!==void 0?n:null,headers:b,host:u??null,streaming:p,settings:O.settings,usage:s}},_makeRequest(t,e,r){return new Promise((n,a)=>{var s;let c;try{c=this._getRequestOpts(t,e,r)}catch(T){a(T);return}function f(T,m){T?a(T):n(e.transformResponseData?e.transformResponseData(m):m)}const y=Object.keys(c.queryData).length===0,_=[c.requestPath,y?"":"?",rr(c.queryData,Dn(c.requestPath))].join(""),{headers:l,settings:h}=c;this._stripe._requestSender._request(c.requestMethod,c.host,_,c.bodyData,c.authenticator,{headers:l,settings:h,streaming:c.streaming},c.usage,f,(s=this.requestDataProcessor)===null||s===void 0?void 0:s.bind(this))})}};function ma(t){const e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(l,h,T,m,g,O){try{this.signature.verifyHeader(l,h,T,m||e.DEFAULT_TOLERANCE,g,O)}catch(p){throw p instanceof uo&&(p.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),p}return l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},async constructEventAsync(l,h,T,m,g,O){return await this.signature.verifyHeaderAsync(l,h,T,m||e.DEFAULT_TOLERANCE,g,O),l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},generateTestHeaderString:function(l){const h=_(l),T=h.signature||h.cryptoProvider.computeHMACSignature(h.payloadString,h.secret);return h.generateHeaderString(T)},generateTestHeaderStringAsync:async function(l){const h=_(l),T=h.signature||await h.cryptoProvider.computeHMACSignatureAsync(h.payloadString,h.secret);return h.generateHeaderString(T)}},r={EXPECTED_SCHEME:"v1",verifyHeader(l,h,T,m,g,O){const{decodedHeader:u,decodedPayload:p,details:P,suspectPayloadType:b}=a(l,h,this.EXPECTED_SCHEME),S=/\s/.test(T);g=g||y();const A=g.computeHMACSignature(n(p,P),T);return s(p,u,P,A,m,b,S,O),!0},async verifyHeaderAsync(l,h,T,m,g,O){const{decodedHeader:u,decodedPayload:p,details:P,suspectPayloadType:b}=a(l,h,this.EXPECTED_SCHEME),S=/\s/.test(T);g=g||y();const A=await g.computeHMACSignatureAsync(n(p,P),T);return s(p,u,P,A,m,b,S,O)}};function n(l,h){return`${h.timestamp}.${l}`}function a(l,h,T){if(!l)throw new je(h,l,{message:"No webhook payload was provided."});const m=typeof l!="string"&&!(l instanceof Uint8Array),g=new TextDecoder("utf8"),O=l instanceof Uint8Array?g.decode(l):l;if(Array.isArray(h))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(h==null||h=="")throw new je(h,l,{message:"No stripe-signature header value was provided."});const u=h instanceof Uint8Array?g.decode(h):h,p=c(u,T);if(!p||p.timestamp===-1)throw new je(u,O,{message:"Unable to extract timestamp and signatures from header"});if(!p.signatures.length)throw new je(u,O,{message:"No signatures found with expected scheme"});return{decodedPayload:O,decodedHeader:u,details:p,suspectPayloadType:m}}function s(l,h,T,m,g,O,u,p){const P=!!T.signatures.filter(t.secureCompare.bind(t,m)).length,b=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,S=u?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!P)throw O?new je(h,l,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+b+`
`+S}):new je(h,l,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+b+`
`+S});const A=Math.floor((typeof p=="number"?p:Date.now())/1e3)-T.timestamp;if(g>0&&A>g)throw new je(h,l,{message:"Timestamp outside the tolerance zone"});return!0}function c(l,h){return typeof l!="string"?null:l.split(",").reduce((T,m)=>{const g=m.split("=");return g[0]==="t"&&(T.timestamp=parseInt(g[1],10)),g[0]===h&&T.signatures.push(g[1]),T},{timestamp:-1,signatures:[]})}let f=null;function y(){return f||(f=t.createDefaultCryptoProvider()),f}function _(l){if(!l)throw new fe({message:"Options are required"});const h=Math.floor(l.timestamp)||Math.floor(Date.now()/1e3),T=l.scheme||r.EXPECTED_SCHEME,m=l.cryptoProvider||y(),g=`${h}.${l.payload}`,O=u=>`t=${h},${T}=${u}`;return Object.assign(Object.assign({},l),{timestamp:h,scheme:T,cryptoProvider:m,payloadString:g,generateHeaderString:O})}return e.signature=r,e}const hs="2024-11-20.acacia";function fs(t,e){for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const n=r[0].toLowerCase()+r.substring(1),a=new e[r](t);this[n]=a}}function ee(t,e){return function(r){return new fs(r,e)}}const Ke=o.method,ps=o.extend({retrieve:Ke({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Ke({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Ke({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Ke({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Ke({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Ke({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Ke({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),va=o.method,ms=o.extend({retrieve:va({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:va({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),at=o.method,vs=o.extend({create:at({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:at({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:at({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:at({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:at({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:at({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),Ye=o.method,ys=o.extend({create:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),Et=o.method,Ps=o.extend({retrieve:Et({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:Et({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:Et({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:Et({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:Et({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),kn=o.method,gs=o.extend({create:kn({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:kn({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:kn({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),or=o.method,Ts=o.extend({create:or({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:or({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:or({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:or({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),St=o.method,_s=o.extend({deliverCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),ar=o.method,Es=o.extend({create:ar({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:ar({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:ar({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:ar({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),ir=o.method,Ss=o.extend({create:ir({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:ir({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:ir({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:ir({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),bt=o.method,bs=o.extend({create:bt({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:bt({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:bt({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:bt({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:bt({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),Os=o.method,ws=o.extend({create:Os({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),xs=o.method,As=o.extend({create:xs({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),Cs=o.method,Rs=o.extend({retrieve:Cs({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),ya=o.method,Ms=o.extend({retrieve:ya({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:ya({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),it=o.method,Is=o.extend({create:it({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:it({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:it({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:it({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:it({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:it({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),Fn=o.method,Gs=o.extend({create:Fn({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:Fn({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:Fn({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),Ds=o.method,$s=o.extend({fundCashBalance:Ds({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),Nn=o.method,ks=o.extend({create:Nn({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:Nn({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:Nn({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),Ot=o.method,Fs=o.extend({create:Ot({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Ot({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Ot({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Ot({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Ot({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),Pa=o.method,Ns=o.extend({retrieve:Pa({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Pa({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),Ue=o.method,qs=o.extend({create:Ue({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:Ue({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:Ue({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:Ue({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:Ue({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:Ue({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:Ue({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:Ue({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),qn=o.method,js=o.extend({retrieve(...t){return qn({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:r=>this.addFetchRelatedObjectIfNeeded(r)}).apply(this,t)},list(...t){return qn({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:()=>qn({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeAccount:t.context}])})}}),sr=o.method,Us=o.extend({create:sr({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:sr({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:sr({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:sr({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),st=o.method,Ls=o.extend({create:st({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:st({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:st({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:st({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),retrieveFeatures:st({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:st({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),jn=o.method,Hs=o.extend({fail:jn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:jn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:jn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),lr=o.method,Bs=o.extend({create:lr({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:lr({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:lr({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:lr({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),wt=o.method,Ws=o.extend({create:wt({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:wt({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:wt({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:wt({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:wt({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),zs=o.method,Vs=o.extend({create:zs({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),Ks=o.method,Ys=o.extend({create:Ks({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),Js=o.method,Qs=o.extend({create:Js({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),Xs=o.method,Zs=o.extend({create:Xs({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),el=o.method,tl=o.extend({create:el({method:"POST",fullPath:"/v1/billing/meter_events"})}),rl=o.method,nl=o.extend({create:rl({method:"POST",fullPath:"/v2/billing/meter_events"})}),Je=o.method,ol=o.extend({create:Je({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Je({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Je({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Je({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Je({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Je({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Je({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),xt=o.method,al=o.extend({create:xt({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:xt({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:xt({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:xt({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:xt({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),ur=o.method,il=o.extend({update:ur({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:ur({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:ur({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:ur({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),cr=o.method,sl=o.extend({create:cr({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:cr({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:cr({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:cr({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),dr=o.method,ll=o.extend({update:dr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:dr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:dr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:dr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),hr=o.method,ul=o.extend({create:hr({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:hr({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:hr({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:hr({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),Un=o.method,cl=o.extend({activate:Un({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:Un({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:Un({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),fr=o.method,dl=o.extend({create:fr({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:fr({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:fr({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:fr({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),ga=o.method,hl=o.extend({retrieve:ga({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:ga({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),Ta=o.method,fl=o.extend({retrieve:Ta({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:Ta({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),pl=o.method,ml=o.extend({presentPaymentMethod:pl({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})}),Ge=o.method,vl=o.extend({create:Ge({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:Ge({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:Ge({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:Ge({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),yl=o.method,Pl=o.extend({create:yl({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),_a=o.method,gl=o.extend({retrieve:_a({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:_a({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),Tl=o.method,_l=o.extend({create:Tl({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),Ea=o.method,El=o.extend({retrieve:Ea({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:Ea({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),Sl=o.method,bl=o.extend({expire:Sl({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),pr=o.method,Ol=o.extend({create:pr({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:pr({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:pr({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:pr({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),Ln=o.method,wl=o.extend({create:Ln({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Ln({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Ln({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),Sa=o.method,xl=o.extend({retrieve:Sa({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:Sa({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),Hn=o.method,Al=o.extend({create:Hn({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:Hn({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:Hn({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),ba=o.method,Cl=o.extend({retrieve:ba({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:ba({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),mr=o.method,Rl=o.extend({create:mr({method:"POST",fullPath:"/v1/apps/secrets"}),list:mr({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:mr({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:mr({method:"GET",fullPath:"/v1/apps/secrets/find"})}),Ml=o.method,Il=o.extend({create:Ml({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),lt=o.method,Gl=o.extend({create:lt({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:lt({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:lt({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:lt({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:lt({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:lt({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),Oa=o.method,Dl=o.extend({create:Oa({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:Oa({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),wa=o.method,$l=o.extend({retrieve:wa({method:"GET",fullPath:"/v1/tax/settings"}),update:wa({method:"POST",fullPath:"/v1/tax/settings"})}),xa=o.method,kl=o.extend({retrieve:xa({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:xa({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),At=o.method,Fl=o.extend({create:At({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:At({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:At({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:At({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:At({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),Bn=o.method,Nl=o.extend({retrieve:Bn({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:Bn({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:Bn({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),Aa=o.method,ql=o.extend({retrieve:Aa({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:Aa({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),Wn=o.method,jl=o.extend({createForceCapture:Wn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:Wn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:Wn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),Ca=o.method,Ul=o.extend({retrieve:Ca({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:Ca({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),zn=o.method,Ll=o.extend({retrieve:zn({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:zn({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:zn({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),vr=o.method,Hl=o.extend({retrieve:vr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:vr({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:vr({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:vr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),Ra=o.method,Bl=o.extend({retrieve:Ra({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:Ra({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),yr=o.method,Wl=o.extend({create:yr({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:yr({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:yr({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:yr({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),Ct=o.method,zl=o.extend({create:Ct({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:Ct({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:Ct({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:Ct({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:Ct({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),Ma=o.method,Vl=o.extend({retrieve:Ma({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:Ma({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),ut=o.method,Kl=o.extend({create:ut({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:ut({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:ut({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:ut({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:ut({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:ut({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),re=o.method,Ia=o.extend({create:re({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?re({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),re({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:re({method:"POST",fullPath:"/v1/accounts/{account}"}),list:re({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:re({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:re({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:re({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:re({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:re({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:re({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:re({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:re({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:re({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:re({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:re({method:"GET",fullPath:"/v1/account"}),retrieveCapability:re({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:re({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:re({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:re({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:re({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:re({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),Yl=o.method,Jl=o.extend({create:Yl({method:"POST",fullPath:"/v1/account_links"})}),Ql=o.method,Xl=o.extend({create:Ql({method:"POST",fullPath:"/v1/account_sessions"})}),Pr=o.method,Zl=o.extend({create:Pr({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:Pr({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:Pr({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:Pr({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),ct=o.method,eu=o.extend({retrieve:ct({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:ct({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:ct({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:ct({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:ct({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:ct({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),tu=o.method,ru=o.extend({retrieve:tu({method:"GET",fullPath:"/v1/balance"})}),Ga=o.method,nu=o.extend({retrieve:Ga({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:Ga({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),dt=o.method,ou=o.extend({create:dt({method:"POST",fullPath:"/v1/charges"}),retrieve:dt({method:"GET",fullPath:"/v1/charges/{charge}"}),update:dt({method:"POST",fullPath:"/v1/charges/{charge}"}),list:dt({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:dt({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:dt({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),au=o.method,iu=o.extend({retrieve:au({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),Da=o.method,su=o.extend({retrieve:Da({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:Da({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),Rt=o.method,lu=o.extend({create:Rt({method:"POST",fullPath:"/v1/coupons"}),retrieve:Rt({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:Rt({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:Rt({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:Rt({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),Le=o.method,uu=o.extend({create:Le({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Le({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Le({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Le({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Le({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Le({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Le({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Le({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),cu=o.method,du=o.extend({create:cu({method:"POST",fullPath:"/v1/customer_sessions"})}),J=o.method,hu=o.extend({create:J({method:"POST",fullPath:"/v1/customers"}),retrieve:J({method:"GET",fullPath:"/v1/customers/{customer}"}),update:J({method:"POST",fullPath:"/v1/customers/{customer}"}),list:J({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:J({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:J({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:J({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:J({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:J({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:J({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:J({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:J({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:J({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:J({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:J({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:J({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:J({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:J({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:J({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:J({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:J({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:J({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:J({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:J({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:J({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:J({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:J({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:J({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),gr=o.method,fu=o.extend({retrieve:gr({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:gr({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:gr({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:gr({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),$a=o.method,pu=o.extend({create:$a({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:$a({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),ka=o.method,mu=o.extend({retrieve:ka({method:"GET",fullPath:"/v1/events/{id}"}),list:ka({method:"GET",fullPath:"/v1/events",methodType:"list"})}),Fa=o.method,vu=o.extend({retrieve:Fa({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:Fa({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),Tr=o.method,yu=o.extend({create:Tr({method:"POST",fullPath:"/v1/file_links"}),retrieve:Tr({method:"GET",fullPath:"/v1/file_links/{link}"}),update:Tr({method:"POST",fullPath:"/v1/file_links/{link}"}),list:Tr({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),Pu=(t,e,r)=>{const n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;const a=new TextEncoder;let s=new Uint8Array(0);const c=a.encode(`\r
`);function f(l){const h=s,T=l instanceof Uint8Array?l:new Uint8Array(a.encode(l));s=new Uint8Array(h.length+T.length+2),s.set(h),s.set(T,h.length),s.set(c,s.length-2)}function y(l){return`"${l.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const _=Yi(e);for(const l in _){if(!Object.prototype.hasOwnProperty.call(_,l))continue;const h=_[l];if(f(`--${n}`),Object.prototype.hasOwnProperty.call(h,"data")){const T=h;f(`Content-Disposition: form-data; name=${y(l)}; filename=${y(T.name||"blob")}`),f(`Content-Type: ${T.type||"application/octet-stream"}`),f(""),f(T.data)}else f(`Content-Disposition: form-data; name=${y(l)}`),f(""),f(h)}return f(`--${n}--`),s};function gu(t,e,r,n){if(e=e||{},t!=="POST")return n(null,rr(e));this._stripe._platformFunctions.tryBufferData(e).then(a=>{const s=Pu(t,a,r);return n(null,s)}).catch(a=>n(a,null))}const Vn=o.method,Tu=o.extend({create:Vn({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:Vn({method:"GET",fullPath:"/v1/files/{file}"}),list:Vn({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:gu}),Mt=o.method,_u=o.extend({create:Mt({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Mt({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Mt({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Mt({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Mt({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),_r=o.method,Eu=o.extend({retrieve:_r({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:_r({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:_r({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:_r({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),le=o.method,Su=o.extend({create:le({method:"POST",fullPath:"/v1/invoices"}),retrieve:le({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:le({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:le({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:le({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:le({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),createPreview:le({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:le({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:le({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:le({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:le({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:le({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:le({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),retrieveUpcoming:le({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:le({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:le({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:le({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:le({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:le({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),bu=o.method,Ou=o.extend({retrieve:bu({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),Na=o.method,Kn="connect.stripe.com",wu=o.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${Kn}/${r}?${rr(t)}`},token:Na({method:"POST",path:"oauth/token",host:Kn}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),Na({method:"POST",path:"oauth/deauthorize",host:Kn}).apply(this,[t,...e])}}),we=o.method,xu=o.extend({create:we({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:we({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:we({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:we({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:we({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),It=o.method,Au=o.extend({create:It({method:"POST",fullPath:"/v1/payment_links"}),retrieve:It({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:It({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:It({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:It({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),Er=o.method,Cu=o.extend({create:Er({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:Er({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:Er({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:Er({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),Gt=o.method,Ru=o.extend({create:Gt({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Gt({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Gt({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Gt({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Gt({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),ht=o.method,Mu=o.extend({create:ht({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:ht({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:ht({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:ht({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:ht({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:ht({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),ft=o.method,Iu=o.extend({create:ft({method:"POST",fullPath:"/v1/payouts"}),retrieve:ft({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:ft({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:ft({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:ft({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:ft({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),Dt=o.method,Gu=o.extend({create:Dt({method:"POST",fullPath:"/v1/plans"}),retrieve:Dt({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Dt({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Dt({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Dt({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),$t=o.method,Du=o.extend({create:$t({method:"POST",fullPath:"/v1/prices"}),retrieve:$t({method:"GET",fullPath:"/v1/prices/{price}"}),update:$t({method:"POST",fullPath:"/v1/prices/{price}"}),list:$t({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:$t({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),De=o.method,$u=o.extend({create:De({method:"POST",fullPath:"/v1/products"}),retrieve:De({method:"GET",fullPath:"/v1/products/{id}"}),update:De({method:"POST",fullPath:"/v1/products/{id}"}),list:De({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:De({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:De({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:De({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:De({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:De({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:De({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),Sr=o.method,ku=o.extend({create:Sr({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Sr({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Sr({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Sr({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),$e=o.method,Fu=o.extend({create:$e({method:"POST",fullPath:"/v1/quotes"}),retrieve:$e({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:$e({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:$e({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:$e({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:$e({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:$e({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:$e({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:$e({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:$e({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),kt=o.method,Nu=o.extend({create:kt({method:"POST",fullPath:"/v1/refunds"}),retrieve:kt({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:kt({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:kt({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:kt({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),Yn=o.method,qu=o.extend({retrieve:Yn({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Yn({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Yn({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),ju=o.method,Uu=o.extend({list:ju({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),Qe=o.method,Lu=o.extend({create:Qe({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:Qe({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:Qe({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:Qe({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:Qe({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:Qe({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:Qe({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),br=o.method,Hu=o.extend({create:br({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:br({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:br({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:br({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),Ft=o.method,Bu=o.extend({create:Ft({method:"POST",fullPath:"/v1/sources"}),retrieve:Ft({method:"GET",fullPath:"/v1/sources/{source}"}),update:Ft({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:Ft({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:Ft({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),Xe=o.method,Wu=o.extend({create:Xe({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:Xe({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:Xe({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:Xe({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:Xe({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:Xe({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:Xe({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})}),pt=o.method,zu=o.extend({create:pt({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:pt({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:pt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:pt({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:pt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:pt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),He=o.method,Vu=o.extend({create:He({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:He({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:He({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:He({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:He({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:He({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:He({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:He({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),qa=o.method,Ku=o.extend({retrieve:qa({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:qa({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),Or=o.method,Yu=o.extend({create:Or({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Or({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Or({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Or({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),wr=o.method,Ju=o.extend({create:wr({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:wr({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:wr({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:wr({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),ja=o.method,Qu=o.extend({create:ja({method:"POST",fullPath:"/v1/tokens"}),retrieve:ja({method:"GET",fullPath:"/v1/tokens/{token}"})}),Nt=o.method,Xu=o.extend({create:Nt({method:"POST",fullPath:"/v1/topups"}),retrieve:Nt({method:"GET",fullPath:"/v1/topups/{topup}"}),update:Nt({method:"POST",fullPath:"/v1/topups/{topup}"}),list:Nt({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:Nt({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),Be=o.method,Zu=o.extend({create:Be({method:"POST",fullPath:"/v1/transfers"}),retrieve:Be({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Be({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Be({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Be({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Be({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Be({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Be({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),qt=o.method,ec=o.extend({create:qt({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:qt({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:qt({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:qt({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:qt({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),tc=ee("apps",{Secrets:Rl}),rc=ee("billing",{Alerts:vs,CreditBalanceSummary:Rs,CreditBalanceTransactions:Ms,CreditGrants:Is,MeterEventAdjustments:Vs,MeterEvents:tl,Meters:ol}),nc=ee("billingPortal",{Configurations:Ss,Sessions:Il}),oc=ee("checkout",{Sessions:Gl}),ac=ee("climate",{Orders:al,Products:fl,Suppliers:kl}),ic=ee("entitlements",{ActiveEntitlements:ms,Features:Us}),sc=ee("financialConnections",{Accounts:ps,Sessions:Dl,Transactions:Ul}),lc=ee("forwarding",{Requests:Al}),uc=ee("identity",{VerificationReports:Vl,VerificationSessions:Kl}),cc=ee("issuing",{Authorizations:Ps,Cardholders:Ts,Cards:Es,Disputes:Fs,PersonalizationDesigns:dl,PhysicalBundles:hl,Tokens:Nl,Transactions:Ll}),dc=ee("radar",{EarlyFraudWarnings:Ns,ValueListItems:Wl,ValueLists:zl}),hc=ee("reporting",{ReportRuns:wl,ReportTypes:xl}),fc=ee("sigma",{ScheduledQueryRuns:Cl}),pc=ee("tax",{Calculations:gs,Registrations:Ol,Settings:$l,Transactions:Hl}),mc=ee("terminal",{Configurations:bs,ConnectionTokens:As,Locations:Ws,Readers:vl}),vc=ee("testHelpers",{ConfirmationTokens:ws,Customers:$s,Refunds:bl,TestClocks:Fl,Issuing:ee("issuing",{Authorizations:ys,Cards:_s,PersonalizationDesigns:cl,Transactions:jl}),Terminal:ee("terminal",{Readers:ml}),Treasury:ee("treasury",{InboundTransfers:Hs,OutboundPayments:il,OutboundTransfers:ll,ReceivedCredits:Pl,ReceivedDebits:_l})}),yc=ee("treasury",{CreditReversals:Gs,DebitReversals:ks,FinancialAccounts:Ls,InboundTransfers:Bs,OutboundPayments:sl,OutboundTransfers:ul,ReceivedCredits:gl,ReceivedDebits:El,TransactionEntries:ql,Transactions:Bl}),Pc=ee("v2",{Billing:ee("billing",{MeterEventAdjustments:Ys,MeterEventSession:Qs,MeterEventStream:Zs,MeterEvents:nl}),Core:ee("core",{EventDestinations:qs,Events:js})}),xr=Object.freeze(Object.defineProperty({__proto__:null,Account:Ia,AccountLinks:Jl,AccountSessions:Xl,Accounts:Ia,ApplePayDomains:Zl,ApplicationFees:eu,Apps:tc,Balance:ru,BalanceTransactions:nu,Billing:rc,BillingPortal:nc,Charges:ou,Checkout:oc,Climate:ac,ConfirmationTokens:iu,CountrySpecs:su,Coupons:lu,CreditNotes:uu,CustomerSessions:du,Customers:hu,Disputes:fu,Entitlements:ic,EphemeralKeys:pu,Events:mu,ExchangeRates:vu,FileLinks:yu,Files:Tu,FinancialConnections:sc,Forwarding:lc,Identity:uc,InvoiceItems:_u,InvoiceRenderingTemplates:Eu,Invoices:Su,Issuing:cc,Mandates:Ou,OAuth:wu,PaymentIntents:xu,PaymentLinks:Au,PaymentMethodConfigurations:Cu,PaymentMethodDomains:Ru,PaymentMethods:Mu,Payouts:Iu,Plans:Gu,Prices:Du,Products:$u,PromotionCodes:ku,Quotes:Fu,Radar:dc,Refunds:Nu,Reporting:hc,Reviews:qu,SetupAttempts:Uu,SetupIntents:Lu,ShippingRates:Hu,Sigma:fc,Sources:Bu,SubscriptionItems:Wu,SubscriptionSchedules:zu,Subscriptions:Vu,Tax:pc,TaxCodes:Ku,TaxIds:Yu,TaxRates:Ju,Terminal:mc,TestHelpers:vc,Tokens:Qu,Topups:Xu,Transfers:Zu,Treasury:yc,V2:Pc,WebhookEndpoints:ec},Symbol.toStringTag,{value:"Module"})),Ua="api.stripe.com",La="443",Ha="/v1/",Ba=hs,Wa=8e4,za=5,Va=.5,gc=["name","version","url","partner_id"],Ka=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],Tc=t=>new _t(t,o.MAX_BUFFERED_REQUEST_METRICS);function _c(t,e=Tc){n.PACKAGE_VERSION="17.4.0",n.USER_AGENT=Object.assign({bindings_version:n.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},Ji()),n.StripeResource=o,n.resources=xr,n.HttpClient=Se,n.HttpClientResponse=so,n.CryptoProvider=lo;function r(a=t){return ma(a)}n.webhooks=Object.assign(r,ma(t));function n(a,s={}){if(!(this instanceof n))return new n(a,s);const c=this._getPropsFromConfig(s);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=n.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const f=c.httpAgent||null;this._api={host:c.host||Ua,port:c.port||La,protocol:c.protocol||"https",basePath:Ha,version:c.apiVersion||Ba,timeout:In("timeout",c.timeout,Wa),maxNetworkRetries:In("maxNetworkRetries",c.maxNetworkRetries,2),agent:f,httpClient:c.httpClient||(f?this._platformFunctions.createNodeHttpClient(f):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:c.stripeAccount||null,stripeContext:c.stripeContext||null};const y=c.typescript||!1;y!==n.USER_AGENT.typescript&&(n.USER_AGENT.typescript=y),c.appInfo&&this._setAppInfo(c.appInfo),this._prepResources(),this._setAuthenticator(a,c.authenticator),this.errors=go,this.webhooks=r(),this._prevRequestMetrics=[],this._enableTelemetry=c.telemetry!==!1,this._requestSender=e(this),this.StripeResource=n.StripeResource}return n.errors=go,n.createNodeHttpClient=t.createNodeHttpClient,n.createFetchHttpClient=t.createFetchHttpClient,n.createNodeCryptoProvider=t.createNodeCryptoProvider,n.createSubtleCryptoProvider=t.createSubtleCryptoProvider,n.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(a,s,c,f){return this._requestSender._rawRequest(a,s,c,f)},_setAuthenticator(a,s){if(a&&s)throw new Error("Can't specify both apiKey and authenticator");if(!a&&!s)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=a?Gn(a):s},_setAppInfo(a){if(a&&typeof a!="object")throw new Error("AppInfo must be an object.");if(a&&!a.name)throw new Error("AppInfo.name is required");a=a||{},this._appInfo=gc.reduce((s,c)=>(typeof a[c]=="string"&&(s=s||{},s[c]=a[c]),s),void 0)},_setApiField(a,s){this._api[a]=s},getApiField(a){return this._api[a]},setClientId(a){this._clientId=a},getClientId(){return this._clientId},getConstant:a=>{switch(a){case"DEFAULT_HOST":return Ua;case"DEFAULT_PORT":return La;case"DEFAULT_BASE_PATH":return Ha;case"DEFAULT_API_VERSION":return Ba;case"DEFAULT_TIMEOUT":return Wa;case"MAX_NETWORK_RETRY_DELAY_SEC":return za;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return Va}return n[a]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(a,s,c){const f=In(a,s,c);this._setApiField(a,f)},getMaxNetworkRetryDelay(){return za},getInitialNetworkRetryDelay(){return Va},getClientUserAgent(a){return this.getClientUserAgentSeeded(n.USER_AGENT,a)},getClientUserAgentSeeded(a,s){this._platformFunctions.getUname().then(c=>{var f;const y={};for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&(y[l]=encodeURIComponent((f=a[l])!==null&&f!==void 0?f:"null"));y.uname=encodeURIComponent(c||"UNKNOWN");const _=this.getApiField("httpClient");_&&(y.httplib=encodeURIComponent(_.getClientName())),this._appInfo&&(y.application=this._appInfo),s(JSON.stringify(y))})},getAppInfoAsString(){if(!this._appInfo)return"";let a=this._appInfo.name;return this._appInfo.version&&(a+=`/${this._appInfo.version}`),this._appInfo.url&&(a+=` (${this._appInfo.url})`),a},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const a in xr)Object.prototype.hasOwnProperty.call(xr,a)&&(this[Vi(a)]=new xr[a](this))},_getPropsFromConfig(a){if(!a)return{};const s=typeof a=="string";if(!(a===Object(a)&&!Array.isArray(a))&&!s)throw new Error("Config must either be an object or a string");if(s)return{apiVersion:a};if(Object.keys(a).filter(y=>!Ka.includes(y)).length>0)throw new Error(`Config object may only contain the following: ${Ka.join(", ")}`);return a},parseThinEvent(a,s,c,f,y,_){return this.webhooks.constructEvent(a,s,c,f,y,_)}},n}const Ec=_c(new fi);async function Sc(t,e){return(await new Ec(e.secretKey).paymentIntents.create({customer:"cus_RQATBsWqSFeYZp",amount:t,currency:"USD",automatic_payment_methods:{enabled:!0}})).client_secret}async function Ya(t,{amount:e},r){if(t==="nuvei")return li(e.toString(),r);if(t==="stripe")return Sc(e,r)}async function bc(t){return new Promise((e,r)=>{if(document.querySelector(`script[src="${t}"]`)){e();return}const a=Object.assign(document.createElement("script"),{type:"text/javascript",defer:!0,src:t,onerror:s=>{r(s)}});a.onload=()=>{e()},document.body.appendChild(a)})}function Oc(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ja(t){const{text:e,onSuccess:r,onError:n,onComplete:a,submitPayment:s,...c}=t;return ae.jsx("button",{onClick:async()=>(c.onSubmit&&await c.onSubmit(),s({onSuccess:r||(()=>{}),onError:n||(()=>{}),onComplete:a||(()=>{})})),...c,children:e})}function Qa(t){const{onChange:e,...r}=t;return ae.jsx("input",{onChange:e,...r})}const wc="https://cdn.safecharge.com/safecharge_resources/v1/websdk/safecharge.js",Xa=V.createContext(void 0);async function xc(t,e){return new Promise(function(r,n){t.createPayment(e,a=>{if(a.result==="APPROVED")r(a);else{const s=a.errorDescription?String(a.errorDescription).toLowerCase():"",c=a.transactionStatus?String(a.transactionStatus).toLowerCase():"failed";n(new Error(`Transaction ${c}.${c.includes(s)?"":` Reason: ${Oc(s)}.`}`))}})})}function Ac({children:t,amount:e,config:r}){const[n,a]=V.useState({cardNumber:null,cardExpiry:null,cardCvc:null,cardHolderName:""}),[s,c]=V.useState(),[f,y]=V.useState(),[_,l]=V.useState("");if(!r)throw new Error("config missing");V.useEffect(()=>{async function m(){const g=await Ya("nuvei",{amount:e},r);l(g)}m()},[]),V.useEffect(()=>{bc(wc).then(()=>{window.SafeCharge!==void 0&&c(window.SafeCharge({env:r.env,merchantId:r.merchantId,merchantSiteId:r.merchantSiteId}))})},[]),V.useEffect(()=>{if(s&&!f){const m=s.fields({});y(m)}},[s,f]);function h(m,g){a(O=>({...O,[m]:g}))}async function T(m){try{if(!n.cardHolderName)throw new Error("Card holder name is required.");if(!n.cardNumber.parentElm.classList.contains(n.cardNumber.stateClass.complete))throw new Error("Invalid card number.");if(!n.cardExpiry.parentElm.classList.contains(n.cardExpiry.stateClass.complete))throw new Error("Invalid card expiry.");if(!n.cardCvc.parentElm.classList.contains(n.cardCvc.stateClass.complete))throw new Error("Invalid card cvc.")}catch(g){console.error(g),m.onError(g),m.onComplete();return}try{const g=await xc(s,{cardHolderName:n.cardHolderName,sessionToken:_,paymentOption:n.cardNumber});m.onSuccess(g)}catch(g){console.error(g),m.onError(g)}m.onComplete()}return!s||!f||!_?null:ae.jsx(Xa.Provider,{value:{submitPayment:T,form:n,updateField:h,safeCharge:s,safeChargeFields:f},children:t})}function Jn(){return V.useContext(Xa)}function Cc(t){switch(t){case"cardNumber":return"ccNumber";case"cardExpiry":return"ccExpiration";case"cardCvc":return"ccCvc"}}const Qn=V.memo(({fieldType:t})=>{const{updateField:e,safeChargeFields:r}=Jn(),n=`accru-payment-form-${t}-container`;return V.useEffect(()=>{const a=Cc(t);if(!r.instances.map(s=>s.type).includes(a)){const s=r.create(a,{});s.attach(`#${n}`),e(t,s)}},[]),ae.jsx("div",{id:n})});function Rc(){return ae.jsx(Qn,{fieldType:"cardNumber"})}function Mc(){return ae.jsx(Qn,{fieldType:"cardExpiry"})}function Ic(){return ae.jsx(Qn,{fieldType:"cardCvc"})}function Gc(t){const{updateField:e}=Jn();function r(n){return e("cardHolderName",n.target.value)}return ae.jsx(Qa,{...t,onChange:r})}function Dc(t){const{submitPayment:e}=Jn();return ae.jsx(Ja,{...t,submitPayment:e})}const $c={CardHolderName:Gc,CreditCardNumber:Rc,CreditCardExpiration:Mc,CreditCardCvc:Ic,SubmitBtn:Dc},Za=V.createContext(void 0);function kc({amount:t,children:e,config:r}){const[n,a]=V.useState(),[s,c]=V.useState("");return V.useEffect(()=>{async function f(){const y=await ti.loadStripe(r.publishableKey),_=t*100,l=parseInt(_.toFixed(2),10),h=await Ya("stripe",{amount:l},{secretKey:r.secretKey});a(y),c(h)}f()},[]),!s||!n?null:ae.jsx(Jt.Elements,{stripe:n,options:{clientSecret:s},children:ae.jsx(Fc,{clientSecret:s,children:e})})}function Fc({children:t,clientSecret:e}){const r=Jt.useStripe(),n=Jt.useElements(),[a,s]=V.useState({cardNumber:null,cardExpiry:null,cardCvc:null,cardHolderName:""});function c(y,_){s(l=>({...l,[y]:_}))}async function f(y){if(!(!r||!n))try{const _=n.getElement("cardNumber"),l=await r.confirmCardPayment(e,{payment_method:{card:_}});if(l.error)throw new Error(l.error.message);y.onSuccess(l)}catch(_){y.onError(_)}finally{y.onComplete()}}return ae.jsx(Za.Provider,{value:{submitPayment:f,form:a,updateField:c},children:t})}function ei(){return V.useContext(Za)}const Xn=({fieldType:t})=>{const e=Jt.useElements(),r=`accru-payment-form-${t}-container`,n=V.useRef(!1);return V.useEffect(()=>{function a(){e.create(t).mount(`#${r}`)}n.current||(n.current=!0,a())},[]),ae.jsx("div",{id:r})};function Nc(t){const{updateField:e}=ei();function r(n){return e("cardHolderName",n.target.value)}return ae.jsx(Qa,{...t,onChange:r})}function qc(t){const{submitPayment:e}=ei();return ae.jsx(Ja,{...t,submitPayment:e})}function jc(){return ae.jsx(Xn,{fieldType:"cardNumber"})}function Uc(){return ae.jsx(Xn,{fieldType:"cardExpiry"})}function Lc(){return ae.jsx(Xn,{fieldType:"cardCvc"})}const Hc={CardHolderName:Nc,CreditCardNumber:jc,CreditCardExpiration:Uc,CreditCardCvc:Lc,SubmitBtn:qc};function Bc(t,e){return e.find(r=>r.name===t).config}function Wc(t){const[e,r]=V.useState(!1),[n]=V.useState(t.preferredProvider),[a,s]=V.useState([]);if(V.useEffect(()=>{async function f(){const y=await t.preReleaseGetProviders();if(!y.map(l=>l.name).includes(n))throw new Error("Provider not found.");s(y),r(!0)}f()},[]),e===!1)return null;const c=Bc(n,a);return n==="nuvei"?ae.jsx(Ac,{amount:t.amount,config:c,children:t.children}):n==="stripe"?ae.jsx(kc,{amount:t.amount,config:c,children:t.children}):null}function zc(t){return t==="nuvei"?$c:t==="stripe"?Hc:null}Ie.AccruPay=Wc,Ie.form=zc,Object.defineProperty(Ie,Symbol.toStringTag,{value:"Module"})});
