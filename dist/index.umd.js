(function(Ie,Q){typeof exports=="object"&&typeof module<"u"?Q(exports,require("react"),require("@stripe/stripe-js"),require("@stripe/react-stripe-js")):typeof define=="function"&&define.amd?define(["exports","react","@stripe/stripe-js","@stripe/react-stripe-js"],Q):(Ie=typeof globalThis<"u"?globalThis:Ie||self,Q(Ie.Accru={},Ie.React,Ie.StripeJs,Ie.ReactStripeJs))})(this,function(Ie,Q,ei,Jt){"use strict";var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ti(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var Qt={exports:{}},gt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo;function ri(){if(oo)return gt;oo=1;var t=Q,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function d(f,v,_){var l,c={},g=null,P=null;_!==void 0&&(g=""+_),v.key!==void 0&&(g=""+v.key),v.ref!==void 0&&(P=v.ref);for(l in v)n.call(v,l)&&!s.hasOwnProperty(l)&&(c[l]=v[l]);if(f&&f.defaultProps)for(l in v=f.defaultProps,v)c[l]===void 0&&(c[l]=v[l]);return{$$typeof:e,type:f,key:g,ref:P,props:c,_owner:a.current}}return gt.Fragment=r,gt.jsx=d,gt.jsxs=d,gt}var Tt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ao;function ni(){return ao||(ao=1,process.env.NODE_ENV!=="production"&&function(){var t=Q,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),T=Symbol.iterator,O="@@iterator";function u(i){if(i===null||typeof i!="object")return null;var E=T&&i[T]||i[O];return typeof E=="function"?E:null}var p=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function y(i){{for(var E=arguments.length,x=new Array(E>1?E-1:0),M=1;M<E;M++)x[M-1]=arguments[M];b("error",i,x)}}function b(i,E,x){{var M=p.ReactDebugCurrentFrame,U=M.getStackAddendum();U!==""&&(E+="%s",x=x.concat([U]));var B=x.map(function(k){return String(k)});B.unshift("Warning: "+E),Function.prototype.apply.call(console[i],console,B)}}var S=!1,C=!1,w=!1,G=!1,R=!1,D;D=Symbol.for("react.module.reference");function A(i){return!!(typeof i=="string"||typeof i=="function"||i===n||i===s||R||i===a||i===_||i===l||G||i===P||S||C||w||typeof i=="object"&&i!==null&&(i.$$typeof===g||i.$$typeof===c||i.$$typeof===d||i.$$typeof===f||i.$$typeof===v||i.$$typeof===D||i.getModuleId!==void 0))}function L(i,E,x){var M=i.displayName;if(M)return M;var U=E.displayName||E.name||"";return U!==""?x+"("+U+")":x}function I(i){return i.displayName||"Context"}function X(i){if(i==null)return null;if(typeof i.tag=="number"&&y("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case a:return"StrictMode";case _:return"Suspense";case l:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case f:var E=i;return I(E)+".Consumer";case d:var x=i;return I(x._context)+".Provider";case v:return L(i,i.render,"ForwardRef");case c:var M=i.displayName||null;return M!==null?M:X(i.type)||"Memo";case g:{var U=i,B=U._payload,k=U._init;try{return X(k(B))}catch{return null}}}return null}var te=Object.assign,q=0,pe,xe,N,Pe,me,ke,Fe;function We(){}We.__reactDisabledLog=!0;function Ne(){{if(q===0){pe=console.log,xe=console.info,N=console.warn,Pe=console.error,me=console.group,ke=console.groupCollapsed,Fe=console.groupEnd;var i={configurable:!0,enumerable:!0,value:We,writable:!0};Object.defineProperties(console,{info:i,log:i,warn:i,error:i,group:i,groupCollapsed:i,groupEnd:i})}q++}}function Ce(){{if(q--,q===0){var i={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:te({},i,{value:pe}),info:te({},i,{value:xe}),warn:te({},i,{value:N}),error:te({},i,{value:Pe}),group:te({},i,{value:me}),groupCollapsed:te({},i,{value:ke}),groupEnd:te({},i,{value:Fe})})}q<0&&y("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var oe=p.ReactCurrentDispatcher,H;function V(i,E,x){{if(H===void 0)try{throw Error()}catch(U){var M=U.stack.trim().match(/\n( *(at )?)/);H=M&&M[1]||""}return`
`+H+i}}var W=!1,z;{var ue=typeof WeakMap=="function"?WeakMap:Map;z=new ue}function ve(i,E){if(!i||W)return"";{var x=z.get(i);if(x!==void 0)return x}var M;W=!0;var U=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var B;B=oe.current,oe.current=null,Ne();try{if(E){var k=function(){throw Error()};if(Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(_e){M=_e}Reflect.construct(i,[],k)}else{try{k.call()}catch(_e){M=_e}i.call(k.prototype)}}else{try{throw Error()}catch(_e){M=_e}i()}}catch(_e){if(_e&&M&&typeof _e.stack=="string"){for(var F=_e.stack.split(`
`),he=M.stack.split(`
`),Z=F.length-1,se=he.length-1;Z>=1&&se>=0&&F[Z]!==he[se];)se--;for(;Z>=1&&se>=0;Z--,se--)if(F[Z]!==he[se]){if(Z!==1||se!==1)do if(Z--,se--,se<0||F[Z]!==he[se]){var Oe=`
`+F[Z].replace(" at new "," at ");return i.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",i.displayName)),typeof i=="function"&&z.set(i,Oe),Oe}while(Z>=1&&se>=0);break}}}finally{W=!1,oe.current=B,Ce(),Error.prepareStackTrace=U}var Pt=i?i.displayName||i.name:"",nt=Pt?V(Pt):"";return typeof i=="function"&&z.set(i,nt),nt}function ae(i,E,x){return ve(i,!1)}function Ae(i){var E=i.prototype;return!!(E&&E.isReactComponent)}function ge(i,E,x){if(i==null)return"";if(typeof i=="function")return ve(i,Ae(i));if(typeof i=="string")return V(i);switch(i){case _:return V("Suspense");case l:return V("SuspenseList")}if(typeof i=="object")switch(i.$$typeof){case v:return ae(i.render);case c:return ge(i.type,E,x);case g:{var M=i,U=M._payload,B=M._init;try{return ge(B(U),E,x)}catch{}}}return""}var ie=Object.prototype.hasOwnProperty,ce={},Te=p.ReactDebugCurrentFrame;function be(i){if(i){var E=i._owner,x=ge(i.type,i._source,E?E.type:null);Te.setExtraStackFrame(x)}else Te.setExtraStackFrame(null)}function ze(i,E,x,M,U){{var B=Function.call.bind(ie);for(var k in i)if(B(i,k)){var F=void 0;try{if(typeof i[k]!="function"){var he=Error((M||"React class")+": "+x+" type `"+k+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[k]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw he.name="Invariant Violation",he}F=i[k](E,k,M,x,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Z){F=Z}F&&!(F instanceof Error)&&(be(U),y("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",M||"React class",x,k,typeof F),be(null)),F instanceof Error&&!(F.message in ce)&&(ce[F.message]=!0,be(U),y("Failed %s type: %s",x,F.message),be(null))}}}var Ve=Array.isArray;function jt(i){return Ve(i)}function Zn(i){{var E=typeof Symbol=="function"&&Symbol.toStringTag,x=E&&i[Symbol.toStringTag]||i.constructor.name||"Object";return x}}function eo(i){try{return Cr(i),!1}catch{return!0}}function Cr(i){return""+i}function Lt(i){if(eo(i))return y("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Zn(i)),Cr(i)}var Ze=p.ReactCurrentOwner,et={key:!0,ref:!0,__self:!0,__source:!0},mt,Ut,Ht;Ht={};function to(i){if(ie.call(i,"ref")){var E=Object.getOwnPropertyDescriptor(i,"ref").get;if(E&&E.isReactWarning)return!1}return i.ref!==void 0}function Bt(i){if(ie.call(i,"key")){var E=Object.getOwnPropertyDescriptor(i,"key").get;if(E&&E.isReactWarning)return!1}return i.key!==void 0}function vt(i,E){if(typeof i.ref=="string"&&Ze.current&&E&&Ze.current.stateNode!==E){var x=X(Ze.current.type);Ht[x]||(y('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',X(Ze.current.type),i.ref),Ht[x]=!0)}}function h(i,E){{var x=function(){mt||(mt=!0,y("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",E))};x.isReactWarning=!0,Object.defineProperty(i,"key",{get:x,configurable:!0})}}function m(i,E){{var x=function(){Ut||(Ut=!0,y("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",E))};x.isReactWarning=!0,Object.defineProperty(i,"ref",{get:x,configurable:!0})}}var j=function(i,E,x,M,U,B,k){var F={$$typeof:e,type:i,key:E,ref:x,props:k,_owner:B};return F._store={},Object.defineProperty(F._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(F,"_self",{configurable:!1,enumerable:!1,writable:!1,value:M}),Object.defineProperty(F,"_source",{configurable:!1,enumerable:!1,writable:!1,value:U}),Object.freeze&&(Object.freeze(F.props),Object.freeze(F)),F};function J(i,E,x,M,U){{var B,k={},F=null,he=null;x!==void 0&&(Lt(x),F=""+x),Bt(E)&&(Lt(E.key),F=""+E.key),to(E)&&(he=E.ref,vt(E,U));for(B in E)ie.call(E,B)&&!et.hasOwnProperty(B)&&(k[B]=E[B]);if(i&&i.defaultProps){var Z=i.defaultProps;for(B in Z)k[B]===void 0&&(k[B]=Z[B])}if(F||he){var se=typeof i=="function"?i.displayName||i.name||"Unknown":i;F&&h(k,se),he&&m(k,se)}return j(i,F,he,U,M,Ze.current,k)}}var K=p.ReactCurrentOwner,$=p.ReactDebugCurrentFrame;function ye(i){if(i){var E=i._owner,x=ge(i.type,i._source,E?E.type:null);$.setExtraStackFrame(x)}else $.setExtraStackFrame(null)}var Re;Re=!1;function de(i){return typeof i=="object"&&i!==null&&i.$$typeof===e}function Me(){{if(K.current){var i=X(K.current.type);if(i)return`

Check the render method of \``+i+"`."}return""}}function Wt(i){return""}var qe={};function Ee(i){{var E=Me();if(!E){var x=typeof i=="string"?i:i.displayName||i.name;x&&(E=`

Check the top-level render call using <`+x+">.")}return E}}function zt(i,E){{if(!i._store||i._store.validated||i.key!=null)return;i._store.validated=!0;var x=Ee(E);if(qe[x])return;qe[x]=!0;var M="";i&&i._owner&&i._owner!==K.current&&(M=" It was passed a child from "+X(i._owner.type)+"."),ye(i),y('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',x,M),ye(null)}}function Vt(i,E){{if(typeof i!="object")return;if(jt(i))for(var x=0;x<i.length;x++){var M=i[x];de(M)&&zt(M,E)}else if(de(i))i._store&&(i._store.validated=!0);else if(i){var U=u(i);if(typeof U=="function"&&U!==i.entries)for(var B=U.call(i),k;!(k=B.next()).done;)de(k.value)&&zt(k.value,E)}}}function Ar(i){{var E=i.type;if(E==null||typeof E=="string")return;var x;if(typeof E=="function")x=E.propTypes;else if(typeof E=="object"&&(E.$$typeof===v||E.$$typeof===c))x=E.propTypes;else return;if(x){var M=X(E);ze(x,i.props,"prop",M,i)}else if(E.PropTypes!==void 0&&!Re){Re=!0;var U=X(E);y("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",U||"Unknown")}typeof E.getDefaultProps=="function"&&!E.getDefaultProps.isReactClassApproved&&y("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function tt(i){{for(var E=Object.keys(i.props),x=0;x<E.length;x++){var M=E[x];if(M!=="children"&&M!=="key"){ye(i),y("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",M),ye(null);break}}i.ref!==null&&(ye(i),y("Invalid attribute `ref` supplied to `React.Fragment`."),ye(null))}}var yt={};function rt(i,E,x,M,U,B){{var k=A(i);if(!k){var F="";(i===void 0||typeof i=="object"&&i!==null&&Object.keys(i).length===0)&&(F+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var he=Wt();he?F+=he:F+=Me();var Z;i===null?Z="null":jt(i)?Z="array":i!==void 0&&i.$$typeof===e?(Z="<"+(X(i.type)||"Unknown")+" />",F=" Did you accidentally export a JSX literal instead of a component?"):Z=typeof i,y("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Z,F)}var se=J(i,E,x,U,B);if(se==null)return se;if(k){var Oe=E.children;if(Oe!==void 0)if(M)if(jt(Oe)){for(var Pt=0;Pt<Oe.length;Pt++)Vt(Oe[Pt],i);Object.freeze&&Object.freeze(Oe)}else y("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Vt(Oe,i)}if(ie.call(E,"key")){var nt=X(i),_e=Object.keys(E).filter(function(Wc){return Wc!=="key"}),ro=_e.length>0?"{key: someKey, "+_e.join(": ..., ")+": ...}":"{key: someKey}";if(!yt[nt+ro]){var Bc=_e.length>0?"{"+_e.join(": ..., ")+": ...}":"{}";y(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ro,nt,Bc,nt),yt[nt+ro]=!0}}return i===n?tt(se):Ar(se),se}}function Kt(i,E,x){return rt(i,E,x,!0)}function Yt(i,E,x){return rt(i,E,x,!1)}var Rr=Yt,Mr=Kt;Tt.Fragment=n,Tt.jsx=Rr,Tt.jsxs=Mr}()),Tt}var io;function oi(){return io||(io=1,process.env.NODE_ENV==="production"?Qt.exports=ri():Qt.exports=ni()),Qt.exports}var re=oi();async function ai(t){return new Promise((e,r)=>{if(document.querySelector(`script[src="${t}"]`)){e();return}const a=Object.assign(document.createElement("script"),{type:"text/javascript",defer:!0,src:t,onerror:s=>{r(s)}});a.onload=()=>{e()},document.body.appendChild(a)})}function ii(t){return t.charAt(0).toUpperCase()+t.slice(1)}function so(t){const{text:e,onSuccess:r,onError:n,onComplete:a,submitPayment:s,...d}=t;return re.jsx("button",{onClick:async()=>(d.onSubmit&&await d.onSubmit(),s({onSuccess:r||(()=>{}),onError:n||(()=>{}),onComplete:a||(()=>{})})),...d,children:e})}function lo(t){const{onChange:e,...r}=t;return re.jsx("input",{onChange:e,...r})}const si="https://cdn.safecharge.com/safecharge_resources/v1/websdk/safecharge.js",uo=Q.createContext(void 0);async function li(t,e){return new Promise(function(r,n){t.createPayment(e,a=>{if(a.result==="APPROVED")r(a);else{const s=a.errorDescription?String(a.errorDescription).toLowerCase():"",d=a.transactionStatus?String(a.transactionStatus).toLowerCase():"failed";n(new Error(`Transaction ${d}.${d.includes(s)?"":` Reason: ${ii(s)}.`}`))}})})}function ui({children:t,sessionToken:e,config:r}){const[n,a]=Q.useState({cardNumber:null,cardExpiry:null,cardCvc:null,cardHolderName:""}),[s,d]=Q.useState(),[f,v]=Q.useState();if(!r)throw new Error("config missing");Q.useEffect(()=>{ai(si).then(()=>{window.SafeCharge!==void 0&&d(window.SafeCharge({env:r.env,merchantId:r.merchantId,merchantSiteId:r.merchantSiteId}))})},[]),Q.useEffect(()=>{if(s&&!f){const c=s.fields({});v(c)}},[s,f]);function _(c,g){a(P=>({...P,[c]:g}))}async function l(c){try{if(!n.cardHolderName)throw new Error("Card holder name is required.");if(!n.cardNumber.parentElm.classList.contains(n.cardNumber.stateClass.complete))throw new Error("Invalid card number.");if(!n.cardExpiry.parentElm.classList.contains(n.cardExpiry.stateClass.complete))throw new Error("Invalid card expiry.");if(!n.cardCvc.parentElm.classList.contains(n.cardCvc.stateClass.complete))throw new Error("Invalid card cvc.")}catch(g){console.error(g),c.onError(g),c.onComplete();return}try{const g=await li(s,{cardHolderName:n.cardHolderName,sessionToken:e,paymentOption:n.cardNumber});c.onSuccess(g)}catch(g){console.error(g),c.onError(g)}c.onComplete()}return!s||!f||!e?null:re.jsx(uo.Provider,{value:{submitPayment:l,form:n,updateField:_,safeCharge:s,safeChargeFields:f},children:t})}function Ir(){return Q.useContext(uo)}function ci(t){switch(t){case"cardNumber":return"ccNumber";case"cardExpiry":return"ccExpiration";case"cardCvc":return"ccCvc"}}const Gr=Q.memo(({fieldType:t})=>{const{updateField:e,safeChargeFields:r}=Ir(),n=`accru-payment-form-${t}-container`;return Q.useEffect(()=>{const a=ci(t);if(!r.instances.map(s=>s.type).includes(a)){const s=r.create(a,{});s.attach(`#${n}`),e(t,s)}},[]),re.jsx("div",{id:n})});function di(){return re.jsx(Gr,{fieldType:"cardNumber"})}function hi(){return re.jsx(Gr,{fieldType:"cardExpiry"})}function fi(){return re.jsx(Gr,{fieldType:"cardCvc"})}function pi(t){const{updateField:e}=Ir();function r(n){return e("cardHolderName",n.target.value)}return re.jsx(lo,{...t,onChange:r})}function mi(t){const{submitPayment:e}=Ir();return re.jsx(so,{...t,submitPayment:e})}const vi={CardHolderName:pi,CreditCardNumber:di,CreditCardExpiration:hi,CreditCardCvc:fi,SubmitBtn:mi};class Se{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,r,n,a,s,d,f,v){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const e=new TypeError(Se.TIMEOUT_ERROR_CODE);return e.code=Se.TIMEOUT_ERROR_CODE,e}}Se.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"],Se.TIMEOUT_ERROR_CODE="ETIMEDOUT";class co{constructor(e,r){this._statusCode=e,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class Xt extends Se{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=Xt.makeFetchWithAbortTimeout(e):this._fetchFn=Xt.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(r,n,a)=>{let s;const d=new Promise((v,_)=>{s=setTimeout(()=>{s=null,_(Se.makeTimeoutError())},a)}),f=e(r,n);return Promise.race([f,d]).finally(()=>{s&&clearTimeout(s)})}}static makeFetchWithAbortTimeout(e){return async(r,n,a)=>{const s=new AbortController;let d=setTimeout(()=>{d=null,s.abort(Se.makeTimeoutError())},a);try{return await e(r,Object.assign(Object.assign({},n),{signal:s.signal}))}catch(f){throw f.name==="AbortError"?Se.makeTimeoutError():f}finally{d&&clearTimeout(d)}}}getClientName(){return"fetch"}async makeRequest(e,r,n,a,s,d,f,v){const _=f==="http",l=new URL(n,`${_?"http":"https"}://${e}`);l.port=r;const c=a=="POST"||a=="PUT"||a=="PATCH",g=d||(c?"":void 0),P=await this._fetchFn(l.toString(),{method:a,headers:s,body:g},v);return new Dr(P)}}class Dr extends co{constructor(e){super(e.status,Dr._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){const r={};for(const n of e){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}}class ho{computeHMACSignature(e,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}}class fo extends Error{}class yi extends ho{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,r){throw new fo("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,r){const n=new TextEncoder,a=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),s=await this.subtleCrypto.sign("hmac",a,n.encode(e)),d=new Uint8Array(s),f=new Array(d.length);for(let v=0;v<d.length;v++)f[v]=$r[d[v]];return f.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}}const $r=new Array(256);for(let t=0;t<$r.length;t++)$r[t]=t.toString(16).padStart(2,"0");class Pi{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}secureCompare(e,r){if(e.length!==r.length)return!1;const n=e.length;let a=0;for(let s=0;s<n;++s)a|=e.charCodeAt(s)^r.charCodeAt(s);return a===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new Xt(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new yi(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class gi extends Event{constructor(e,r){super(e),this.data=r}}class Ti{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(e,r){const n=a=>{r(a.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(e,n)}removeListener(e,r){const n=this.listenerMapping.get(r);return this.listenerMapping.delete(r),this.eventTarget.removeEventListener(e,n)}once(e,r){const n=a=>{r(a.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(e,n,{once:!0})}emit(e,r){return this.eventTarget.dispatchEvent(new gi(e,r))}}class _i extends Pi{getUname(){return Promise.resolve(null)}createEmitter(){return new Ti}tryBufferData(e){if(e.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(e)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const Zt=t=>{switch(t.type){case"card_error":return new mo(t);case"invalid_request_error":return new kr(t);case"api_error":return new Fr(t);case"authentication_error":return new Nr(t);case"rate_limit_error":return new qr(t);case"idempotency_error":return new Po(t);case"invalid_grant":return new go(t);default:return new To(t)}},po=t=>{switch(t.type){case"temporary_session_expired":return new _o(t)}switch(t.code){case"invalid_fields":return new kr(t)}return Zt(t)};class fe extends Error{constructor(e={},r=null){super(e.message),this.type=r||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}fe.generate=Zt;class mo extends fe{constructor(e={}){super(e,"StripeCardError")}}class kr extends fe{constructor(e={}){super(e,"StripeInvalidRequestError")}}class Fr extends fe{constructor(e={}){super(e,"StripeAPIError")}}class Nr extends fe{constructor(e={}){super(e,"StripeAuthenticationError")}}class vo extends fe{constructor(e={}){super(e,"StripePermissionError")}}class qr extends fe{constructor(e={}){super(e,"StripeRateLimitError")}}class yo extends fe{constructor(e={}){super(e,"StripeConnectionError")}}class je extends fe{constructor(e,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=e,this.payload=r}}class Po extends fe{constructor(e={}){super(e,"StripeIdempotencyError")}}class go extends fe{constructor(e={}){super(e,"StripeInvalidGrantError")}}class To extends fe{constructor(e={}){super(e,"StripeUnknownError")}}class _o extends fe{constructor(e={}){super(e,"TemporarySessionExpiredError")}}const Eo=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:Fr,StripeAuthenticationError:Nr,StripeCardError:mo,StripeConnectionError:yo,StripeError:fe,StripeIdempotencyError:Po,StripeInvalidGrantError:go,StripeInvalidRequestError:kr,StripePermissionError:vo,StripeRateLimitError:qr,StripeSignatureVerificationError:je,StripeUnknownError:To,TemporarySessionExpiredError:_o,generateV1Error:Zt,generateV2Error:po},Symbol.toStringTag,{value:"Module"}));var jr,So;function ot(){return So||(So=1,jr=TypeError),jr}const Ei=ti(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Lr,bo;function er(){if(bo)return Lr;bo=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&typeof e.get=="function"?e.get:null,n=t&&Map.prototype.forEach,a=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,d=a&&s&&typeof s.get=="function"?s.get:null,f=a&&Set.prototype.forEach,v=typeof WeakMap=="function"&&WeakMap.prototype,_=v?WeakMap.prototype.has:null,l=typeof WeakSet=="function"&&WeakSet.prototype,c=l?WeakSet.prototype.has:null,g=typeof WeakRef=="function"&&WeakRef.prototype,P=g?WeakRef.prototype.deref:null,T=Boolean.prototype.valueOf,O=Object.prototype.toString,u=Function.prototype.toString,p=String.prototype.match,y=String.prototype.slice,b=String.prototype.replace,S=String.prototype.toUpperCase,C=String.prototype.toLowerCase,w=RegExp.prototype.test,G=Array.prototype.concat,R=Array.prototype.join,D=Array.prototype.slice,A=Math.floor,L=typeof BigInt=="function"?BigInt.prototype.valueOf:null,I=Object.getOwnPropertySymbols,X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,te=typeof Symbol=="function"&&typeof Symbol.iterator=="object",q=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===te||!0)?Symbol.toStringTag:null,pe=Object.prototype.propertyIsEnumerable,xe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(h){return h.__proto__}:null);function N(h,m){if(h===1/0||h===-1/0||h!==h||h&&h>-1e3&&h<1e3||w.call(/e/,m))return m;var j=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof h=="number"){var J=h<0?-A(-h):A(h);if(J!==h){var K=String(J),$=y.call(m,K.length+1);return b.call(K,j,"$&_")+"."+b.call(b.call($,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(m,j,"$&_")}var Pe=Ei,me=Pe.custom,ke=ae(me)?me:null,Fe={__proto__:null,double:'"',single:"'"},We={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Lr=function h(m,j,J,K){var $=j||{};if(ie($,"quoteStyle")&&!ie(Fe,$.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ie($,"maxStringLength")&&(typeof $.maxStringLength=="number"?$.maxStringLength<0&&$.maxStringLength!==1/0:$.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ye=ie($,"customInspect")?$.customInspect:!0;if(typeof ye!="boolean"&&ye!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ie($,"indent")&&$.indent!==null&&$.indent!=="	"&&!(parseInt($.indent,10)===$.indent&&$.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ie($,"numericSeparator")&&typeof $.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Re=$.numericSeparator;if(typeof m>"u")return"undefined";if(m===null)return"null";if(typeof m=="boolean")return m?"true":"false";if(typeof m=="string")return Lt(m,$);if(typeof m=="number"){if(m===0)return 1/0/m>0?"0":"-0";var de=String(m);return Re?N(m,de):de}if(typeof m=="bigint"){var Me=String(m)+"n";return Re?N(m,Me):Me}var Wt=typeof $.depth>"u"?5:$.depth;if(typeof J>"u"&&(J=0),J>=Wt&&Wt>0&&typeof m=="object")return oe(m)?"[Array]":"[Object]";var qe=to($,J);if(typeof K>"u")K=[];else if(be(K,m)>=0)return"[Circular]";function Ee(k,F,he){if(F&&(K=D.call(K),K.push(F)),he){var Z={depth:$.depth};return ie($,"quoteStyle")&&(Z.quoteStyle=$.quoteStyle),h(k,Z,J+1,K)}return h(k,$,J+1,K)}if(typeof m=="function"&&!V(m)){var zt=Te(m),Vt=vt(m,Ee);return"[Function"+(zt?": "+zt:" (anonymous)")+"]"+(Vt.length>0?" { "+R.call(Vt,", ")+" }":"")}if(ae(m)){var Ar=te?b.call(String(m),/^(Symbol\(.*\))_[^)]*$/,"$1"):X.call(m);return typeof m=="object"&&!te?et(Ar):Ar}if(Cr(m)){for(var tt="<"+C.call(String(m.nodeName)),yt=m.attributes||[],rt=0;rt<yt.length;rt++)tt+=" "+yt[rt].name+"="+Ne(Ce(yt[rt].value),"double",$);return tt+=">",m.childNodes&&m.childNodes.length&&(tt+="..."),tt+="</"+C.call(String(m.nodeName))+">",tt}if(oe(m)){if(m.length===0)return"[]";var Kt=vt(m,Ee);return qe&&!Ht(Kt)?"["+Bt(Kt,qe)+"]":"[ "+R.call(Kt,", ")+" ]"}if(W(m)){var Yt=vt(m,Ee);return!("cause"in Error.prototype)&&"cause"in m&&!pe.call(m,"cause")?"{ ["+String(m)+"] "+R.call(G.call("[cause]: "+Ee(m.cause),Yt),", ")+" }":Yt.length===0?"["+String(m)+"]":"{ ["+String(m)+"] "+R.call(Yt,", ")+" }"}if(typeof m=="object"&&ye){if(ke&&typeof m[ke]=="function"&&Pe)return Pe(m,{depth:Wt-J});if(ye!=="symbol"&&typeof m.inspect=="function")return m.inspect()}if(ze(m)){var Rr=[];return n&&n.call(m,function(k,F){Rr.push(Ee(F,m,!0)+" => "+Ee(k,m))}),Ut("Map",r.call(m),Rr,qe)}if(Zn(m)){var Mr=[];return f&&f.call(m,function(k){Mr.push(Ee(k,m))}),Ut("Set",d.call(m),Mr,qe)}if(Ve(m))return mt("WeakMap");if(eo(m))return mt("WeakSet");if(jt(m))return mt("WeakRef");if(ue(m))return et(Ee(Number(m)));if(Ae(m))return et(Ee(L.call(m)));if(ve(m))return et(T.call(m));if(z(m))return et(Ee(String(m)));if(typeof window<"u"&&m===window)return"{ [object Window] }";if(typeof globalThis<"u"&&m===globalThis||typeof no<"u"&&m===no)return"{ [object globalThis] }";if(!H(m)&&!V(m)){var i=vt(m,Ee),E=xe?xe(m)===Object.prototype:m instanceof Object||m.constructor===Object,x=m instanceof Object?"":"null prototype",M=!E&&q&&Object(m)===m&&q in m?y.call(ce(m),8,-1):x?"Object":"",U=E||typeof m.constructor!="function"?"":m.constructor.name?m.constructor.name+" ":"",B=U+(M||x?"["+R.call(G.call([],M||[],x||[]),": ")+"] ":"");return i.length===0?B+"{}":qe?B+"{"+Bt(i,qe)+"}":B+"{ "+R.call(i,", ")+" }"}return String(m)};function Ne(h,m,j){var J=j.quoteStyle||m,K=Fe[J];return K+h+K}function Ce(h){return b.call(String(h),/"/g,"&quot;")}function oe(h){return ce(h)==="[object Array]"&&(!q||!(typeof h=="object"&&q in h))}function H(h){return ce(h)==="[object Date]"&&(!q||!(typeof h=="object"&&q in h))}function V(h){return ce(h)==="[object RegExp]"&&(!q||!(typeof h=="object"&&q in h))}function W(h){return ce(h)==="[object Error]"&&(!q||!(typeof h=="object"&&q in h))}function z(h){return ce(h)==="[object String]"&&(!q||!(typeof h=="object"&&q in h))}function ue(h){return ce(h)==="[object Number]"&&(!q||!(typeof h=="object"&&q in h))}function ve(h){return ce(h)==="[object Boolean]"&&(!q||!(typeof h=="object"&&q in h))}function ae(h){if(te)return h&&typeof h=="object"&&h instanceof Symbol;if(typeof h=="symbol")return!0;if(!h||typeof h!="object"||!X)return!1;try{return X.call(h),!0}catch{}return!1}function Ae(h){if(!h||typeof h!="object"||!L)return!1;try{return L.call(h),!0}catch{}return!1}var ge=Object.prototype.hasOwnProperty||function(h){return h in this};function ie(h,m){return ge.call(h,m)}function ce(h){return O.call(h)}function Te(h){if(h.name)return h.name;var m=p.call(u.call(h),/^function\s*([\w$]+)/);return m?m[1]:null}function be(h,m){if(h.indexOf)return h.indexOf(m);for(var j=0,J=h.length;j<J;j++)if(h[j]===m)return j;return-1}function ze(h){if(!r||!h||typeof h!="object")return!1;try{r.call(h);try{d.call(h)}catch{return!0}return h instanceof Map}catch{}return!1}function Ve(h){if(!_||!h||typeof h!="object")return!1;try{_.call(h,_);try{c.call(h,c)}catch{return!0}return h instanceof WeakMap}catch{}return!1}function jt(h){if(!P||!h||typeof h!="object")return!1;try{return P.call(h),!0}catch{}return!1}function Zn(h){if(!d||!h||typeof h!="object")return!1;try{d.call(h);try{r.call(h)}catch{return!0}return h instanceof Set}catch{}return!1}function eo(h){if(!c||!h||typeof h!="object")return!1;try{c.call(h,c);try{_.call(h,_)}catch{return!0}return h instanceof WeakSet}catch{}return!1}function Cr(h){return!h||typeof h!="object"?!1:typeof HTMLElement<"u"&&h instanceof HTMLElement?!0:typeof h.nodeName=="string"&&typeof h.getAttribute=="function"}function Lt(h,m){if(h.length>m.maxStringLength){var j=h.length-m.maxStringLength,J="... "+j+" more character"+(j>1?"s":"");return Lt(y.call(h,0,m.maxStringLength),m)+J}var K=We[m.quoteStyle||"single"];K.lastIndex=0;var $=b.call(b.call(h,K,"\\$1"),/[\x00-\x1f]/g,Ze);return Ne($,"single",m)}function Ze(h){var m=h.charCodeAt(0),j={8:"b",9:"t",10:"n",12:"f",13:"r"}[m];return j?"\\"+j:"\\x"+(m<16?"0":"")+S.call(m.toString(16))}function et(h){return"Object("+h+")"}function mt(h){return h+" { ? }"}function Ut(h,m,j,J){var K=J?Bt(j,J):R.call(j,", ");return h+" ("+m+") {"+K+"}"}function Ht(h){for(var m=0;m<h.length;m++)if(be(h[m],`
`)>=0)return!1;return!0}function to(h,m){var j;if(h.indent==="	")j="	";else if(typeof h.indent=="number"&&h.indent>0)j=R.call(Array(h.indent+1)," ");else return null;return{base:j,prev:R.call(Array(m+1),j)}}function Bt(h,m){if(h.length===0)return"";var j=`
`+m.prev+m.base;return j+R.call(h,","+j)+`
`+m.prev}function vt(h,m){var j=oe(h),J=[];if(j){J.length=h.length;for(var K=0;K<h.length;K++)J[K]=ie(h,K)?m(h[K],h):""}var $=typeof I=="function"?I(h):[],ye;if(te){ye={};for(var Re=0;Re<$.length;Re++)ye["$"+$[Re]]=$[Re]}for(var de in h)ie(h,de)&&(j&&String(Number(de))===de&&de<h.length||te&&ye["$"+de]instanceof Symbol||(w.call(/[^\w$]/,de)?J.push(m(de,h)+": "+m(h[de],h)):J.push(de+": "+m(h[de],h))));if(typeof I=="function")for(var Me=0;Me<$.length;Me++)pe.call(h,$[Me])&&J.push("["+m($[Me])+"]: "+m(h[$[Me]],h));return J}return Lr}var Ur,Oo;function Si(){if(Oo)return Ur;Oo=1;var t=er(),e=ot(),r=function(f,v,_){for(var l=f,c;(c=l.next)!=null;l=c)if(c.key===v)return l.next=c.next,_||(c.next=f.next,f.next=c),c},n=function(f,v){if(f){var _=r(f,v);return _&&_.value}},a=function(f,v,_){var l=r(f,v);l?l.value=_:f.next={key:v,next:f.next,value:_}},s=function(f,v){return f?!!r(f,v):!1},d=function(f,v){if(f)return r(f,v,!0)};return Ur=function(){var v,_={assert:function(l){if(!_.has(l))throw new e("Side channel does not contain "+t(l))},delete:function(l){var c=v&&v.next,g=d(v,l);return g&&c&&c===g&&(v=void 0),!!g},get:function(l){return n(v,l)},has:function(l){return s(v,l)},set:function(l,c){v||(v={next:void 0}),a(v,l,c)}};return _},Ur}var Hr,wo;function bi(){return wo||(wo=1,Hr=Object),Hr}var Br,xo;function Oi(){return xo||(xo=1,Br=Error),Br}var Wr,Co;function wi(){return Co||(Co=1,Wr=EvalError),Wr}var zr,Ao;function xi(){return Ao||(Ao=1,zr=RangeError),zr}var Vr,Ro;function Ci(){return Ro||(Ro=1,Vr=ReferenceError),Vr}var Kr,Mo;function Ai(){return Mo||(Mo=1,Kr=SyntaxError),Kr}var Yr,Io;function Ri(){return Io||(Io=1,Yr=URIError),Yr}var Jr,Go;function Mi(){return Go||(Go=1,Jr=Math.abs),Jr}var Qr,Do;function Ii(){return Do||(Do=1,Qr=Math.floor),Qr}var Xr,$o;function Gi(){return $o||($o=1,Xr=Math.max),Xr}var Zr,ko;function Di(){return ko||(ko=1,Zr=Math.min),Zr}var en,Fo;function $i(){return Fo||(Fo=1,en=Math.pow),en}var tn,No;function ki(){return No||(No=1,tn=Object.getOwnPropertyDescriptor),tn}var rn,qo;function jo(){if(qo)return rn;qo=1;var t=ki();if(t)try{t([],"length")}catch{t=null}return rn=t,rn}var nn,Lo;function Fi(){if(Lo)return nn;Lo=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return nn=t,nn}var on,Uo;function Ni(){return Uo||(Uo=1,on=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;e[r]=a;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var d=Object.getOwnPropertySymbols(e);if(d.length!==1||d[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(e,r);if(f.value!==a||f.enumerable!==!0)return!1}return!0}),on}var an,Ho;function qi(){if(Ho)return an;Ho=1;var t=typeof Symbol<"u"&&Symbol,e=Ni();return an=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},an}var sn,Bo;function ji(){if(Bo)return sn;Bo=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",a=function(v,_){for(var l=[],c=0;c<v.length;c+=1)l[c]=v[c];for(var g=0;g<_.length;g+=1)l[g+v.length]=_[g];return l},s=function(v,_){for(var l=[],c=_,g=0;c<v.length;c+=1,g+=1)l[g]=v[c];return l},d=function(f,v){for(var _="",l=0;l<f.length;l+=1)_+=f[l],l+1<f.length&&(_+=v);return _};return sn=function(v){var _=this;if(typeof _!="function"||e.apply(_)!==n)throw new TypeError(t+_);for(var l=s(arguments,1),c,g=function(){if(this instanceof c){var p=_.apply(this,a(l,arguments));return Object(p)===p?p:this}return _.apply(v,a(l,arguments))},P=r(0,_.length-l.length),T=[],O=0;O<P;O++)T[O]="$"+O;if(c=Function("binder","return function ("+d(T,",")+"){ return binder.apply(this,arguments); }")(g),_.prototype){var u=function(){};u.prototype=_.prototype,c.prototype=new u,u.prototype=null}return c},sn}var ln,Wo;function tr(){if(Wo)return ln;Wo=1;var t=ji();return ln=Function.prototype.bind||t,ln}var un,zo;function cn(){return zo||(zo=1,un=Function.prototype.call),un}var dn,Vo;function Ko(){return Vo||(Vo=1,dn=Function.prototype.apply),dn}var hn,Yo;function Li(){return Yo||(Yo=1,hn=typeof Reflect<"u"&&Reflect&&Reflect.apply),hn}var fn,Jo;function Ui(){if(Jo)return fn;Jo=1;var t=tr(),e=Ko(),r=cn(),n=Li();return fn=n||t.call(r,e),fn}var pn,Qo;function Xo(){if(Qo)return pn;Qo=1;var t=tr(),e=ot(),r=cn(),n=Ui();return pn=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(t,r,s)},pn}var mn,Zo;function Hi(){if(Zo)return mn;Zo=1;var t=Xo(),e=jo(),r;try{r=[].__proto__===Array.prototype}catch(d){if(!d||typeof d!="object"||!("code"in d)||d.code!=="ERR_PROTO_ACCESS")throw d}var n=!!r&&e&&e(Object.prototype,"__proto__"),a=Object,s=a.getPrototypeOf;return mn=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(f){return s(f==null?f:a(f))}:!1,mn}var vn,ea;function Bi(){if(ea)return vn;ea=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=tr();return vn=r.call(t,e),vn}var yn,ta;function Pn(){if(ta)return yn;ta=1;var t,e=bi(),r=Oi(),n=wi(),a=xi(),s=Ci(),d=Ai(),f=ot(),v=Ri(),_=Mi(),l=Ii(),c=Gi(),g=Di(),P=$i(),T=Function,O=function(oe){try{return T('"use strict"; return ('+oe+").constructor;")()}catch{}},u=jo(),p=Fi(),y=function(){throw new f},b=u?function(){try{return arguments.callee,y}catch{try{return u(arguments,"callee").get}catch{return y}}}():y,S=qi()(),C=Hi(),w=typeof Reflect=="function"&&Reflect.getPrototypeOf||e.getPrototypeOf||C,G=Ko(),R=cn(),D={},A=typeof Uint8Array>"u"||!w?t:w(Uint8Array),L={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":S&&w?w([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":D,"%AsyncGenerator%":D,"%AsyncGeneratorFunction%":D,"%AsyncIteratorPrototype%":D,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":T,"%GeneratorFunction%":D,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&w?w(w([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!S||!w?t:w(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":u,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!S||!w?t:w(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&w?w(""[Symbol.iterator]()):t,"%Symbol%":S?Symbol:t,"%SyntaxError%":d,"%ThrowTypeError%":b,"%TypedArray%":A,"%TypeError%":f,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":v,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":R,"%Function.prototype.apply%":G,"%Object.defineProperty%":p,"%Math.abs%":_,"%Math.floor%":l,"%Math.max%":c,"%Math.min%":g,"%Math.pow%":P};if(w)try{null.error}catch(oe){var I=w(w(oe));L["%Error.prototype%"]=I}var X=function oe(H){var V;if(H==="%AsyncFunction%")V=O("async function () {}");else if(H==="%GeneratorFunction%")V=O("function* () {}");else if(H==="%AsyncGeneratorFunction%")V=O("async function* () {}");else if(H==="%AsyncGenerator%"){var W=oe("%AsyncGeneratorFunction%");W&&(V=W.prototype)}else if(H==="%AsyncIteratorPrototype%"){var z=oe("%AsyncGenerator%");z&&w&&(V=w(z.prototype))}return L[H]=V,V},te={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},q=tr(),pe=Bi(),xe=q.call(R,Array.prototype.concat),N=q.call(G,Array.prototype.splice),Pe=q.call(R,String.prototype.replace),me=q.call(R,String.prototype.slice),ke=q.call(R,RegExp.prototype.exec),Fe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,We=/\\(\\)?/g,Ne=function(H){var V=me(H,0,1),W=me(H,-1);if(V==="%"&&W!=="%")throw new d("invalid intrinsic syntax, expected closing `%`");if(W==="%"&&V!=="%")throw new d("invalid intrinsic syntax, expected opening `%`");var z=[];return Pe(H,Fe,function(ue,ve,ae,Ae){z[z.length]=ae?Pe(Ae,We,"$1"):ve||ue}),z},Ce=function(H,V){var W=H,z;if(pe(te,W)&&(z=te[W],W="%"+z[0]+"%"),pe(L,W)){var ue=L[W];if(ue===D&&(ue=X(W)),typeof ue>"u"&&!V)throw new f("intrinsic "+H+" exists, but is not available. Please file an issue!");return{alias:z,name:W,value:ue}}throw new d("intrinsic "+H+" does not exist!")};return yn=function(H,V){if(typeof H!="string"||H.length===0)throw new f("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof V!="boolean")throw new f('"allowMissing" argument must be a boolean');if(ke(/^%?[^%]*%?$/,H)===null)throw new d("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var W=Ne(H),z=W.length>0?W[0]:"",ue=Ce("%"+z+"%",V),ve=ue.name,ae=ue.value,Ae=!1,ge=ue.alias;ge&&(z=ge[0],N(W,xe([0,1],ge)));for(var ie=1,ce=!0;ie<W.length;ie+=1){var Te=W[ie],be=me(Te,0,1),ze=me(Te,-1);if((be==='"'||be==="'"||be==="`"||ze==='"'||ze==="'"||ze==="`")&&be!==ze)throw new d("property names with quotes must have matching quotes");if((Te==="constructor"||!ce)&&(Ae=!0),z+="."+Te,ve="%"+z+"%",pe(L,ve))ae=L[ve];else if(ae!=null){if(!(Te in ae)){if(!V)throw new f("base intrinsic for "+H+" exists, but the property is not available.");return}if(u&&ie+1>=W.length){var Ve=u(ae,Te);ce=!!Ve,ce&&"get"in Ve&&!("originalValue"in Ve.get)?ae=Ve.get:ae=ae[Te]}else ce=pe(ae,Te),ae=ae[Te];ce&&!Ae&&(L[ve]=ae)}}return ae},yn}var gn,ra;function na(){if(ra)return gn;ra=1;var t=Pn(),e=Xo(),r=e([t("%String.prototype.indexOf%")]);return gn=function(a,s){var d=t(a,!!s);return typeof d=="function"&&r(a,".prototype.")>-1?e([d]):d},gn}var Tn,oa;function aa(){if(oa)return Tn;oa=1;var t=Pn(),e=na(),r=er(),n=ot(),a=t("%Map%",!0),s=e("Map.prototype.get",!0),d=e("Map.prototype.set",!0),f=e("Map.prototype.has",!0),v=e("Map.prototype.delete",!0),_=e("Map.prototype.size",!0);return Tn=!!a&&function(){var c,g={assert:function(P){if(!g.has(P))throw new n("Side channel does not contain "+r(P))},delete:function(P){if(c){var T=v(c,P);return _(c)===0&&(c=void 0),T}return!1},get:function(P){if(c)return s(c,P)},has:function(P){return c?f(c,P):!1},set:function(P,T){c||(c=new a),d(c,P,T)}};return g},Tn}var _n,ia;function Wi(){if(ia)return _n;ia=1;var t=Pn(),e=na(),r=er(),n=aa(),a=ot(),s=t("%WeakMap%",!0),d=e("WeakMap.prototype.get",!0),f=e("WeakMap.prototype.set",!0),v=e("WeakMap.prototype.has",!0),_=e("WeakMap.prototype.delete",!0);return _n=s?function(){var c,g,P={assert:function(T){if(!P.has(T))throw new a("Side channel does not contain "+r(T))},delete:function(T){if(s&&T&&(typeof T=="object"||typeof T=="function")){if(c)return _(c,T)}else if(n&&g)return g.delete(T);return!1},get:function(T){return s&&T&&(typeof T=="object"||typeof T=="function")&&c?d(c,T):g&&g.get(T)},has:function(T){return s&&T&&(typeof T=="object"||typeof T=="function")&&c?v(c,T):!!g&&g.has(T)},set:function(T,O){s&&T&&(typeof T=="object"||typeof T=="function")?(c||(c=new s),f(c,T,O)):n&&(g||(g=n()),g.set(T,O))}};return P}:n,_n}var En,sa;function zi(){if(sa)return En;sa=1;var t=ot(),e=er(),r=Si(),n=aa(),a=Wi(),s=a||n||r;return En=function(){var f,v={assert:function(_){if(!v.has(_))throw new t("Side channel does not contain "+e(_))},delete:function(_){return!!f&&f.delete(_)},get:function(_){return f&&f.get(_)},has:function(_){return!!f&&f.has(_)},set:function(_,l){f||(f=s()),f.set(_,l)}};return v},En}var Sn,la;function bn(){if(la)return Sn;la=1;var t=String.prototype.replace,e=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Sn={default:r.RFC3986,formatters:{RFC1738:function(n){return t.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},Sn}var On,ua;function ca(){if(ua)return On;ua=1;var t=bn(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var u=[],p=0;p<256;++p)u.push("%"+((p<16?"0":"")+p.toString(16)).toUpperCase());return u}(),a=function(p){for(;p.length>1;){var y=p.pop(),b=y.obj[y.prop];if(r(b)){for(var S=[],C=0;C<b.length;++C)typeof b[C]<"u"&&S.push(b[C]);y.obj[y.prop]=S}}},s=function(p,y){for(var b=y&&y.plainObjects?{__proto__:null}:{},S=0;S<p.length;++S)typeof p[S]<"u"&&(b[S]=p[S]);return b},d=function u(p,y,b){if(!y)return p;if(typeof y!="object"&&typeof y!="function"){if(r(p))p.push(y);else if(p&&typeof p=="object")(b&&(b.plainObjects||b.allowPrototypes)||!e.call(Object.prototype,y))&&(p[y]=!0);else return[p,y];return p}if(!p||typeof p!="object")return[p].concat(y);var S=p;return r(p)&&!r(y)&&(S=s(p,b)),r(p)&&r(y)?(y.forEach(function(C,w){if(e.call(p,w)){var G=p[w];G&&typeof G=="object"&&C&&typeof C=="object"?p[w]=u(G,C,b):p.push(C)}else p[w]=C}),p):Object.keys(y).reduce(function(C,w){var G=y[w];return e.call(C,w)?C[w]=u(C[w],G,b):C[w]=G,C},S)},f=function(p,y){return Object.keys(y).reduce(function(b,S){return b[S]=y[S],b},p)},v=function(u,p,y){var b=u.replace(/\+/g," ");if(y==="iso-8859-1")return b.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(b)}catch{return b}},_=1024,l=function(p,y,b,S,C){if(p.length===0)return p;var w=p;if(typeof p=="symbol"?w=Symbol.prototype.toString.call(p):typeof p!="string"&&(w=String(p)),b==="iso-8859-1")return escape(w).replace(/%u[0-9a-f]{4}/gi,function(X){return"%26%23"+parseInt(X.slice(2),16)+"%3B"});for(var G="",R=0;R<w.length;R+=_){for(var D=w.length>=_?w.slice(R,R+_):w,A=[],L=0;L<D.length;++L){var I=D.charCodeAt(L);if(I===45||I===46||I===95||I===126||I>=48&&I<=57||I>=65&&I<=90||I>=97&&I<=122||C===t.RFC1738&&(I===40||I===41)){A[A.length]=D.charAt(L);continue}if(I<128){A[A.length]=n[I];continue}if(I<2048){A[A.length]=n[192|I>>6]+n[128|I&63];continue}if(I<55296||I>=57344){A[A.length]=n[224|I>>12]+n[128|I>>6&63]+n[128|I&63];continue}L+=1,I=65536+((I&1023)<<10|D.charCodeAt(L)&1023),A[A.length]=n[240|I>>18]+n[128|I>>12&63]+n[128|I>>6&63]+n[128|I&63]}G+=A.join("")}return G},c=function(p){for(var y=[{obj:{o:p},prop:"o"}],b=[],S=0;S<y.length;++S)for(var C=y[S],w=C.obj[C.prop],G=Object.keys(w),R=0;R<G.length;++R){var D=G[R],A=w[D];typeof A=="object"&&A!==null&&b.indexOf(A)===-1&&(y.push({obj:w,prop:D}),b.push(A))}return a(y),p},g=function(p){return Object.prototype.toString.call(p)==="[object RegExp]"},P=function(p){return!p||typeof p!="object"?!1:!!(p.constructor&&p.constructor.isBuffer&&p.constructor.isBuffer(p))},T=function(p,y){return[].concat(p,y)},O=function(p,y){if(r(p)){for(var b=[],S=0;S<p.length;S+=1)b.push(y(p[S]));return b}return y(p)};return On={arrayToObject:s,assign:f,combine:T,compact:c,decode:v,encode:l,isBuffer:P,isRegExp:g,maybeMap:O,merge:d},On}var wn,da;function Vi(){if(da)return wn;da=1;var t=zi(),e=ca(),r=bn(),n=Object.prototype.hasOwnProperty,a={brackets:function(u){return u+"[]"},comma:"comma",indices:function(u,p){return u+"["+p+"]"},repeat:function(u){return u}},s=Array.isArray,d=Array.prototype.push,f=function(O,u){d.apply(O,s(u)?u:[u])},v=Date.prototype.toISOString,_=r.default,l={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:_,formatter:r.formatters[_],indices:!1,serializeDate:function(u){return v.call(u)},skipNulls:!1,strictNullHandling:!1},c=function(u){return typeof u=="string"||typeof u=="number"||typeof u=="boolean"||typeof u=="symbol"||typeof u=="bigint"},g={},P=function O(u,p,y,b,S,C,w,G,R,D,A,L,I,X,te,q,pe,xe){for(var N=u,Pe=xe,me=0,ke=!1;(Pe=Pe.get(g))!==void 0&&!ke;){var Fe=Pe.get(u);if(me+=1,typeof Fe<"u"){if(Fe===me)throw new RangeError("Cyclic object value");ke=!0}typeof Pe.get(g)>"u"&&(me=0)}if(typeof D=="function"?N=D(p,N):N instanceof Date?N=I(N):y==="comma"&&s(N)&&(N=e.maybeMap(N,function(ge){return ge instanceof Date?I(ge):ge})),N===null){if(C)return R&&!q?R(p,l.encoder,pe,"key",X):p;N=""}if(c(N)||e.isBuffer(N)){if(R){var We=q?p:R(p,l.encoder,pe,"key",X);return[te(We)+"="+te(R(N,l.encoder,pe,"value",X))]}return[te(p)+"="+te(String(N))]}var Ne=[];if(typeof N>"u")return Ne;var Ce;if(y==="comma"&&s(N))q&&R&&(N=e.maybeMap(N,R)),Ce=[{value:N.length>0?N.join(",")||null:void 0}];else if(s(D))Ce=D;else{var oe=Object.keys(N);Ce=A?oe.sort(A):oe}var H=G?String(p).replace(/\./g,"%2E"):String(p),V=b&&s(N)&&N.length===1?H+"[]":H;if(S&&s(N)&&N.length===0)return V+"[]";for(var W=0;W<Ce.length;++W){var z=Ce[W],ue=typeof z=="object"&&z&&typeof z.value<"u"?z.value:N[z];if(!(w&&ue===null)){var ve=L&&G?String(z).replace(/\./g,"%2E"):String(z),ae=s(N)?typeof y=="function"?y(V,ve):V:V+(L?"."+ve:"["+ve+"]");xe.set(u,me);var Ae=t();Ae.set(g,xe),f(Ne,O(ue,ae,y,b,S,C,w,G,y==="comma"&&q&&s(N)?null:R,D,A,L,I,X,te,q,pe,Ae))}}return Ne},T=function(u){if(!u)return l;if(typeof u.allowEmptyArrays<"u"&&typeof u.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof u.encodeDotInKeys<"u"&&typeof u.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(u.encoder!==null&&typeof u.encoder<"u"&&typeof u.encoder!="function")throw new TypeError("Encoder has to be a function.");var p=u.charset||l.charset;if(typeof u.charset<"u"&&u.charset!=="utf-8"&&u.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var y=r.default;if(typeof u.format<"u"){if(!n.call(r.formatters,u.format))throw new TypeError("Unknown format option provided.");y=u.format}var b=r.formatters[y],S=l.filter;(typeof u.filter=="function"||s(u.filter))&&(S=u.filter);var C;if(u.arrayFormat in a?C=u.arrayFormat:"indices"in u?C=u.indices?"indices":"repeat":C=l.arrayFormat,"commaRoundTrip"in u&&typeof u.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var w=typeof u.allowDots>"u"?u.encodeDotInKeys===!0?!0:l.allowDots:!!u.allowDots;return{addQueryPrefix:typeof u.addQueryPrefix=="boolean"?u.addQueryPrefix:l.addQueryPrefix,allowDots:w,allowEmptyArrays:typeof u.allowEmptyArrays=="boolean"?!!u.allowEmptyArrays:l.allowEmptyArrays,arrayFormat:C,charset:p,charsetSentinel:typeof u.charsetSentinel=="boolean"?u.charsetSentinel:l.charsetSentinel,commaRoundTrip:!!u.commaRoundTrip,delimiter:typeof u.delimiter>"u"?l.delimiter:u.delimiter,encode:typeof u.encode=="boolean"?u.encode:l.encode,encodeDotInKeys:typeof u.encodeDotInKeys=="boolean"?u.encodeDotInKeys:l.encodeDotInKeys,encoder:typeof u.encoder=="function"?u.encoder:l.encoder,encodeValuesOnly:typeof u.encodeValuesOnly=="boolean"?u.encodeValuesOnly:l.encodeValuesOnly,filter:S,format:y,formatter:b,serializeDate:typeof u.serializeDate=="function"?u.serializeDate:l.serializeDate,skipNulls:typeof u.skipNulls=="boolean"?u.skipNulls:l.skipNulls,sort:typeof u.sort=="function"?u.sort:null,strictNullHandling:typeof u.strictNullHandling=="boolean"?u.strictNullHandling:l.strictNullHandling}};return wn=function(O,u){var p=O,y=T(u),b,S;typeof y.filter=="function"?(S=y.filter,p=S("",p)):s(y.filter)&&(S=y.filter,b=S);var C=[];if(typeof p!="object"||p===null)return"";var w=a[y.arrayFormat],G=w==="comma"&&y.commaRoundTrip;b||(b=Object.keys(p)),y.sort&&b.sort(y.sort);for(var R=t(),D=0;D<b.length;++D){var A=b[D],L=p[A];y.skipNulls&&L===null||f(C,P(L,A,w,G,y.allowEmptyArrays,y.strictNullHandling,y.skipNulls,y.encodeDotInKeys,y.encode?y.encoder:null,y.filter,y.sort,y.allowDots,y.serializeDate,y.format,y.formatter,y.encodeValuesOnly,y.charset,R))}var I=C.join(y.delimiter),X=y.addQueryPrefix===!0?"?":"";return y.charsetSentinel&&(y.charset==="iso-8859-1"?X+="utf8=%26%2310003%3B&":X+="utf8=%E2%9C%93&"),I.length>0?X+I:""},wn}var xn,ha;function Ki(){if(ha)return xn;ha=1;var t=ca(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},a=function(g){return g.replace(/&#(\d+);/g,function(P,T){return String.fromCharCode(parseInt(T,10))})},s=function(g,P){return g&&typeof g=="string"&&P.comma&&g.indexOf(",")>-1?g.split(","):g},d="utf8=%26%2310003%3B",f="utf8=%E2%9C%93",v=function(P,T){var O={__proto__:null},u=T.ignoreQueryPrefix?P.replace(/^\?/,""):P;u=u.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var p=T.parameterLimit===1/0?void 0:T.parameterLimit,y=u.split(T.delimiter,p),b=-1,S,C=T.charset;if(T.charsetSentinel)for(S=0;S<y.length;++S)y[S].indexOf("utf8=")===0&&(y[S]===f?C="utf-8":y[S]===d&&(C="iso-8859-1"),b=S,S=y.length);for(S=0;S<y.length;++S)if(S!==b){var w=y[S],G=w.indexOf("]="),R=G===-1?w.indexOf("="):G+1,D,A;R===-1?(D=T.decoder(w,n.decoder,C,"key"),A=T.strictNullHandling?null:""):(D=T.decoder(w.slice(0,R),n.decoder,C,"key"),A=t.maybeMap(s(w.slice(R+1),T),function(I){return T.decoder(I,n.decoder,C,"value")})),A&&T.interpretNumericEntities&&C==="iso-8859-1"&&(A=a(String(A))),w.indexOf("[]=")>-1&&(A=r(A)?[A]:A);var L=e.call(O,D);L&&T.duplicates==="combine"?O[D]=t.combine(O[D],A):(!L||T.duplicates==="last")&&(O[D]=A)}return O},_=function(g,P,T,O){for(var u=O?P:s(P,T),p=g.length-1;p>=0;--p){var y,b=g[p];if(b==="[]"&&T.parseArrays)y=T.allowEmptyArrays&&(u===""||T.strictNullHandling&&u===null)?[]:[].concat(u);else{y=T.plainObjects?{__proto__:null}:{};var S=b.charAt(0)==="["&&b.charAt(b.length-1)==="]"?b.slice(1,-1):b,C=T.decodeDotInKeys?S.replace(/%2E/g,"."):S,w=parseInt(C,10);!T.parseArrays&&C===""?y={0:u}:!isNaN(w)&&b!==C&&String(w)===C&&w>=0&&T.parseArrays&&w<=T.arrayLimit?(y=[],y[w]=u):C!=="__proto__"&&(y[C]=u)}u=y}return u},l=function(P,T,O,u){if(P){var p=O.allowDots?P.replace(/\.([^.[]+)/g,"[$1]"):P,y=/(\[[^[\]]*])/,b=/(\[[^[\]]*])/g,S=O.depth>0&&y.exec(p),C=S?p.slice(0,S.index):p,w=[];if(C){if(!O.plainObjects&&e.call(Object.prototype,C)&&!O.allowPrototypes)return;w.push(C)}for(var G=0;O.depth>0&&(S=b.exec(p))!==null&&G<O.depth;){if(G+=1,!O.plainObjects&&e.call(Object.prototype,S[1].slice(1,-1))&&!O.allowPrototypes)return;w.push(S[1])}if(S){if(O.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+O.depth+" and strictDepth is true");w.push("["+p.slice(S.index)+"]")}return _(w,T,O,u)}},c=function(P){if(!P)return n;if(typeof P.allowEmptyArrays<"u"&&typeof P.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof P.decodeDotInKeys<"u"&&typeof P.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(P.decoder!==null&&typeof P.decoder<"u"&&typeof P.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof P.charset<"u"&&P.charset!=="utf-8"&&P.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var T=typeof P.charset>"u"?n.charset:P.charset,O=typeof P.duplicates>"u"?n.duplicates:P.duplicates;if(O!=="combine"&&O!=="first"&&O!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var u=typeof P.allowDots>"u"?P.decodeDotInKeys===!0?!0:n.allowDots:!!P.allowDots;return{allowDots:u,allowEmptyArrays:typeof P.allowEmptyArrays=="boolean"?!!P.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof P.allowPrototypes=="boolean"?P.allowPrototypes:n.allowPrototypes,allowSparse:typeof P.allowSparse=="boolean"?P.allowSparse:n.allowSparse,arrayLimit:typeof P.arrayLimit=="number"?P.arrayLimit:n.arrayLimit,charset:T,charsetSentinel:typeof P.charsetSentinel=="boolean"?P.charsetSentinel:n.charsetSentinel,comma:typeof P.comma=="boolean"?P.comma:n.comma,decodeDotInKeys:typeof P.decodeDotInKeys=="boolean"?P.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof P.decoder=="function"?P.decoder:n.decoder,delimiter:typeof P.delimiter=="string"||t.isRegExp(P.delimiter)?P.delimiter:n.delimiter,depth:typeof P.depth=="number"||P.depth===!1?+P.depth:n.depth,duplicates:O,ignoreQueryPrefix:P.ignoreQueryPrefix===!0,interpretNumericEntities:typeof P.interpretNumericEntities=="boolean"?P.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof P.parameterLimit=="number"?P.parameterLimit:n.parameterLimit,parseArrays:P.parseArrays!==!1,plainObjects:typeof P.plainObjects=="boolean"?P.plainObjects:n.plainObjects,strictDepth:typeof P.strictDepth=="boolean"?!!P.strictDepth:n.strictDepth,strictNullHandling:typeof P.strictNullHandling=="boolean"?P.strictNullHandling:n.strictNullHandling}};return xn=function(g,P){var T=c(P);if(g===""||g===null||typeof g>"u")return T.plainObjects?{__proto__:null}:{};for(var O=typeof g=="string"?v(g,T):g,u=T.plainObjects?{__proto__:null}:{},p=Object.keys(O),y=0;y<p.length;++y){var b=p[y],S=l(b,O[b],T,typeof g=="string");u=t.merge(u,S,T)}return T.allowSparse===!0?u:t.compact(u)},xn}var Cn,fa;function Yi(){if(fa)return Cn;fa=1;var t=Vi(),e=Ki(),r=bn();return Cn={formats:r,parse:e,stringify:t},Cn}var Ji=Yi();const An=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders"];function pa(t){return t&&typeof t=="object"&&An.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function rr(t,e){return Ji.stringify(t,{serializeDate:r=>Math.floor(r.getTime()/1e3).toString(),arrayFormat:e=="v2"?"repeat":"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}const Rn=(()=>{const t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{const r=e.replace(/["\n\r\u2028\u2029]/g,n=>t[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(a,s)=>encodeURIComponent(n[s]||""))}})();function Qi(t){const e=t.match(/\{\w+\}/g);return e?e.map(r=>r.replace(/[{}]/g,"")):[]}function Mn(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!pa(t[0]))return t.shift();const e=Object.keys(t[0]),r=e.filter(n=>An.includes(n));return r.length>0&&r.length!==e.length&&nr(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function ma(t){const e={host:null,headers:{},settings:{}};if(t.length>0){const r=t[t.length-1];if(typeof r=="string")e.authenticator=$n(t.pop());else if(pa(r)){const n=Object.assign({},t.pop()),a=Object.keys(n).filter(s=>!An.includes(s));if(a.length&&nr(`Invalid options found (${a.join(", ")}); ignoring.`),n.apiKey&&(e.authenticator=$n(n.apiKey)),n.idempotencyKey&&(e.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(e.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(e.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(e.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(e.settings.timeout=n.timeout),n.host&&(e.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=n.authenticator}n.additionalHeaders&&(e.headers=n.additionalHeaders)}}return e}function Xi(t){const e=this,r=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...n){e.apply(this,n)};return Object.assign(r,e),r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t),r}function In(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,r)=>(t[r]!=null&&(e[r]=t[r]),e),{})}function Zi(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,r)=>(e[es(r)]=t[r],e),{}):t}function es(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function Gn(t,e){return e?t.then(r=>{setTimeout(()=>{e(null,r)},0)},r=>{setTimeout(()=>{e(r,null)},0)}):t}function ts(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function nr(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function rs(t){const e=typeof t;return(e==="function"||e==="object")&&!!t}function ns(t){const e={},r=(n,a)=>{Object.entries(n).forEach(([s,d])=>{const f=a?`${a}[${s}]`:s;if(rs(d)){if(!(d instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(d,"data"))return r(d,f);e[f]=d}else e[f]=String(d)})};return r(t,null),e}function Dn(t,e,r){if(!Number.isInteger(e)){if(r!==void 0)return r;throw new Error(`${t} must be an integer`)}return e}function os(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function $n(t){const e=r=>(r.headers.Authorization="Bearer "+t,Promise.resolve());return e._apiKey=t,e}function as(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}function is(t){return JSON.stringify(t,as)}function kn(t){return t&&t.startsWith("/v2")?"v2":"v1"}const ss=60;class _t{constructor(e,r){this._stripe=e,this._maxBufferedRequestMetric=r}_addHeadersDirectlyToObject(e,r){e.requestId=r["request-id"],e.stripeAccount=e.stripeAccount||r["stripe-account"],e.apiVersion=e.apiVersion||r["stripe-version"],e.idempotencyKey=e.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(e,r,n){const a=Date.now(),s=a-e.request_start_time;return In({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:e.method,path:e.path,status:r,request_id:this._getRequestId(n),elapsed:s,request_start_time:e.request_start_time,request_end_time:a})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,r,n){return a=>{const s=a.getHeaders(),d=()=>{const v=this._makeResponseEvent(e,a.getStatusCode(),s);this._stripe._emitter.emit("response",v),this._recordRequestMetrics(this._getRequestId(s),v.elapsed,r)},f=a.toStream(d);return this._addHeadersDirectlyToObject(f,s),n(null,f)}}_jsonResponseHandler(e,r,n,a){return s=>{const d=s.getHeaders(),f=this._getRequestId(d),v=s.getStatusCode(),_=this._makeResponseEvent(e,v,d);this._stripe._emitter.emit("response",_),s.toJSON().then(l=>{if(l.error){let c;throw typeof l.error=="string"&&(l.error={type:l.error,message:l.error_description}),l.error.headers=d,l.error.statusCode=v,l.error.requestId=f,v===401?c=new Nr(l.error):v===403?c=new vo(l.error):v===429?c=new qr(l.error):r==="v2"?c=po(l.error):c=Zt(l.error),c}return l},l=>{throw new Fr({message:"Invalid JSON received from the Stripe API",exception:l,requestId:d["request-id"]})}).then(l=>{this._recordRequestMetrics(f,_.elapsed,n);const c=s.getRawResponse();this._addHeadersDirectlyToObject(c,d),Object.defineProperty(l,"lastResponse",{enumerable:!1,writable:!1,value:c}),a(null,l)},l=>a(l,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,r,n,a){return a&&r===0&&Se.CONNECTION_CLOSED_ERROR_CODES.includes(a.code)?!0:r>=n?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,r=null){const n=this._stripe.getInitialNetworkRetryDelay(),a=this._stripe.getMaxNetworkRetryDelay();let s=Math.min(n*Math.pow(2,e-1),a);return s*=.5*(1+Math.random()),s=Math.max(n,s),Number.isInteger(r)&&r<=ss&&(s=Math.max(s,r)),s*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,r,n){const a=this._getMaxNetworkRetries(r),s=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(n==="v2"){if(e==="POST"||e==="DELETE")return s()}else if(n==="v1"&&e==="POST"&&a>0)return s();return null}_makeHeaders({contentType:e,contentLength:r,apiVersion:n,clientUserAgent:a,method:s,userSuppliedHeaders:d,userSuppliedSettings:f,stripeAccount:v,stripeContext:_,apiMode:l}){const c={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(l),"X-Stripe-Client-User-Agent":a,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":v,"Stripe-Context":_,"Idempotency-Key":this._defaultIdempotencyKey(s,f,l)},g=s=="POST"||s=="PUT"||s=="PATCH";return(g||r)&&(g||nr(`${s} method had non-zero contentLength but no payload is expected for this verb`),c["Content-Length"]=r),Object.assign(In(c),Zi(d))}_getUserAgentString(e){const r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,r,n){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)nr("Request metrics buffer is full, dropping telemetry message.");else{const a={request_id:e,request_duration_ms:r};n&&n.length>0&&(a.usage=n),this._stripe._prevRequestMetrics.push(a)}}_rawRequest(e,r,n,a){return new Promise((d,f)=>{let v;try{const P=e.toUpperCase();if(P!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const T=[].slice.call([n,a]),O=Mn(T),u=Object.assign({},O),p=ma(T),y=p.headers,b=p.authenticator;v={requestMethod:P,requestPath:r,bodyData:u,queryData:{},authenticator:b,headers:y,host:null,streaming:!1,settings:{},usage:["raw_request"]}}catch(P){f(P);return}function _(P,T){P?f(P):d(T)}const{headers:l,settings:c}=v,g=v.authenticator;this._request(v.requestMethod,v.host,r,v.bodyData,g,{headers:l,settings:c,streaming:v.streaming},v.usage,_)})}_request(e,r,n,a,s,d,f=[],v,_=null){var l;let c;s=(l=s??this._stripe._authenticator)!==null&&l!==void 0?l:null;const g=kn(n),P=(u,p,y,b,S)=>setTimeout(u,this._getSleepTimeInMS(b,S),p,y,b+1),T=(u,p,y)=>{const b=d.settings&&d.settings.timeout&&Number.isInteger(d.settings.timeout)&&d.settings.timeout>=0?d.settings.timeout:this._stripe.getApiField("timeout"),S={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:e,headers:Object.assign({},p),body:c,protocol:this._stripe.getApiField("protocol")};s(S).then(()=>{const C=this._stripe.getApiField("httpClient").makeRequest(S.host,S.port,S.path,S.method,S.headers,S.body,S.protocol,b),w=Date.now(),G=In({api_version:u,account:p["Stripe-Account"],idempotency_key:p["Idempotency-Key"],method:e,path:n,request_start_time:w}),R=y||0,D=this._getMaxNetworkRetries(d.settings||{});this._stripe._emitter.emit("request",G),C.then(A=>_t._shouldRetry(A,R,D)?P(T,u,p,R,A.getHeaders()["retry-after"]):d.streaming&&A.getStatusCode()<400?this._streamingResponseHandler(G,f,v)(A):this._jsonResponseHandler(G,g,f,v)(A)).catch(A=>{if(_t._shouldRetry(null,R,D,A))return P(T,u,p,R,null);{const L=A.code&&A.code===Se.TIMEOUT_ERROR_CODE;return v(new yo({message:L?`Request aborted due to timeout being reached (${b}ms)`:_t._generateConnectionErrorMessage(R),detail:A}))}})}).catch(C=>{throw new fe({message:"Unable to authenticate the request",exception:C})})},O=(u,p)=>{if(u)return v(u);c=p,this._stripe.getClientUserAgent(y=>{const b=this._stripe.getApiField("version"),S=this._makeHeaders({contentType:g=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:c.length,apiVersion:b,clientUserAgent:y,method:e,userSuppliedHeaders:d.headers,userSuppliedSettings:d.settings,stripeAccount:g=="v2"?null:this._stripe.getApiField("stripeAccount"),stripeContext:g=="v2"?this._stripe.getApiField("stripeContext"):null,apiMode:g});T(b,S,0)})};if(_)_(e,a,d.headers,O);else{let u;g=="v2"?u=a?is(a):"":u=rr(a||{},g),O(null,u)}}}class va{constructor(e,r,n,a){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=a}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const r=ya(this.requestArgs);if(this.index<e.data.length){const n=r?e.data.length-1-this.index:this.index,a=e.data[n];return this.index+=1,{value:a,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);const n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const e=(async()=>{const r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=e,e}}class ls extends va{getNextPage(e){const r=ya(this.requestArgs),n=ms(e,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}}class us extends va{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}class cs{constructor(e,r,n,a){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=r,this.spec=n,this.stripeResource=a}async turnPage(){const e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;const r=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(r.next_page_url),this.currentPageIterator=Promise.resolve(r.data[Symbol.iterator]()),this.currentPageIterator}async next(){{const n=(await this.currentPageIterator).next();if(!n.done)return{done:!1,value:n.value}}const e=await this.turnPage();if(!e)return{done:!0,value:void 0};const r=e.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}}const ds=(t,e,r,n)=>{const a=kn(r.fullPath||r.path);return a!=="v2"&&r.methodType==="search"?Fn(new us(n,e,r,t)):a!=="v2"&&r.methodType==="list"?Fn(new ls(n,e,r,t)):a==="v2"&&r.methodType==="list"?Fn(new cs(n,e,r,t)):null},Fn=t=>{const e=vs((...a)=>t.next(...a)),r=ys(e),n={autoPagingEach:e,autoPagingToArray:r,next:()=>t.next(),return:()=>({}),[hs()]:()=>n};return n};function hs(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function fs(t){if(t.length<2)return null;const e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function ps(t){if(t.length===0)return;const e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(n,a){const s=e(n);a(s)}}function ms(t,e){const r=e?0:t.data.length-1,n=t.data[r],a=n&&n.id;if(!a)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return a}function vs(t){return function(){const r=[].slice.call(arguments),n=ps(r),a=fs(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);const s=Ps(t,n);return Gn(s,a)}}function ys(t){return function(r,n){const a=r&&r.limit;if(!a)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(a>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const s=new Promise((d,f)=>{const v=[];t(_=>{if(v.push(_),v.length>=a)return!1}).then(()=>{d(v)}).catch(f)});return Gn(s,n)}}function Ps(t,e){return new Promise((r,n)=>{function a(s){if(s.done){r();return}const d=s.value;return new Promise(f=>{e(d,f)}).then(f=>f===!1?a({done:!0,value:void 0}):t().then(a))}t().then(a).catch(n)})}function ya(t){const e=[].slice.call(t);return!!Mn(e).ending_before}function gs(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){const r=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=Qi(t.fullPath||this.createResourcePathWithSymbols(t.path||""));const n=Gn(this._makeRequest(e,t,{}),r);return Object.assign(n,ds(this,e,t,n)),n}}o.extend=Xi,o.method=gs,o.MAX_BUFFERED_REQUEST_METRICS=100;function o(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Rn(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=Rn(this.path),this.initialize(...arguments)}o.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){const r=[this.basePath(e),this.path(e)];if(typeof t=="function"){const n=t(e);n&&r.push(n)}else r.push(t);return this._joinUrlParts(r)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,r){var n;const a=(e.method||"GET").toUpperCase(),s=e.usage||[],d=e.urlParams||[],f=e.encode||(G=>G),v=!!e.fullPath,_=Rn(v?e.fullPath:e.path||""),l=v?e.fullPath:this.createResourcePathWithSymbols(e.path),c=[].slice.call(t),g=d.reduce((G,R)=>{const D=c.shift();if(typeof D!="string")throw new Error(`Stripe: Argument "${R}" must be a string, but got: ${D} (on API request to \`${a} ${l}\`)`);return G[R]=D,G},{}),P=Mn(c),T=f(Object.assign({},P,r)),O=ma(c),u=O.host||e.host,p=!!e.streaming;if(c.filter(G=>G!=null).length)throw new Error(`Stripe: Unknown arguments (${c}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${a} \`${l}\`)`);const y=v?_(g):this.createFullPath(_,g),b=Object.assign(O.headers,e.headers);e.validator&&e.validator(T,{headers:b});const S=e.method==="GET"||e.method==="DELETE";return{requestMethod:a,requestPath:y,bodyData:S?null:T,queryData:S?T:{},authenticator:(n=O.authenticator)!==null&&n!==void 0?n:null,headers:b,host:u??null,streaming:p,settings:O.settings,usage:s}},_makeRequest(t,e,r){return new Promise((n,a)=>{var s;let d;try{d=this._getRequestOpts(t,e,r)}catch(g){a(g);return}function f(g,P){g?a(g):n(e.transformResponseData?e.transformResponseData(P):P)}const v=Object.keys(d.queryData).length===0,_=[d.requestPath,v?"":"?",rr(d.queryData,kn(d.requestPath))].join(""),{headers:l,settings:c}=d;this._stripe._requestSender._request(d.requestMethod,d.host,_,d.bodyData,d.authenticator,{headers:l,settings:c,streaming:d.streaming},d.usage,f,(s=this.requestDataProcessor)===null||s===void 0?void 0:s.bind(this))})}};function Pa(t){const e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(l,c,g,P,T,O){try{this.signature.verifyHeader(l,c,g,P||e.DEFAULT_TOLERANCE,T,O)}catch(p){throw p instanceof fo&&(p.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),p}return l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},async constructEventAsync(l,c,g,P,T,O){return await this.signature.verifyHeaderAsync(l,c,g,P||e.DEFAULT_TOLERANCE,T,O),l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},generateTestHeaderString:function(l){const c=_(l),g=c.signature||c.cryptoProvider.computeHMACSignature(c.payloadString,c.secret);return c.generateHeaderString(g)},generateTestHeaderStringAsync:async function(l){const c=_(l),g=c.signature||await c.cryptoProvider.computeHMACSignatureAsync(c.payloadString,c.secret);return c.generateHeaderString(g)}},r={EXPECTED_SCHEME:"v1",verifyHeader(l,c,g,P,T,O){const{decodedHeader:u,decodedPayload:p,details:y,suspectPayloadType:b}=a(l,c,this.EXPECTED_SCHEME),S=/\s/.test(g);T=T||v();const C=T.computeHMACSignature(n(p,y),g);return s(p,u,y,C,P,b,S,O),!0},async verifyHeaderAsync(l,c,g,P,T,O){const{decodedHeader:u,decodedPayload:p,details:y,suspectPayloadType:b}=a(l,c,this.EXPECTED_SCHEME),S=/\s/.test(g);T=T||v();const C=await T.computeHMACSignatureAsync(n(p,y),g);return s(p,u,y,C,P,b,S,O)}};function n(l,c){return`${c.timestamp}.${l}`}function a(l,c,g){if(!l)throw new je(c,l,{message:"No webhook payload was provided."});const P=typeof l!="string"&&!(l instanceof Uint8Array),T=new TextDecoder("utf8"),O=l instanceof Uint8Array?T.decode(l):l;if(Array.isArray(c))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(c==null||c=="")throw new je(c,l,{message:"No stripe-signature header value was provided."});const u=c instanceof Uint8Array?T.decode(c):c,p=d(u,g);if(!p||p.timestamp===-1)throw new je(u,O,{message:"Unable to extract timestamp and signatures from header"});if(!p.signatures.length)throw new je(u,O,{message:"No signatures found with expected scheme"});return{decodedPayload:O,decodedHeader:u,details:p,suspectPayloadType:P}}function s(l,c,g,P,T,O,u,p){const y=!!g.signatures.filter(t.secureCompare.bind(t,P)).length,b=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,S=u?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!y)throw O?new je(c,l,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+b+`
`+S}):new je(c,l,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+b+`
`+S});const C=Math.floor((typeof p=="number"?p:Date.now())/1e3)-g.timestamp;if(T>0&&C>T)throw new je(c,l,{message:"Timestamp outside the tolerance zone"});return!0}function d(l,c){return typeof l!="string"?null:l.split(",").reduce((g,P)=>{const T=P.split("=");return T[0]==="t"&&(g.timestamp=parseInt(T[1],10)),T[0]===c&&g.signatures.push(T[1]),g},{timestamp:-1,signatures:[]})}let f=null;function v(){return f||(f=t.createDefaultCryptoProvider()),f}function _(l){if(!l)throw new fe({message:"Options are required"});const c=Math.floor(l.timestamp)||Math.floor(Date.now()/1e3),g=l.scheme||r.EXPECTED_SCHEME,P=l.cryptoProvider||v(),T=`${c}.${l.payload}`,O=u=>`t=${c},${g}=${u}`;return Object.assign(Object.assign({},l),{timestamp:c,scheme:g,cryptoProvider:P,payloadString:T,generateHeaderString:O})}return e.signature=r,e}const Ts="2024-11-20.acacia";function _s(t,e){for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const n=r[0].toLowerCase()+r.substring(1),a=new e[r](t);this[n]=a}}function ee(t,e){return function(r){return new _s(r,e)}}const Ke=o.method,Es=o.extend({retrieve:Ke({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Ke({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Ke({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Ke({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Ke({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Ke({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Ke({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),ga=o.method,Ss=o.extend({retrieve:ga({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:ga({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),at=o.method,bs=o.extend({create:at({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:at({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:at({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:at({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:at({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:at({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),Ye=o.method,Os=o.extend({create:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:Ye({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),Et=o.method,ws=o.extend({retrieve:Et({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:Et({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:Et({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:Et({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:Et({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),Nn=o.method,xs=o.extend({create:Nn({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:Nn({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:Nn({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),or=o.method,Cs=o.extend({create:or({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:or({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:or({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:or({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),St=o.method,As=o.extend({deliverCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:St({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),ar=o.method,Rs=o.extend({create:ar({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:ar({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:ar({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:ar({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),ir=o.method,Ms=o.extend({create:ir({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:ir({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:ir({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:ir({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),bt=o.method,Is=o.extend({create:bt({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:bt({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:bt({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:bt({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:bt({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),Gs=o.method,Ds=o.extend({create:Gs({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),$s=o.method,ks=o.extend({create:$s({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),Fs=o.method,Ns=o.extend({retrieve:Fs({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),Ta=o.method,qs=o.extend({retrieve:Ta({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:Ta({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),it=o.method,js=o.extend({create:it({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:it({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:it({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:it({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:it({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:it({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),qn=o.method,Ls=o.extend({create:qn({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:qn({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:qn({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),Us=o.method,Hs=o.extend({fundCashBalance:Us({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),jn=o.method,Bs=o.extend({create:jn({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:jn({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:jn({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),Ot=o.method,Ws=o.extend({create:Ot({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Ot({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Ot({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Ot({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Ot({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),_a=o.method,zs=o.extend({retrieve:_a({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:_a({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),Le=o.method,Vs=o.extend({create:Le({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:Le({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:Le({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:Le({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:Le({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:Le({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:Le({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:Le({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),Ln=o.method,Ks=o.extend({retrieve(...t){return Ln({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:r=>this.addFetchRelatedObjectIfNeeded(r)}).apply(this,t)},list(...t){return Ln({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:()=>Ln({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeAccount:t.context}])})}}),sr=o.method,Ys=o.extend({create:sr({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:sr({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:sr({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:sr({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),st=o.method,Js=o.extend({create:st({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:st({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:st({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:st({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),retrieveFeatures:st({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:st({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),Un=o.method,Qs=o.extend({fail:Un({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:Un({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:Un({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),lr=o.method,Xs=o.extend({create:lr({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:lr({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:lr({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:lr({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),wt=o.method,Zs=o.extend({create:wt({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:wt({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:wt({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:wt({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:wt({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),el=o.method,tl=o.extend({create:el({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),rl=o.method,nl=o.extend({create:rl({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),ol=o.method,al=o.extend({create:ol({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),il=o.method,sl=o.extend({create:il({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),ll=o.method,ul=o.extend({create:ll({method:"POST",fullPath:"/v1/billing/meter_events"})}),cl=o.method,dl=o.extend({create:cl({method:"POST",fullPath:"/v2/billing/meter_events"})}),Je=o.method,hl=o.extend({create:Je({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Je({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Je({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Je({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Je({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Je({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Je({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),xt=o.method,fl=o.extend({create:xt({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:xt({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:xt({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:xt({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:xt({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),ur=o.method,pl=o.extend({update:ur({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:ur({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:ur({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:ur({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),cr=o.method,ml=o.extend({create:cr({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:cr({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:cr({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:cr({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),dr=o.method,vl=o.extend({update:dr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:dr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:dr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:dr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),hr=o.method,yl=o.extend({create:hr({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:hr({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:hr({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:hr({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),Hn=o.method,Pl=o.extend({activate:Hn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:Hn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:Hn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),fr=o.method,gl=o.extend({create:fr({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:fr({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:fr({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:fr({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),Ea=o.method,Tl=o.extend({retrieve:Ea({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:Ea({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),Sa=o.method,_l=o.extend({retrieve:Sa({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:Sa({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),El=o.method,Sl=o.extend({presentPaymentMethod:El({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})}),Ge=o.method,bl=o.extend({create:Ge({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:Ge({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:Ge({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:Ge({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:Ge({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),Ol=o.method,wl=o.extend({create:Ol({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),ba=o.method,xl=o.extend({retrieve:ba({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:ba({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),Cl=o.method,Al=o.extend({create:Cl({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),Oa=o.method,Rl=o.extend({retrieve:Oa({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:Oa({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),Ml=o.method,Il=o.extend({expire:Ml({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),pr=o.method,Gl=o.extend({create:pr({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:pr({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:pr({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:pr({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),Bn=o.method,Dl=o.extend({create:Bn({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Bn({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Bn({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),wa=o.method,$l=o.extend({retrieve:wa({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:wa({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),Wn=o.method,kl=o.extend({create:Wn({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:Wn({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:Wn({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),xa=o.method,Fl=o.extend({retrieve:xa({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:xa({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),mr=o.method,Nl=o.extend({create:mr({method:"POST",fullPath:"/v1/apps/secrets"}),list:mr({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:mr({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:mr({method:"GET",fullPath:"/v1/apps/secrets/find"})}),ql=o.method,jl=o.extend({create:ql({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),lt=o.method,Ll=o.extend({create:lt({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:lt({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:lt({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:lt({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:lt({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:lt({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),Ca=o.method,Ul=o.extend({create:Ca({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:Ca({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),Aa=o.method,Hl=o.extend({retrieve:Aa({method:"GET",fullPath:"/v1/tax/settings"}),update:Aa({method:"POST",fullPath:"/v1/tax/settings"})}),Ra=o.method,Bl=o.extend({retrieve:Ra({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:Ra({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),Ct=o.method,Wl=o.extend({create:Ct({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:Ct({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:Ct({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:Ct({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:Ct({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),zn=o.method,zl=o.extend({retrieve:zn({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:zn({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:zn({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),Ma=o.method,Vl=o.extend({retrieve:Ma({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:Ma({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),Vn=o.method,Kl=o.extend({createForceCapture:Vn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:Vn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:Vn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),Ia=o.method,Yl=o.extend({retrieve:Ia({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:Ia({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),Kn=o.method,Jl=o.extend({retrieve:Kn({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:Kn({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:Kn({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),vr=o.method,Ql=o.extend({retrieve:vr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:vr({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:vr({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:vr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),Ga=o.method,Xl=o.extend({retrieve:Ga({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:Ga({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),yr=o.method,Zl=o.extend({create:yr({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:yr({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:yr({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:yr({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),At=o.method,eu=o.extend({create:At({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:At({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:At({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:At({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:At({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),Da=o.method,tu=o.extend({retrieve:Da({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:Da({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),ut=o.method,ru=o.extend({create:ut({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:ut({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:ut({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:ut({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:ut({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:ut({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),ne=o.method,$a=o.extend({create:ne({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?ne({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),ne({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:ne({method:"POST",fullPath:"/v1/accounts/{account}"}),list:ne({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:ne({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:ne({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:ne({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:ne({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:ne({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:ne({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:ne({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:ne({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:ne({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:ne({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:ne({method:"GET",fullPath:"/v1/account"}),retrieveCapability:ne({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:ne({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:ne({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:ne({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:ne({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:ne({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),nu=o.method,ou=o.extend({create:nu({method:"POST",fullPath:"/v1/account_links"})}),au=o.method,iu=o.extend({create:au({method:"POST",fullPath:"/v1/account_sessions"})}),Pr=o.method,su=o.extend({create:Pr({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:Pr({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:Pr({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:Pr({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),ct=o.method,lu=o.extend({retrieve:ct({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:ct({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:ct({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:ct({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:ct({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:ct({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),uu=o.method,cu=o.extend({retrieve:uu({method:"GET",fullPath:"/v1/balance"})}),ka=o.method,du=o.extend({retrieve:ka({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:ka({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),dt=o.method,hu=o.extend({create:dt({method:"POST",fullPath:"/v1/charges"}),retrieve:dt({method:"GET",fullPath:"/v1/charges/{charge}"}),update:dt({method:"POST",fullPath:"/v1/charges/{charge}"}),list:dt({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:dt({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:dt({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),fu=o.method,pu=o.extend({retrieve:fu({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),Fa=o.method,mu=o.extend({retrieve:Fa({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:Fa({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),Rt=o.method,vu=o.extend({create:Rt({method:"POST",fullPath:"/v1/coupons"}),retrieve:Rt({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:Rt({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:Rt({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:Rt({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),Ue=o.method,yu=o.extend({create:Ue({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Ue({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Ue({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Ue({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Ue({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Ue({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Ue({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Ue({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),Pu=o.method,gu=o.extend({create:Pu({method:"POST",fullPath:"/v1/customer_sessions"})}),Y=o.method,Tu=o.extend({create:Y({method:"POST",fullPath:"/v1/customers"}),retrieve:Y({method:"GET",fullPath:"/v1/customers/{customer}"}),update:Y({method:"POST",fullPath:"/v1/customers/{customer}"}),list:Y({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:Y({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:Y({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:Y({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:Y({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:Y({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:Y({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:Y({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:Y({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:Y({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:Y({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:Y({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:Y({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:Y({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:Y({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:Y({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:Y({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:Y({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:Y({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:Y({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:Y({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:Y({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:Y({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:Y({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:Y({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),gr=o.method,_u=o.extend({retrieve:gr({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:gr({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:gr({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:gr({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),Na=o.method,Eu=o.extend({create:Na({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:Na({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),qa=o.method,Su=o.extend({retrieve:qa({method:"GET",fullPath:"/v1/events/{id}"}),list:qa({method:"GET",fullPath:"/v1/events",methodType:"list"})}),ja=o.method,bu=o.extend({retrieve:ja({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:ja({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),Tr=o.method,Ou=o.extend({create:Tr({method:"POST",fullPath:"/v1/file_links"}),retrieve:Tr({method:"GET",fullPath:"/v1/file_links/{link}"}),update:Tr({method:"POST",fullPath:"/v1/file_links/{link}"}),list:Tr({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),wu=(t,e,r)=>{const n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;const a=new TextEncoder;let s=new Uint8Array(0);const d=a.encode(`\r
`);function f(l){const c=s,g=l instanceof Uint8Array?l:new Uint8Array(a.encode(l));s=new Uint8Array(c.length+g.length+2),s.set(c),s.set(g,c.length),s.set(d,s.length-2)}function v(l){return`"${l.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const _=ns(e);for(const l in _){if(!Object.prototype.hasOwnProperty.call(_,l))continue;const c=_[l];if(f(`--${n}`),Object.prototype.hasOwnProperty.call(c,"data")){const g=c;f(`Content-Disposition: form-data; name=${v(l)}; filename=${v(g.name||"blob")}`),f(`Content-Type: ${g.type||"application/octet-stream"}`),f(""),f(g.data)}else f(`Content-Disposition: form-data; name=${v(l)}`),f(""),f(c)}return f(`--${n}--`),s};function xu(t,e,r,n){if(e=e||{},t!=="POST")return n(null,rr(e));this._stripe._platformFunctions.tryBufferData(e).then(a=>{const s=wu(t,a,r);return n(null,s)}).catch(a=>n(a,null))}const Yn=o.method,Cu=o.extend({create:Yn({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:Yn({method:"GET",fullPath:"/v1/files/{file}"}),list:Yn({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:xu}),Mt=o.method,Au=o.extend({create:Mt({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Mt({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Mt({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Mt({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Mt({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),_r=o.method,Ru=o.extend({retrieve:_r({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:_r({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:_r({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:_r({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),le=o.method,Mu=o.extend({create:le({method:"POST",fullPath:"/v1/invoices"}),retrieve:le({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:le({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:le({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:le({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:le({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),createPreview:le({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:le({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:le({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:le({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:le({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:le({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:le({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),retrieveUpcoming:le({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:le({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:le({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:le({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:le({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:le({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),Iu=o.method,Gu=o.extend({retrieve:Iu({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),La=o.method,Jn="connect.stripe.com",Du=o.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let r="oauth/authorize";return e.express&&(r=`express/${r}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${Jn}/${r}?${rr(t)}`},token:La({method:"POST",path:"oauth/token",host:Jn}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),La({method:"POST",path:"oauth/deauthorize",host:Jn}).apply(this,[t,...e])}}),we=o.method,$u=o.extend({create:we({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:we({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:we({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:we({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:we({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:we({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),It=o.method,ku=o.extend({create:It({method:"POST",fullPath:"/v1/payment_links"}),retrieve:It({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:It({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:It({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:It({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),Er=o.method,Fu=o.extend({create:Er({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:Er({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:Er({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:Er({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),Gt=o.method,Nu=o.extend({create:Gt({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Gt({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Gt({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Gt({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Gt({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),ht=o.method,qu=o.extend({create:ht({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:ht({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:ht({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:ht({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:ht({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:ht({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),ft=o.method,ju=o.extend({create:ft({method:"POST",fullPath:"/v1/payouts"}),retrieve:ft({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:ft({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:ft({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:ft({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:ft({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),Dt=o.method,Lu=o.extend({create:Dt({method:"POST",fullPath:"/v1/plans"}),retrieve:Dt({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Dt({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Dt({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Dt({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),$t=o.method,Uu=o.extend({create:$t({method:"POST",fullPath:"/v1/prices"}),retrieve:$t({method:"GET",fullPath:"/v1/prices/{price}"}),update:$t({method:"POST",fullPath:"/v1/prices/{price}"}),list:$t({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:$t({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),De=o.method,Hu=o.extend({create:De({method:"POST",fullPath:"/v1/products"}),retrieve:De({method:"GET",fullPath:"/v1/products/{id}"}),update:De({method:"POST",fullPath:"/v1/products/{id}"}),list:De({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:De({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:De({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:De({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:De({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:De({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:De({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),Sr=o.method,Bu=o.extend({create:Sr({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Sr({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Sr({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Sr({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),$e=o.method,Wu=o.extend({create:$e({method:"POST",fullPath:"/v1/quotes"}),retrieve:$e({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:$e({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:$e({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:$e({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:$e({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:$e({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:$e({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:$e({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:$e({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),kt=o.method,zu=o.extend({create:kt({method:"POST",fullPath:"/v1/refunds"}),retrieve:kt({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:kt({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:kt({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:kt({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),Qn=o.method,Vu=o.extend({retrieve:Qn({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Qn({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Qn({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),Ku=o.method,Yu=o.extend({list:Ku({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),Qe=o.method,Ju=o.extend({create:Qe({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:Qe({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:Qe({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:Qe({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:Qe({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:Qe({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:Qe({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),br=o.method,Qu=o.extend({create:br({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:br({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:br({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:br({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),Ft=o.method,Xu=o.extend({create:Ft({method:"POST",fullPath:"/v1/sources"}),retrieve:Ft({method:"GET",fullPath:"/v1/sources/{source}"}),update:Ft({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:Ft({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:Ft({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),Xe=o.method,Zu=o.extend({create:Xe({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:Xe({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:Xe({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:Xe({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:Xe({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:Xe({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:Xe({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})}),pt=o.method,ec=o.extend({create:pt({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:pt({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:pt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:pt({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:pt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:pt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),He=o.method,tc=o.extend({create:He({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:He({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:He({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:He({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:He({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:He({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:He({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:He({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),Ua=o.method,rc=o.extend({retrieve:Ua({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:Ua({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),Or=o.method,nc=o.extend({create:Or({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Or({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Or({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Or({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),wr=o.method,oc=o.extend({create:wr({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:wr({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:wr({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:wr({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),Ha=o.method,ac=o.extend({create:Ha({method:"POST",fullPath:"/v1/tokens"}),retrieve:Ha({method:"GET",fullPath:"/v1/tokens/{token}"})}),Nt=o.method,ic=o.extend({create:Nt({method:"POST",fullPath:"/v1/topups"}),retrieve:Nt({method:"GET",fullPath:"/v1/topups/{topup}"}),update:Nt({method:"POST",fullPath:"/v1/topups/{topup}"}),list:Nt({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:Nt({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),Be=o.method,sc=o.extend({create:Be({method:"POST",fullPath:"/v1/transfers"}),retrieve:Be({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Be({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Be({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Be({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Be({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Be({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Be({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),qt=o.method,lc=o.extend({create:qt({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:qt({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:qt({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:qt({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:qt({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),uc=ee("apps",{Secrets:Nl}),cc=ee("billing",{Alerts:bs,CreditBalanceSummary:Ns,CreditBalanceTransactions:qs,CreditGrants:js,MeterEventAdjustments:tl,MeterEvents:ul,Meters:hl}),dc=ee("billingPortal",{Configurations:Ms,Sessions:jl}),hc=ee("checkout",{Sessions:Ll}),fc=ee("climate",{Orders:fl,Products:_l,Suppliers:Bl}),pc=ee("entitlements",{ActiveEntitlements:Ss,Features:Ys}),mc=ee("financialConnections",{Accounts:Es,Sessions:Ul,Transactions:Yl}),vc=ee("forwarding",{Requests:kl}),yc=ee("identity",{VerificationReports:tu,VerificationSessions:ru}),Pc=ee("issuing",{Authorizations:ws,Cardholders:Cs,Cards:Rs,Disputes:Ws,PersonalizationDesigns:gl,PhysicalBundles:Tl,Tokens:zl,Transactions:Jl}),gc=ee("radar",{EarlyFraudWarnings:zs,ValueListItems:Zl,ValueLists:eu}),Tc=ee("reporting",{ReportRuns:Dl,ReportTypes:$l}),_c=ee("sigma",{ScheduledQueryRuns:Fl}),Ec=ee("tax",{Calculations:xs,Registrations:Gl,Settings:Hl,Transactions:Ql}),Sc=ee("terminal",{Configurations:Is,ConnectionTokens:ks,Locations:Zs,Readers:bl}),bc=ee("testHelpers",{ConfirmationTokens:Ds,Customers:Hs,Refunds:Il,TestClocks:Wl,Issuing:ee("issuing",{Authorizations:Os,Cards:As,PersonalizationDesigns:Pl,Transactions:Kl}),Terminal:ee("terminal",{Readers:Sl}),Treasury:ee("treasury",{InboundTransfers:Qs,OutboundPayments:pl,OutboundTransfers:vl,ReceivedCredits:wl,ReceivedDebits:Al})}),Oc=ee("treasury",{CreditReversals:Ls,DebitReversals:Bs,FinancialAccounts:Js,InboundTransfers:Xs,OutboundPayments:ml,OutboundTransfers:yl,ReceivedCredits:xl,ReceivedDebits:Rl,TransactionEntries:Vl,Transactions:Xl}),wc=ee("v2",{Billing:ee("billing",{MeterEventAdjustments:nl,MeterEventSession:al,MeterEventStream:sl,MeterEvents:dl}),Core:ee("core",{EventDestinations:Vs,Events:Ks})}),xr=Object.freeze(Object.defineProperty({__proto__:null,Account:$a,AccountLinks:ou,AccountSessions:iu,Accounts:$a,ApplePayDomains:su,ApplicationFees:lu,Apps:uc,Balance:cu,BalanceTransactions:du,Billing:cc,BillingPortal:dc,Charges:hu,Checkout:hc,Climate:fc,ConfirmationTokens:pu,CountrySpecs:mu,Coupons:vu,CreditNotes:yu,CustomerSessions:gu,Customers:Tu,Disputes:_u,Entitlements:pc,EphemeralKeys:Eu,Events:Su,ExchangeRates:bu,FileLinks:Ou,Files:Cu,FinancialConnections:mc,Forwarding:vc,Identity:yc,InvoiceItems:Au,InvoiceRenderingTemplates:Ru,Invoices:Mu,Issuing:Pc,Mandates:Gu,OAuth:Du,PaymentIntents:$u,PaymentLinks:ku,PaymentMethodConfigurations:Fu,PaymentMethodDomains:Nu,PaymentMethods:qu,Payouts:ju,Plans:Lu,Prices:Uu,Products:Hu,PromotionCodes:Bu,Quotes:Wu,Radar:gc,Refunds:zu,Reporting:Tc,Reviews:Vu,SetupAttempts:Yu,SetupIntents:Ju,ShippingRates:Qu,Sigma:_c,Sources:Xu,SubscriptionItems:Zu,SubscriptionSchedules:ec,Subscriptions:tc,Tax:Ec,TaxCodes:rc,TaxIds:nc,TaxRates:oc,Terminal:Sc,TestHelpers:bc,Tokens:ac,Topups:ic,Transfers:sc,Treasury:Oc,V2:wc,WebhookEndpoints:lc},Symbol.toStringTag,{value:"Module"})),Ba="api.stripe.com",Wa="443",za="/v1/",Va=Ts,Ka=8e4,Ya=5,Ja=.5,xc=["name","version","url","partner_id"],Qa=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],Cc=t=>new _t(t,o.MAX_BUFFERED_REQUEST_METRICS);function Ac(t,e=Cc){n.PACKAGE_VERSION="17.4.0",n.USER_AGENT=Object.assign({bindings_version:n.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},os()),n.StripeResource=o,n.resources=xr,n.HttpClient=Se,n.HttpClientResponse=co,n.CryptoProvider=ho;function r(a=t){return Pa(a)}n.webhooks=Object.assign(r,Pa(t));function n(a,s={}){if(!(this instanceof n))return new n(a,s);const d=this._getPropsFromConfig(s);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=n.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const f=d.httpAgent||null;this._api={host:d.host||Ba,port:d.port||Wa,protocol:d.protocol||"https",basePath:za,version:d.apiVersion||Va,timeout:Dn("timeout",d.timeout,Ka),maxNetworkRetries:Dn("maxNetworkRetries",d.maxNetworkRetries,2),agent:f,httpClient:d.httpClient||(f?this._platformFunctions.createNodeHttpClient(f):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:d.stripeAccount||null,stripeContext:d.stripeContext||null};const v=d.typescript||!1;v!==n.USER_AGENT.typescript&&(n.USER_AGENT.typescript=v),d.appInfo&&this._setAppInfo(d.appInfo),this._prepResources(),this._setAuthenticator(a,d.authenticator),this.errors=Eo,this.webhooks=r(),this._prevRequestMetrics=[],this._enableTelemetry=d.telemetry!==!1,this._requestSender=e(this),this.StripeResource=n.StripeResource}return n.errors=Eo,n.createNodeHttpClient=t.createNodeHttpClient,n.createFetchHttpClient=t.createFetchHttpClient,n.createNodeCryptoProvider=t.createNodeCryptoProvider,n.createSubtleCryptoProvider=t.createSubtleCryptoProvider,n.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(a,s,d,f){return this._requestSender._rawRequest(a,s,d,f)},_setAuthenticator(a,s){if(a&&s)throw new Error("Can't specify both apiKey and authenticator");if(!a&&!s)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=a?$n(a):s},_setAppInfo(a){if(a&&typeof a!="object")throw new Error("AppInfo must be an object.");if(a&&!a.name)throw new Error("AppInfo.name is required");a=a||{},this._appInfo=xc.reduce((s,d)=>(typeof a[d]=="string"&&(s=s||{},s[d]=a[d]),s),void 0)},_setApiField(a,s){this._api[a]=s},getApiField(a){return this._api[a]},setClientId(a){this._clientId=a},getClientId(){return this._clientId},getConstant:a=>{switch(a){case"DEFAULT_HOST":return Ba;case"DEFAULT_PORT":return Wa;case"DEFAULT_BASE_PATH":return za;case"DEFAULT_API_VERSION":return Va;case"DEFAULT_TIMEOUT":return Ka;case"MAX_NETWORK_RETRY_DELAY_SEC":return Ya;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return Ja}return n[a]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(a,s,d){const f=Dn(a,s,d);this._setApiField(a,f)},getMaxNetworkRetryDelay(){return Ya},getInitialNetworkRetryDelay(){return Ja},getClientUserAgent(a){return this.getClientUserAgentSeeded(n.USER_AGENT,a)},getClientUserAgentSeeded(a,s){this._platformFunctions.getUname().then(d=>{var f;const v={};for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&(v[l]=encodeURIComponent((f=a[l])!==null&&f!==void 0?f:"null"));v.uname=encodeURIComponent(d||"UNKNOWN");const _=this.getApiField("httpClient");_&&(v.httplib=encodeURIComponent(_.getClientName())),this._appInfo&&(v.application=this._appInfo),s(JSON.stringify(v))})},getAppInfoAsString(){if(!this._appInfo)return"";let a=this._appInfo.name;return this._appInfo.version&&(a+=`/${this._appInfo.version}`),this._appInfo.url&&(a+=` (${this._appInfo.url})`),a},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const a in xr)Object.prototype.hasOwnProperty.call(xr,a)&&(this[ts(a)]=new xr[a](this))},_getPropsFromConfig(a){if(!a)return{};const s=typeof a=="string";if(!(a===Object(a)&&!Array.isArray(a))&&!s)throw new Error("Config must either be an object or a string");if(s)return{apiVersion:a};if(Object.keys(a).filter(v=>!Qa.includes(v)).length>0)throw new Error(`Config object may only contain the following: ${Qa.join(", ")}`);return a},parseThinEvent(a,s,d,f,v,_){return this.webhooks.constructEvent(a,s,d,f,v,_)}},n}const Rc=Ac(new _i);async function Mc(t,e){return(await new Rc(e.secretKey).paymentIntents.create({customer:"cus_RQATBsWqSFeYZp",amount:t,currency:"USD",automatic_payment_methods:{enabled:!0}})).client_secret}async function Ic(t,{amount:e},r){return Mc(e,r)}const Xa=Q.createContext(void 0);function Gc({amount:t,children:e,config:r}){const[n,a]=Q.useState(),[s,d]=Q.useState("");return Q.useEffect(()=>{async function f(){const v=await ei.loadStripe(r.publishableKey),_=t*100,l=parseInt(_.toFixed(2),10),c=await Ic("stripe",{amount:l},{secretKey:r.secretKey});a(v),d(c)}f()},[]),!s||!n?null:re.jsx(Jt.Elements,{stripe:n,options:{clientSecret:s},children:re.jsx(Dc,{clientSecret:s,children:e})})}function Dc({children:t,clientSecret:e}){const r=Jt.useStripe(),n=Jt.useElements(),[a,s]=Q.useState({cardNumber:null,cardExpiry:null,cardCvc:null,cardHolderName:""});function d(v,_){s(l=>({...l,[v]:_}))}async function f(v){if(!(!r||!n))try{const _=n.getElement("cardNumber"),l=await r.confirmCardPayment(e,{payment_method:{card:_}});if(l.error)throw new Error(l.error.message);v.onSuccess(l)}catch(_){v.onError(_)}finally{v.onComplete()}}return re.jsx(Xa.Provider,{value:{submitPayment:f,form:a,updateField:d},children:t})}function Za(){return Q.useContext(Xa)}const Xn=({fieldType:t})=>{const e=Jt.useElements(),r=`accru-payment-form-${t}-container`,n=Q.useRef(!1);return Q.useEffect(()=>{function a(){e.create(t).mount(`#${r}`)}n.current||(n.current=!0,a())},[]),re.jsx("div",{id:r})};function $c(t){const{updateField:e}=Za();function r(n){return e("cardHolderName",n.target.value)}return re.jsx(lo,{...t,onChange:r})}function kc(t){const{submitPayment:e}=Za();return re.jsx(so,{...t,submitPayment:e})}function Fc(){return re.jsx(Xn,{fieldType:"cardNumber"})}function Nc(){return re.jsx(Xn,{fieldType:"cardExpiry"})}function qc(){return re.jsx(Xn,{fieldType:"cardCvc"})}const jc={CardHolderName:$c,CreditCardNumber:Fc,CreditCardExpiration:Nc,CreditCardCvc:qc,SubmitBtn:kc};function Lc(t,e){return e.find(r=>r.name===t).config}function Uc(t){const[e,r]=Q.useState(!1),[n]=Q.useState(t.preferredProvider),[a,s]=Q.useState([]);if(Q.useEffect(()=>{async function f(){const v=await t.preReleaseGetProviders();if(!v.map(l=>l.name).includes(n))throw new Error("Provider not found.");s(v),r(!0)}f()},[]),e===!1)return null;const d=Lc(n,a);return n==="nuvei"?t.sessionToken?re.jsx(ui,{sessionToken:t.sessionToken,config:d,children:t.children}):re.jsx("div",{children:"Missing sessionToken"}):n==="stripe"?t.amount?re.jsx(Gc,{amount:t.amount,config:d,children:t.children}):re.jsx("div",{children:"Missing amount"}):null}function Hc(t){return t==="nuvei"?vi:t==="stripe"?jc:null}Ie.AccruPay=Uc,Ie.form=Hc,Object.defineProperty(Ie,Symbol.toStringTag,{value:"Module"})});
